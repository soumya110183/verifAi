{"file_contents":{"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\", \"system-ui\", \"sans-serif\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"JetBrains Mono\", \"var(--font-mono)\", \"monospace\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4117,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest, getQueryFn } from \"@/lib/queryClient\";\n\ninterface User {\n  username: string;\n}\n\ninterface AuthResponse {\n  user?: User;\n  error?: string;\n}\n\nexport function useAuth() {\n  const queryClient = useQueryClient();\n\n  const { data, isLoading } = useQuery<AuthResponse | null>({\n    queryKey: [\"/api/auth/me\"],\n    queryFn: getQueryFn<AuthResponse | null>({ on401: \"returnNull\" }),\n    retry: false,\n    staleTime: 5 * 60 * 1000,\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: { username: string; password: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/auth/login\", credentials);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/auth/logout\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n    },\n  });\n\n  return {\n    user: data?.user,\n    isLoading,\n    isAuthenticated: !!data?.user,\n    login: loginMutation.mutate,\n    logout: logoutMutation.mutate,\n    isLoggingIn: loginMutation.isPending,\n    isLoggingOut: logoutMutation.isPending,\n    loginError: loginMutation.error,\n  };\n}\n","path":null,"size_bytes":1388,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"design_guidelines.md":{"content":"# VerifAI Design Guidelines\n\n## Design Approach\n**Design System**: Material Design 3 with Linear-inspired refinements for a modern enterprise SaaS aesthetic. This provides robust patterns for data-dense interfaces while maintaining visual sophistication.\n\n**Key Principles**: \n- Clarity and efficiency for compliance analysts\n- Trust and professionalism for financial services context\n- Information density without overwhelming users\n- Scannable hierarchies for quick decision-making\n\n## Typography\n\n**Font Family**: \n- Primary: Inter (via Google Fonts) for UI elements, data, and body text\n- Monospace: JetBrains Mono for ID numbers, MRZ codes, and technical data\n\n**Scale**:\n- Hero metrics (dashboard): text-5xl (48px), font-bold\n- Page headers: text-3xl (30px), font-semibold\n- Section headers: text-xl (20px), font-semibold\n- Card titles: text-lg (18px), font-medium\n- Body text: text-base (16px), font-normal\n- Secondary/meta text: text-sm (14px), font-normal\n- Captions/labels: text-xs (12px), font-medium\n\n## Layout System\n\n**Spacing Primitives**: Use Tailwind units of 1, 2, 4, 6, 8, 12, 16, 24 for consistent rhythm\n- Component padding: p-6 to p-8\n- Section spacing: space-y-6 to space-y-8\n- Card gaps: gap-4 to gap-6\n- Tight groupings: space-y-2 to space-y-4\n\n**Grid System**:\n- Dashboard metrics: 4-column grid (grid-cols-4) for KPIs\n- Recent verifications: Single column list with dividers\n- Verification detail: 2-column layout (8/4 split) - document viewer (col-span-8) + sidebar (col-span-4)\n- Settings: Single column max-w-4xl centered\n\n**Container Strategy**:\n- Main content: max-w-7xl mx-auto with px-6 to px-8\n- Forms and settings: max-w-3xl for optimal readability\n- Full-width tables and lists\n\n## Component Library\n\n### Navigation\n**Top Navigation Bar**:\n- Fixed header with h-16, flex items-center justify-between\n- Logo and platform name on left\n- Primary navigation links (Dashboard, Integrations, Patterns, Settings) in center\n- User profile avatar + notifications on right\n- Subtle border-b for separation\n\n### Dashboard Components\n\n**Metric Cards**:\n- Rounded-lg cards with p-6\n- Icon or graphic in top-left (32px size)\n- Large number display (text-4xl font-bold)\n- Label below (text-sm text-muted)\n- Optional percentage change indicator (text-xs with arrow icon)\n- Arrange in 4-column grid with gap-6\n\n**Chart Container**:\n- Full-width card with p-6\n- Header with title (text-xl font-semibold) and time range selector\n- Chart area with h-80\n- Use recharts library for line/area charts\n\n**Recent Activity Feed**:\n- List with divide-y dividers\n- Each item: flex justify-between items-center with py-4 px-6\n- Left: Document type icon + name + timestamp\n- Right: Status badge (rounded-full px-3 py-1 text-xs font-medium)\n\n### Upload Interface\n\n**Drag & Drop Zone**:\n- Large centered area with rounded-xl border-2 border-dashed\n- Minimum h-64 with flex flex-col items-center justify-center\n- Upload icon (64px) at top\n- \"Drag and drop your document\" headline (text-xl font-semibold)\n- Supported formats text (text-sm)\n- \"or browse files\" button below\n\n**Processing State**:\n- Animated spinner with \"Analyzing document...\" text\n- Progress indicator showing OCR stages\n\n### Verification Detail Page\n\n**Document Viewer**:\n- Full-height image container with zoom controls\n- SVG overlay for bounding boxes (stroke-width: 2, different colors per field type)\n- Hover tooltips showing field name + confidence %\n\n**Sidebar Panels**:\n- Tabbed interface (OCR Extraction, Data Validation, Risk Analysis)\n- Tab bar with border-b, active tab has border-b-2 accent\n- Panel content with p-6, space-y-6\n\n**Risk Score Card**:\n- Prominent circular progress indicator (120px diameter)\n- Score in center (text-4xl font-bold)\n- Risk level text below (LOW/MEDIUM/HIGH)\n- AI insights in expandable accordion below\n\n**Field Display Grid**:\n- 2-column grid for extracted fields\n- Label (text-sm font-medium) above value (text-base)\n- Confidence score badge next to each field\n- Match/mismatch icons for validation tab\n\n**Action Bar**:\n- Fixed bottom bar with border-t\n- Reject button (outlined, left) and Approve button (filled, right)\n- Space-x-4 between buttons\n\n### GenAI Assistant\n\n**Chat Interface**:\n- Fixed-height container (h-96) with overflow-y-auto\n- Messages with alternating alignment (user: right, AI: left)\n- Message bubbles: rounded-2xl px-4 py-3 max-w-md\n- Avatar icons (32px) next to each message\n- Input bar at bottom: flex items-center gap-2, rounded-full border\n- Send button icon (24px) on right side of input\n\n**Suggested Prompts**:\n- Chips below input with rounded-full px-4 py-2 text-sm\n- 3-4 prompts like \"Explain risk score\", \"Check for fraud patterns\"\n\n### Forms & Settings\n\n**Settings Groups**:\n- Each group in card with p-6, space-y-6\n- Group header with text-lg font-semibold mb-4\n- Form fields with label (text-sm font-medium mb-2) and input\n- Slider components for threshold values with numeric display\n- Toggle switches for boolean settings\n\n**Input Fields**:\n- Full-width with h-10 to h-12, rounded-lg border\n- Focus state with ring-2\n- Helper text below (text-xs)\n\n### Data Tables\n\n**Integrations Table**:\n- Full-width with rounded-lg overflow-hidden\n- Header row with bg-muted, text-sm font-medium, py-3 px-6\n- Data rows with py-4 px-6, border-b\n- Status indicators: rounded-full w-2 h-2 inline-block (Connected/Disconnected)\n- Action buttons (outlined, small) in last column\n\n### Patterns Library\n\n**Pattern Cards**:\n- 3-column grid (grid-cols-3 gap-6)\n- Each card: rounded-xl with p-6\n- Before/after image comparison (aspect-video)\n- Pattern name (text-lg font-semibold)\n- Detection method description (text-sm)\n- Confidence badge\n\n## Animations\n\n**Use Sparingly**:\n- Page transitions: Simple fade-in (duration-200)\n- Loading states: Spinner rotation only\n- Hover states: Scale-105 on metric cards, brightness increase on buttons\n- No scroll animations, parallax, or decorative motion\n\n## Images\n\n**Document Thumbnails**: \n- All uploaded documents shown as centered images with object-cover\n- Verification detail page displays full document with aspect-auto\n\n**Pattern Examples**:\n- Before/after comparisons showing tampered vs. authentic documents\n- Placeholder fraud detection visual examples\n\n**No Hero Images**: This is a dashboard application - functionality takes precedence over marketing imagery\n\n## Accessibility\n\n- All interactive elements have focus-visible states with ring-2\n- Color is never the only indicator (use icons + text)\n- Form inputs have associated labels and aria-describedby for errors\n- Minimum touch target size 44px for all buttons\n- Skip navigation link for keyboard users","path":null,"size_bytes":6638,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: true,\n      staleTime: 30000,\n      retry: 1,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1375,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/pages/VerificationDetail.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useParams, useLocation } from \"wouter\";\nimport { \n  ArrowLeft, \n  ZoomIn, \n  ZoomOut, \n  RotateCw,\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  Loader2,\n  Info\n} from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { GenAIAssistant } from \"@/components/GenAIAssistant\";\nimport type { Verification, OcrField, RiskInsight, ValidationResult } from \"@shared/schema\";\nimport { Link } from \"wouter\";\n\nfunction RiskScoreGauge({ score, level }: { score: number; level: string }) {\n  const getColor = () => {\n    if (score < 30) return \"text-green-500\";\n    if (score < 70) return \"text-yellow-500\";\n    return \"text-red-500\";\n  };\n\n  const getBackgroundColor = () => {\n    if (score < 30) return \"bg-green-500\";\n    if (score < 70) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <div className=\"relative w-32 h-32\">\n        <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 120 120\">\n          <circle\n            cx=\"60\"\n            cy=\"60\"\n            r=\"50\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"10\"\n            className=\"text-muted\"\n          />\n          <circle\n            cx=\"60\"\n            cy=\"60\"\n            r=\"50\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"10\"\n            strokeLinecap=\"round\"\n            strokeDasharray={`${(score / 100) * 314} 314`}\n            className={getColor()}\n          />\n        </svg>\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n          <span className={`text-4xl font-bold ${getColor()}`}>{score}</span>\n        </div>\n      </div>\n      <Badge \n        variant=\"outline\" \n        className={`mt-3 ${getBackgroundColor()} text-white border-0 uppercase text-xs font-semibold`}\n      >\n        {level} Risk\n      </Badge>\n    </div>\n  );\n}\n\nfunction OcrFieldDisplay({ field }: { field: OcrField }) {\n  const getConfidenceColor = (confidence: number) => {\n    if (confidence >= 90) return \"text-green-600 dark:text-green-400\";\n    if (confidence >= 70) return \"text-yellow-600 dark:text-yellow-400\";\n    return \"text-red-600 dark:text-red-400\";\n  };\n\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"flex items-center justify-between gap-2\">\n        <span className=\"text-sm font-medium text-muted-foreground\">{field.fieldName}</span>\n        <Badge variant=\"outline\" className={`text-xs ${getConfidenceColor(field.confidence)}`}>\n          {field.confidence}%\n        </Badge>\n      </div>\n      <p className=\"font-mono text-base\">{field.value}</p>\n    </div>\n  );\n}\n\nfunction ValidationRow({ result }: { result: ValidationResult }) {\n  return (\n    <div className=\"grid grid-cols-3 gap-4 py-3 border-b border-border last:border-0\">\n      <div>\n        <span className=\"text-sm font-medium text-muted-foreground\">{result.fieldName}</span>\n      </div>\n      <div className=\"font-mono text-sm\">{result.submittedValue || \"-\"}</div>\n      <div className=\"flex items-center gap-2\">\n        <span className=\"font-mono text-sm\">{result.extractedValue}</span>\n        {result.isMatch ? (\n          <CheckCircle className=\"h-4 w-4 text-green-500 shrink-0\" />\n        ) : (\n          <XCircle className=\"h-4 w-4 text-red-500 shrink-0\" />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function VerificationDetail() {\n  const { id } = useParams<{ id: string }>();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [zoom, setZoom] = useState(1);\n  const [showBoundingBoxes, setShowBoundingBoxes] = useState(true);\n\n  const { data: verification, isLoading } = useQuery<Verification>({\n    queryKey: [\"/api/verifications\", id],\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async (status: \"approved\" | \"rejected\") => {\n      return apiRequest(\"PATCH\", `/api/verifications/${id}`, { status });\n    },\n    onSuccess: (_, status) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/verifications\", id] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n      toast({\n        title: `Verification ${status}`,\n        description: `The document has been ${status}.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Action failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-6\">\n        <Skeleton className=\"h-10 w-48\" />\n        <div className=\"grid grid-cols-12 gap-6\">\n          <div className=\"col-span-8\">\n            <Skeleton className=\"h-[500px]\" />\n          </div>\n          <div className=\"col-span-4\">\n            <Skeleton className=\"h-[500px]\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!verification) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-6 py-8 text-center\">\n        <AlertTriangle className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n        <h2 className=\"text-xl font-semibold mb-2\">Verification not found</h2>\n        <p className=\"text-muted-foreground mb-4\">\n          The requested verification could not be found.\n        </p>\n        <Link href=\"/\">\n          <Button>Return to Dashboard</Button>\n        </Link>\n      </div>\n    );\n  }\n\n  const isPending = verification.status === \"pending\" || verification.status === \"in_review\";\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-6\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div className=\"flex items-center gap-4\">\n          <Link href=\"/\">\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-semibold tracking-tight\">\n              {verification.customerName || `Verification ${verification.id.slice(0, 8)}`}\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">\n              Submitted {new Date(verification.submittedAt).toLocaleString()}\n            </p>\n          </div>\n        </div>\n        \n        {isPending && (\n          <div className=\"flex items-center gap-3\">\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button variant=\"outline\" data-testid=\"button-reject\">\n                  <XCircle className=\"h-4 w-4 mr-2\" />\n                  Reject\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent>\n                <AlertDialogHeader>\n                  <AlertDialogTitle>Reject Verification</AlertDialogTitle>\n                  <AlertDialogDescription>\n                    Are you sure you want to reject this verification? This action cannot be undone.\n                  </AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\n                  <AlertDialogAction\n                    onClick={() => updateStatusMutation.mutate(\"rejected\")}\n                    className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                  >\n                    {updateStatusMutation.isPending ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      \"Reject\"\n                    )}\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n\n            <AlertDialog>\n              <AlertDialogTrigger asChild>\n                <Button data-testid=\"button-approve\">\n                  <CheckCircle className=\"h-4 w-4 mr-2\" />\n                  Approve\n                </Button>\n              </AlertDialogTrigger>\n              <AlertDialogContent>\n                <AlertDialogHeader>\n                  <AlertDialogTitle>Approve Verification</AlertDialogTitle>\n                  <AlertDialogDescription>\n                    Are you sure you want to approve this verification? This will mark the document as verified.\n                  </AlertDialogDescription>\n                </AlertDialogHeader>\n                <AlertDialogFooter>\n                  <AlertDialogCancel>Cancel</AlertDialogCancel>\n                  <AlertDialogAction onClick={() => updateStatusMutation.mutate(\"approved\")}>\n                    {updateStatusMutation.isPending ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      \"Approve\"\n                    )}\n                  </AlertDialogAction>\n                </AlertDialogFooter>\n              </AlertDialogContent>\n            </AlertDialog>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n        <div className=\"lg:col-span-8 space-y-6\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n              <CardTitle className=\"text-lg font-semibold\">Document Viewer</CardTitle>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => setZoom(Math.max(0.5, zoom - 0.25))}\n                  data-testid=\"button-zoom-out\"\n                >\n                  <ZoomOut className=\"h-4 w-4\" />\n                </Button>\n                <span className=\"text-sm w-16 text-center\">{Math.round(zoom * 100)}%</span>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => setZoom(Math.min(2, zoom + 0.25))}\n                  data-testid=\"button-zoom-in\"\n                >\n                  <ZoomIn className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={() => setZoom(1)}\n                  data-testid=\"button-reset-zoom\"\n                >\n                  <RotateCw className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              <div className=\"relative overflow-auto bg-muted/30 min-h-[400px] flex items-center justify-center p-4\">\n                <div\n                  className=\"relative\"\n                  style={{ transform: `scale(${zoom})`, transformOrigin: \"center\" }}\n                >\n                  {verification.documentUrl ? (\n                    <img\n                      src={verification.documentUrl}\n                      alt=\"Document\"\n                      className=\"max-w-full rounded-lg shadow-lg\"\n                      data-testid=\"img-document\"\n                    />\n                  ) : (\n                    <div className=\"w-[400px] h-[300px] bg-muted rounded-lg flex items-center justify-center\">\n                      <p className=\"text-muted-foreground\">Document preview unavailable</p>\n                    </div>\n                  )}\n                  \n                  {showBoundingBoxes && verification.ocrFields?.map((field, index) => (\n                    field.boundingBox && (\n                      <div\n                        key={index}\n                        className=\"absolute border-2 border-primary/80 bg-primary/10 rounded\"\n                        style={{\n                          left: `${field.boundingBox.x}%`,\n                          top: `${field.boundingBox.y}%`,\n                          width: `${field.boundingBox.width}%`,\n                          height: `${field.boundingBox.height}%`,\n                        }}\n                        title={`${field.fieldName}: ${field.value}`}\n                      />\n                    )\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <GenAIAssistant verificationId={verification.id} />\n        </div>\n\n        <div className=\"lg:col-span-4 space-y-6\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <h3 className=\"font-semibold mb-4\">Risk Assessment</h3>\n              <RiskScoreGauge score={verification.riskScore} level={verification.riskLevel} />\n              \n              {verification.riskInsights && verification.riskInsights.length > 0 && (\n                <Accordion type=\"single\" collapsible className=\"mt-6\">\n                  <AccordionItem value=\"insights\" className=\"border-0\">\n                    <AccordionTrigger className=\"text-sm font-medium py-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <Info className=\"h-4 w-4\" />\n                        AI Insights ({verification.riskInsights.length})\n                      </div>\n                    </AccordionTrigger>\n                    <AccordionContent>\n                      <div className=\"space-y-3\">\n                        {verification.riskInsights.map((insight, index) => (\n                          <div key={index} className=\"p-3 rounded-lg bg-muted/50\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {insight.category}\n                              </Badge>\n                              <Badge \n                                variant=\"outline\" \n                                className={`text-xs ${\n                                  insight.severity === \"low\" \n                                    ? \"text-green-600 dark:text-green-400\" \n                                    : insight.severity === \"medium\"\n                                    ? \"text-yellow-600 dark:text-yellow-400\"\n                                    : \"text-red-600 dark:text-red-400\"\n                                }`}\n                              >\n                                {insight.severity}\n                              </Badge>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground\">{insight.description}</p>\n                          </div>\n                        ))}\n                      </div>\n                    </AccordionContent>\n                  </AccordionItem>\n                </Accordion>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-0\">\n              <Tabs defaultValue=\"ocr\" className=\"w-full\">\n                <TabsList className=\"w-full rounded-none border-b h-auto p-0 bg-transparent\">\n                  <TabsTrigger \n                    value=\"ocr\" \n                    className=\"flex-1 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent py-3\"\n                    data-testid=\"tab-ocr\"\n                  >\n                    OCR Extraction\n                  </TabsTrigger>\n                  <TabsTrigger \n                    value=\"validation\" \n                    className=\"flex-1 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent py-3\"\n                    data-testid=\"tab-validation\"\n                  >\n                    Validation\n                  </TabsTrigger>\n                </TabsList>\n                \n                <TabsContent value=\"ocr\" className=\"p-6 space-y-4 mt-0\">\n                  {verification.ocrFields?.length ? (\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                      {verification.ocrFields.map((field, index) => (\n                        <OcrFieldDisplay key={index} field={field} />\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground text-center py-4\">\n                      No OCR data available\n                    </p>\n                  )}\n                </TabsContent>\n                \n                <TabsContent value=\"validation\" className=\"p-6 mt-0\">\n                  {verification.validationResults?.length ? (\n                    <div>\n                      <div className=\"grid grid-cols-3 gap-4 pb-2 border-b border-border text-sm font-medium text-muted-foreground\">\n                        <span>Field</span>\n                        <span>Submitted</span>\n                        <span>Extracted</span>\n                      </div>\n                      {verification.validationResults.map((result, index) => (\n                        <ValidationRow key={index} result={result} />\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground text-center py-4\">\n                      No validation data available\n                    </p>\n                  )}\n                </TabsContent>\n              </Tabs>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":17939,"size_tokens":null},"client/src/components/diagrams/AIArchitectureDiagrams.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { \n  Brain, \n  Database, \n  Search, \n  FileCheck, \n  Shield, \n  Workflow,\n  MessageSquare,\n  Eye,\n  Layers,\n  ArrowRight,\n  ArrowDown,\n  Zap,\n  Server,\n  Globe,\n  HardDrive,\n  Bot,\n  Sparkles,\n  CheckCircle,\n  AlertTriangle,\n  FileText,\n  Users\n} from \"lucide-react\";\n\nconst fadeInUp = {\n  hidden: { opacity: 0, y: 20 },\n  visible: { opacity: 1, y: 0 }\n};\n\nconst staggerContainer = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: { staggerChildren: 0.1 }\n  }\n};\n\nexport function SystemArchitectureDiagram() {\n  return (\n    <motion.div \n      className=\"p-6 rounded-xl bg-white border border-gray-200 shadow-sm\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainer}\n    >\n      <h3 className=\"text-xl font-bold mb-6 text-center flex items-center justify-center gap-2 text-gray-900\">\n        <Layers className=\"w-6 h-6 text-blue-500\" />\n        System Architecture\n      </h3>\n      \n      <div className=\"space-y-4\">\n        <motion.div \n          className=\"bg-gradient-to-r from-blue-600 to-blue-500 rounded-lg p-4 text-center shadow-lg text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <Globe className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">Client Browser</span>\n          </div>\n          <span className=\"text-blue-100 text-sm\">React SPA @ :5000</span>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-green-600 to-emerald-500 rounded-lg p-4 shadow-lg text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center justify-center gap-2 mb-3\">\n            <Server className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">Express Server (:5000)</span>\n          </div>\n          <div className=\"grid grid-cols-3 gap-2\">\n            <div className=\"bg-green-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">Vite Dev</div>\n              <div className=\"text-green-100 text-xs\">Server</div>\n            </div>\n            <div className=\"bg-green-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">Session</div>\n              <div className=\"text-green-100 text-xs\">Auth</div>\n            </div>\n            <div className=\"bg-green-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">API Proxy</div>\n              <div className=\"text-green-100 text-xs\">to Flask</div>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-purple-600 to-violet-500 rounded-lg p-4 shadow-lg text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center justify-center gap-2 mb-3\">\n            <Brain className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">Flask API Server (:5001)</span>\n          </div>\n          <div className=\"grid grid-cols-3 gap-2 mb-2\">\n            <div className=\"bg-purple-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">Verification</div>\n              <div className=\"text-purple-100 text-xs\">Service</div>\n            </div>\n            <div className=\"bg-purple-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">OpenAI</div>\n              <div className=\"text-purple-100 text-xs\">Integration</div>\n            </div>\n            <div className=\"bg-purple-700/50 rounded p-2 text-center text-sm\">\n              <div className=\"font-medium\">Risk</div>\n              <div className=\"text-purple-100 text-xs\">Engine</div>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-3 gap-2\">\n            <div className=\"bg-violet-700/50 rounded p-2 text-center text-sm\">\n              <Sparkles className=\"w-4 h-4 mx-auto mb-1\" />\n              <div className=\"font-medium\">RAG Service</div>\n              <div className=\"text-violet-100 text-xs\">LangChain</div>\n            </div>\n            <div className=\"bg-violet-700/50 rounded p-2 text-center text-sm\">\n              <Workflow className=\"w-4 h-4 mx-auto mb-1\" />\n              <div className=\"font-medium\">LangGraph</div>\n              <div className=\"text-violet-100 text-xs\">Workflow</div>\n            </div>\n            <div className=\"bg-violet-700/50 rounded p-2 text-center text-sm\">\n              <MessageSquare className=\"w-4 h-4 mx-auto mb-1\" />\n              <div className=\"font-medium\">Chat</div>\n              <div className=\"text-violet-100 text-xs\">Service</div>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div className=\"grid grid-cols-2 gap-4\" variants={fadeInUp}>\n          <div className=\"bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg p-4 shadow-lg text-white\">\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <Database className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">PostgreSQL</span>\n            </div>\n            <div className=\"space-y-1 text-sm text-amber-50\">\n              <div className=\"bg-amber-600/50 rounded px-2 py-1 text-center\">verifications</div>\n              <div className=\"bg-amber-600/50 rounded px-2 py-1 text-center\">chat_messages</div>\n              <div className=\"bg-amber-600/50 rounded px-2 py-1 text-center\">audit_logs</div>\n            </div>\n          </div>\n          <div className=\"bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg p-4 shadow-lg text-white\">\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <HardDrive className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">ChromaDB</span>\n            </div>\n            <div className=\"space-y-1 text-sm text-pink-50\">\n              <div className=\"bg-pink-600/50 rounded px-2 py-1 text-center\">Document Vectors</div>\n              <div className=\"bg-pink-600/50 rounded px-2 py-1 text-center\">Pattern Vectors</div>\n              <div className=\"bg-pink-600/50 rounded px-2 py-1 text-center\">Embeddings</div>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport function LangGraphWorkflowDiagram() {\n  const nodes = [\n    { id: 1, name: \"OCR Analysis\", icon: Eye, color: \"from-cyan-500 to-blue-500\", desc: \"Check field quality\" },\n    { id: 2, name: \"Fraud Detection\", icon: Shield, color: \"from-red-500 to-pink-500\", desc: \"Pattern matching\" },\n    { id: 3, name: \"Similar Docs\", icon: Search, color: \"from-purple-500 to-indigo-500\", desc: \"Vector search\" },\n    { id: 4, name: \"Compliance\", icon: FileCheck, color: \"from-green-500 to-emerald-500\", desc: \"Validate rules\" },\n    { id: 5, name: \"Recommendation\", icon: CheckCircle, color: \"from-amber-500 to-orange-500\", desc: \"Final decision\" },\n  ];\n\n  return (\n    <motion.div \n      className=\"p-6 rounded-xl bg-white border border-gray-200 shadow-sm\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainer}\n    >\n      <h3 className=\"text-xl font-bold mb-6 text-center flex items-center justify-center gap-2 text-gray-900\">\n        <Workflow className=\"w-6 h-6 text-purple-500\" />\n        LangGraph Verification Workflow\n      </h3>\n\n      <div className=\"flex flex-col items-center space-y-3\">\n        {nodes.map((node, index) => (\n          <motion.div key={node.id} variants={fadeInUp} className=\"w-full max-w-xs\">\n            <div className={`bg-gradient-to-r ${node.color} rounded-lg p-4 shadow-lg text-white`}>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"bg-white/20 rounded-full p-2\">\n                  <node.icon className=\"w-5 h-5\" />\n                </div>\n                <div>\n                  <div className=\"font-semibold\">{node.name}</div>\n                  <div className=\"text-sm opacity-90\">{node.desc}</div>\n                </div>\n              </div>\n            </div>\n            {index < nodes.length - 1 && (\n              <div className=\"flex justify-center py-2\">\n                <ArrowDown className=\"w-5 h-5 text-gray-400\" />\n              </div>\n            )}\n          </motion.div>\n        ))}\n      </div>\n\n      <motion.div \n        className=\"mt-6 bg-gray-100 rounded-lg p-4 border border-gray-200\"\n        variants={fadeInUp}\n      >\n        <div className=\"text-center text-sm text-gray-700\">\n          <div className=\"font-semibold mb-2 text-gray-900\">Verification State (Accumulated)</div>\n          <div className=\"grid grid-cols-2 gap-2 text-xs\">\n            <div className=\"bg-white rounded p-2 border border-gray-200 text-gray-700\">verification_id</div>\n            <div className=\"bg-white rounded p-2 border border-gray-200 text-gray-700\">fraud_indicators[]</div>\n            <div className=\"bg-white rounded p-2 border border-gray-200 text-gray-700\">similar_documents[]</div>\n            <div className=\"bg-white rounded p-2 border border-gray-200 text-gray-700\">final_recommendation</div>\n          </div>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n\nexport function RAGPipelineDiagram() {\n  return (\n    <motion.div \n      className=\"p-6 rounded-xl bg-white border border-gray-200 shadow-sm\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainer}\n    >\n      <h3 className=\"text-xl font-bold mb-6 text-center flex items-center justify-center gap-2 text-gray-900\">\n        <Sparkles className=\"w-6 h-6 text-yellow-500\" />\n        RAG Pipeline (Retrieval Augmented Generation)\n      </h3>\n\n      <div className=\"space-y-4\">\n        <motion.div \n          className=\"bg-gradient-to-r from-blue-600 to-cyan-500 rounded-lg p-4 text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Users className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">User Query</span>\n          </div>\n          <div className=\"bg-blue-700/50 rounded p-2 text-sm italic\">\n            \"What are the risk factors for this document?\"\n          </div>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-purple-600 to-pink-500 rounded-lg p-4 text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center gap-2 mb-3\">\n            <Search className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">1. Retrieval Phase</span>\n          </div>\n          <div className=\"space-y-2 text-sm\">\n            <div className=\"flex items-center gap-2 bg-purple-700/50 rounded p-2\">\n              <Zap className=\"w-4 h-4 text-yellow-300\" />\n              <span>Embed query with text-embedding-3-small</span>\n            </div>\n            <div className=\"flex items-center gap-2 bg-purple-700/50 rounded p-2\">\n              <Database className=\"w-4 h-4 text-pink-200\" />\n              <span>Search ChromaDB for similar verifications</span>\n            </div>\n            <div className=\"flex items-center gap-2 bg-purple-700/50 rounded p-2\">\n              <Shield className=\"w-4 h-4 text-red-300\" />\n              <span>Find matching fraud patterns</span>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-green-600 to-emerald-500 rounded-lg p-4 text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center gap-2 mb-3\">\n            <Layers className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">2. Augmentation Phase</span>\n          </div>\n          <div className=\"bg-green-700/50 rounded p-3 text-sm space-y-1\">\n            <div className=\"text-green-100\">Context = Current Document +</div>\n            <div className=\"pl-4\">+ Similar Past Verifications</div>\n            <div className=\"pl-4\">+ Matching Fraud Patterns</div>\n            <div className=\"pl-4\">+ Chat History</div>\n          </div>\n        </motion.div>\n\n        <motion.div className=\"flex justify-center\" variants={fadeInUp}>\n          <ArrowDown className=\"w-6 h-6 text-gray-400\" />\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg p-4 text-white\"\n          variants={fadeInUp}\n        >\n          <div className=\"flex items-center gap-2 mb-3\">\n            <Bot className=\"w-5 h-5\" />\n            <span className=\"font-semibold\">3. Generation Phase</span>\n          </div>\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Brain className=\"w-4 h-4\" />\n            <span className=\"text-sm\">GPT-4o generates informed response</span>\n          </div>\n          <div className=\"bg-amber-600/50 rounded p-2 text-sm italic\">\n            \"Based on the analysis and 2 similar past cases, the main risk factors are: 1) Low OCR confidence on DOB field (72%)...\"\n          </div>\n        </motion.div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport function LangChainComponentsDiagram() {\n  const components = [\n    { name: \"ChatOpenAI\", desc: \"GPT-4o LLM\", icon: Brain, color: \"from-blue-500 to-indigo-500\" },\n    { name: \"OpenAIEmbeddings\", desc: \"text-embedding-3-small\", icon: Zap, color: \"from-purple-500 to-pink-500\" },\n    { name: \"ChromaDB\", desc: \"Vector Store\", icon: Database, color: \"from-green-500 to-emerald-500\" },\n    { name: \"RAG Chain\", desc: \"Query  Retrieve  Generate\", icon: Sparkles, color: \"from-amber-500 to-orange-500\" },\n  ];\n\n  return (\n    <motion.div \n      className=\"p-6 rounded-xl bg-white border border-gray-200 shadow-sm\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainer}\n    >\n      <h3 className=\"text-xl font-bold mb-6 text-center flex items-center justify-center gap-2 text-gray-900\">\n        <Brain className=\"w-6 h-6 text-blue-500\" />\n        LangChain Components\n      </h3>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        {components.map((comp) => (\n          <motion.div\n            key={comp.name}\n            className={`bg-gradient-to-r ${comp.color} rounded-lg p-4 shadow-lg text-white`}\n            variants={fadeInUp}\n            whileHover={{ scale: 1.02 }}\n            transition={{ type: \"spring\", stiffness: 300 }}\n          >\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"bg-white/20 rounded-full p-2\">\n                <comp.icon className=\"w-5 h-5\" />\n              </div>\n              <span className=\"font-semibold\">{comp.name}</span>\n            </div>\n            <div className=\"text-sm opacity-90 pl-11\">{comp.desc}</div>\n          </motion.div>\n        ))}\n      </div>\n\n      <motion.div \n        className=\"mt-6 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-lg p-4 text-white\"\n        variants={fadeInUp}\n      >\n        <div className=\"text-center\">\n          <div className=\"font-semibold mb-2\">Capabilities</div>\n          <div className=\"flex flex-wrap justify-center gap-2\">\n            {[\"RAG Chat\", \"Semantic Search\", \"Fraud Matching\", \"Workflow Analysis\"].map((cap) => (\n              <span key={cap} className=\"bg-white/20 rounded-full px-3 py-1 text-sm\">\n                {cap}\n              </span>\n            ))}\n          </div>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n\nexport function DataFlowDiagram() {\n  const steps = [\n    { step: 1, title: \"Upload\", desc: \"Document uploaded\", icon: FileText, color: \"bg-blue-500\" },\n    { step: 2, title: \"OCR\", desc: \"Vision API extraction\", icon: Eye, color: \"bg-purple-500\" },\n    { step: 3, title: \"Risk Score\", desc: \"Calculate risk level\", icon: AlertTriangle, color: \"bg-amber-500\" },\n    { step: 4, title: \"Embed\", desc: \"Store in ChromaDB\", icon: Database, color: \"bg-pink-500\" },\n    { step: 5, title: \"Workflow\", desc: \"LangGraph analysis\", icon: Workflow, color: \"bg-green-500\" },\n    { step: 6, title: \"Store\", desc: \"Save to PostgreSQL\", icon: HardDrive, color: \"bg-orange-500\" },\n  ];\n\n  return (\n    <motion.div \n      className=\"p-6 rounded-xl bg-white border border-gray-200 shadow-sm\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainer}\n    >\n      <h3 className=\"text-xl font-bold mb-6 text-center flex items-center justify-center gap-2 text-gray-900\">\n        <Zap className=\"w-6 h-6 text-yellow-500\" />\n        Document Processing Flow\n      </h3>\n\n      <div className=\"flex flex-wrap justify-center gap-2\">\n        {steps.map((step, index) => (\n          <motion.div key={step.step} variants={fadeInUp} className=\"flex items-center\">\n            <div className={`${step.color} rounded-lg p-3 text-center min-w-[100px] text-white shadow-md`}>\n              <step.icon className=\"w-6 h-6 mx-auto mb-1\" />\n              <div className=\"font-semibold text-sm\">{step.title}</div>\n              <div className=\"text-xs opacity-90\">{step.desc}</div>\n            </div>\n            {index < steps.length - 1 && (\n              <ArrowRight className=\"w-5 h-5 text-gray-400 mx-1 flex-shrink-0\" />\n            )}\n          </motion.div>\n        ))}\n      </div>\n\n      <motion.div \n        className=\"mt-6 grid grid-cols-2 gap-4\"\n        variants={fadeInUp}\n      >\n        <div className=\"bg-gray-100 rounded-lg p-4 text-center border border-gray-200\">\n          <div className=\"text-2xl font-bold text-blue-600\">GPT-4o</div>\n          <div className=\"text-sm text-gray-600\">LLM Model</div>\n        </div>\n        <div className=\"bg-gray-100 rounded-lg p-4 text-center border border-gray-200\">\n          <div className=\"text-2xl font-bold text-pink-600\">1536</div>\n          <div className=\"text-sm text-gray-600\">Embedding Dimensions</div>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n\nexport function AllDiagrams() {\n  return (\n    <div className=\"space-y-8 p-6\">\n      <SystemArchitectureDiagram />\n      <LangGraphWorkflowDiagram />\n      <RAGPipelineDiagram />\n      <LangChainComponentsDiagram />\n      <DataFlowDiagram />\n    </div>\n  );\n}\n","path":null,"size_bytes":18672,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/TopNavbar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Shield, Bell, User, LogOut, Brain, Code2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nconst navItems = [\n  { name: \"Dashboard\", path: \"/\" },\n  { name: \"AI Architecture\", path: \"/ai-architecture\", icon: Brain },\n  { name: \"Technical Details\", path: \"/technical-details\", icon: Code2 },\n  { name: \"Audit Trail\", path: \"/audit\" },\n  { name: \"Integrations\", path: \"/integrations\" },\n  { name: \"Patterns\", path: \"/patterns\" },\n  { name: \"Settings\", path: \"/settings\" },\n];\n\nexport function TopNavbar() {\n  const [location] = useLocation();\n  const { user, logout, isLoggingOut } = useAuth();\n\n  const initials = user?.username?.slice(0, 2).toUpperCase() || \"U\";\n\n  return (\n    <header className=\"sticky top-0 z-50 h-16 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"flex h-full items-center justify-between px-6 max-w-7xl mx-auto\">\n        <div className=\"flex items-center gap-8\">\n          <Link href=\"/\" data-testid=\"link-home\">\n            <div className=\"flex items-center gap-2 cursor-pointer\">\n              <div className=\"flex h-9 w-9 items-center justify-center rounded-lg bg-primary\">\n                <Shield className=\"h-5 w-5 text-primary-foreground\" />\n              </div>\n              <span className=\"text-xl font-semibold tracking-tight\">VerifAI</span>\n            </div>\n          </Link>\n\n          <nav className=\"hidden md:flex items-center gap-1\">\n            {navItems.map((item) => {\n              const isActive = location === item.path;\n              const Icon = (item as any).icon;\n              return (\n                <Link key={item.path} href={item.path}>\n                  <Button\n                    variant={isActive ? \"secondary\" : \"ghost\"}\n                    size=\"sm\"\n                    className={`px-4 ${isActive ? \"font-medium\" : \"\"} ${Icon ? \"gap-1.5\" : \"\"}`}\n                    data-testid={`nav-${item.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    {Icon && <Icon className=\"w-4 h-4\" />}\n                    {item.name}\n                  </Button>\n                </Link>\n              );\n            })}\n          </nav>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <Button variant=\"ghost\" size=\"icon\" className=\"relative\" data-testid=\"button-notifications\">\n            <Bell className=\"h-5 w-5\" />\n            <span className=\"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-destructive\" />\n          </Button>\n\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"rounded-full\" data-testid=\"button-user-menu\">\n                <Avatar className=\"h-8 w-8\">\n                  <AvatarFallback className=\"bg-primary/10 text-primary text-sm font-medium\">\n                    {initials}\n                  </AvatarFallback>\n                </Avatar>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <div className=\"px-2 py-1.5\">\n                <p className=\"text-sm font-medium\">{user?.username || \"User\"}</p>\n                <p className=\"text-xs text-muted-foreground\">Compliance Analyst</p>\n              </div>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem data-testid=\"menu-item-profile\">\n                <User className=\"mr-2 h-4 w-4\" />\n                Profile\n              </DropdownMenuItem>\n              <DropdownMenuItem data-testid=\"menu-item-settings\">\n                <Link href=\"/settings\" className=\"flex items-center w-full\">\n                  Settings\n                </Link>\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem \n                onClick={() => logout()}\n                disabled={isLoggingOut}\n                className=\"text-destructive focus:text-destructive\"\n                data-testid=\"button-logout\"\n              >\n                <LogOut className=\"mr-2 h-4 w-4\" />\n                {isLoggingOut ? \"Signing out...\" : \"Sign Out\"}\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n    </header>\n  );\n}\n","path":null,"size_bytes":4592,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/pages/Patterns.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { \n  Shield, \n  Eye, \n  Scan, \n  Type, \n  Layers, \n  Binary, \n  AlertTriangle,\n  ImageMinus,\n  FileCode,\n  ScanText,\n  ShieldOff,\n  CalendarX,\n  LucideIcon\n} from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport type { FraudPattern } from \"@shared/schema\";\n\nconst patternIconMap: Record<string, { icon: LucideIcon; color: string; bgColor: string }> = {\n  \"Font Substitution\": { \n    icon: Type, \n    color: \"text-blue-600\", \n    bgColor: \"from-blue-500 to-indigo-500\" \n  },\n  \"Photo Manipulation\": { \n    icon: ImageMinus, \n    color: \"text-purple-600\", \n    bgColor: \"from-purple-500 to-pink-500\" \n  },\n  \"Metadata Tampering\": { \n    icon: FileCode, \n    color: \"text-amber-600\", \n    bgColor: \"from-amber-500 to-orange-500\" \n  },\n  \"MRZ Inconsistency\": { \n    icon: ScanText, \n    color: \"text-cyan-600\", \n    bgColor: \"from-cyan-500 to-blue-500\" \n  },\n  \"Security Feature Absence\": { \n    icon: ShieldOff, \n    color: \"text-red-600\", \n    bgColor: \"from-red-500 to-rose-500\" \n  },\n  \"Date Format Anomaly\": { \n    icon: CalendarX, \n    color: \"text-green-600\", \n    bgColor: \"from-green-500 to-emerald-500\" \n  },\n};\n\nfunction getPatternIcon(patternName: string): { icon: LucideIcon; color: string; bgColor: string } {\n  return patternIconMap[patternName] || { \n    icon: AlertTriangle, \n    color: \"text-gray-600\", \n    bgColor: \"from-gray-500 to-slate-500\" \n  };\n}\n\nconst patternCategories = [\n  { id: \"all\", label: \"All Patterns\" },\n  { id: \"document\", label: \"Document Analysis\" },\n  { id: \"font\", label: \"Font Detection\" },\n  { id: \"metadata\", label: \"Metadata\" },\n];\n\nconst detectionTechniques = [\n  {\n    icon: Type,\n    title: \"Font Analysis\",\n    description: \"Detects inconsistent fonts, unusual character spacing, or font substitutions that indicate document tampering.\",\n    examples: [\"Mismatched font weights\", \"Inconsistent kerning\", \"Non-standard character sets\"],\n  },\n  {\n    icon: Binary,\n    title: \"Metadata Inspection\",\n    description: \"Examines file metadata for signs of editing software, modification dates, and creation timestamps.\",\n    examples: [\"Adobe Photoshop signatures\", \"Edit history traces\", \"GPS location mismatches\"],\n  },\n  {\n    icon: Layers,\n    title: \"Layout Validation\",\n    description: \"Analyzes document structure, alignment, and spacing to identify irregularities.\",\n    examples: [\"Uneven margins\", \"Misaligned security features\", \"Incorrect template structure\"],\n  },\n  {\n    icon: Scan,\n    title: \"Image Forensics\",\n    description: \"Uses advanced image analysis to detect splicing, cloning, and digital alterations.\",\n    examples: [\"Copy-move detection\", \"ELA analysis\", \"Noise pattern analysis\"],\n  },\n];\n\nfunction PatternCard({ pattern }: { pattern: FraudPattern }) {\n  const { icon: PatternIcon, bgColor } = getPatternIcon(pattern.name);\n  \n  return (\n    <Card className=\"hover-elevate overflow-hidden\">\n      <CardContent className=\"p-0\">\n        <div className={`aspect-video bg-gradient-to-br ${bgColor} flex items-center justify-center relative`}>\n          <div className=\"bg-white/20 rounded-full p-6\">\n            <PatternIcon className=\"h-12 w-12 text-white\" />\n          </div>\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent\" />\n          <Badge className=\"absolute bottom-3 left-3 bg-white text-gray-900 hover:bg-white\">\n            {pattern.confidenceScore}% Detection Rate\n          </Badge>\n        </div>\n        <div className=\"p-6\">\n          <h3 className=\"font-semibold text-lg mb-2\">{pattern.name}</h3>\n          <p className=\"text-sm text-muted-foreground mb-4\">{pattern.description}</p>\n          <div className=\"pt-4 border-t border-border\">\n            <span className=\"text-xs font-medium text-muted-foreground\">Detection Method</span>\n            <p className=\"text-sm mt-1\">{pattern.technique}</p>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction TechniqueCard({ technique }: { technique: typeof detectionTechniques[0] }) {\n  const Icon = technique.icon;\n  \n  return (\n    <Card className=\"hover-elevate\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center shrink-0\">\n            <Icon className=\"h-6 w-6 text-primary\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-2\">{technique.title}</h3>\n            <p className=\"text-sm text-muted-foreground mb-4\">{technique.description}</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {technique.examples.map((example, index) => (\n                <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                  {example}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Patterns() {\n  const { data: patterns, isLoading } = useQuery<FraudPattern[]>({\n    queryKey: [\"/api/patterns\"],\n  });\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-semibold tracking-tight\">Fraud Detection Patterns</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Learn about our AI-powered fraud detection capabilities\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Shield className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">Detection Techniques</CardTitle>\n              <p className=\"text-sm text-muted-foreground\">\n                How VerifAI identifies fraudulent documents\n              </p>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {detectionTechniques.map((technique, index) => (\n              <TechniqueCard key={index} technique={technique} />\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-lg bg-destructive/10 flex items-center justify-center\">\n                <AlertTriangle className=\"h-5 w-5 text-destructive\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-lg font-semibold\">Known Fraud Patterns</CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                  Common document fraud techniques our AI detects\n                </p>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"all\" className=\"w-full\">\n            <TabsList className=\"mb-6\">\n              {patternCategories.map((category) => (\n                <TabsTrigger key={category.id} value={category.id}>\n                  {category.label}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n\n            <TabsContent value=\"all\" className=\"mt-0\">\n              {isLoading ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {[1, 2, 3, 4, 5, 6].map((i) => (\n                    <Skeleton key={i} className=\"h-80\" />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {patterns?.map((pattern) => (\n                    <PatternCard key={pattern.id} pattern={pattern} />\n                  ))}\n                  {(!patterns || patterns.length === 0) && (\n                    <div className=\"col-span-full text-center py-12\">\n                      <Eye className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\n                      <p className=\"text-muted-foreground\">Pattern library loading...</p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </TabsContent>\n\n            {[\"document\", \"font\", \"metadata\"].map((category) => (\n              <TabsContent key={category} value={category} className=\"mt-0\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {patterns?.filter(p => p.technique.toLowerCase().includes(category))\n                    .map((pattern) => (\n                      <PatternCard key={pattern.id} pattern={pattern} />\n                    ))}\n                </div>\n              </TabsContent>\n            ))}\n          </Tabs>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n            <div>\n              <h3 className=\"font-semibold\">Continuous Learning</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Our AI models are continuously updated to detect new fraud patterns.\n              </p>\n            </div>\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <span className=\"h-2 w-2 rounded-full bg-green-500\" />\n              Last updated: {new Date().toLocaleDateString()}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":9835,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/pages/Dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { \n  FileCheck, \n  TrendingUp, \n  Clock, \n  AlertTriangle, \n  Plus,\n  ArrowUpRight,\n  ArrowDownRight\n} from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\nimport type { DashboardStats, Verification } from \"@shared/schema\";\n\nfunction MetricCard({\n  title,\n  value,\n  icon: Icon,\n  trend,\n  trendDirection,\n  loading,\n}: {\n  title: string;\n  value: string | number;\n  icon: typeof FileCheck;\n  trend?: string;\n  trendDirection?: \"up\" | \"down\";\n  loading?: boolean;\n}) {\n  return (\n    <Card className=\"hover-elevate\">\n      <CardContent className=\"p-6\">\n        {loading ? (\n          <div className=\"space-y-3\">\n            <Skeleton className=\"h-8 w-8 rounded-lg\" />\n            <Skeleton className=\"h-10 w-20\" />\n            <Skeleton className=\"h-4 w-24\" />\n          </div>\n        ) : (\n          <>\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n                <Icon className=\"h-5 w-5 text-primary\" />\n              </div>\n              {trend && (\n                <div className={`flex items-center gap-1 text-xs font-medium ${\n                  trendDirection === \"up\" ? \"text-green-600 dark:text-green-400\" : \"text-red-600 dark:text-red-400\"\n                }`}>\n                  {trendDirection === \"up\" ? (\n                    <ArrowUpRight className=\"h-3 w-3\" />\n                  ) : (\n                    <ArrowDownRight className=\"h-3 w-3\" />\n                  )}\n                  {trend}\n                </div>\n              )}\n            </div>\n            <div className=\"text-4xl font-bold tracking-tight\">{value}</div>\n            <p className=\"text-sm text-muted-foreground mt-1\">{title}</p>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction StatusBadge({ status }: { status: Verification[\"status\"] }) {\n  const variants: Record<Verification[\"status\"], { label: string; className: string }> = {\n    approved: { label: \"Approved\", className: \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\" },\n    rejected: { label: \"Rejected\", className: \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\" },\n    pending: { label: \"Pending\", className: \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400\" },\n    in_review: { label: \"In Review\", className: \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400\" },\n  };\n  const { label, className } = variants[status];\n  return (\n    <Badge variant=\"outline\" className={`${className} border-0 font-medium`}>\n      {label}\n    </Badge>\n  );\n}\n\nfunction DocumentTypeBadge({ type }: { type: Verification[\"documentType\"] }) {\n  const labels: Record<Verification[\"documentType\"], string> = {\n    passport: \"Passport\",\n    drivers_license: \"Driver's License\",\n    national_id: \"National ID\",\n  };\n  return (\n    <span className=\"text-sm text-muted-foreground\">{labels[type]}</span>\n  );\n}\n\nexport default function Dashboard() {\n  const { data: stats, isLoading } = useQuery<DashboardStats>({\n    queryKey: [\"/api/dashboard\"],\n  });\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-8\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-semibold tracking-tight\">Dashboard</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Real-time overview of KYC verification operations\n          </p>\n        </div>\n        <Link href=\"/upload\">\n          <Button size=\"default\" data-testid=\"button-new-verification\">\n            <Plus className=\"h-4 w-4 mr-2\" />\n            New Verification\n          </Button>\n        </Link>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <MetricCard\n          title=\"Total Verifications\"\n          value={stats?.totalVerifications ?? 0}\n          icon={FileCheck}\n          loading={isLoading}\n        />\n        <MetricCard\n          title=\"Auto-Approval Rate\"\n          value={`${stats?.autoApprovalRate ?? 0}%`}\n          icon={TrendingUp}\n          loading={isLoading}\n        />\n        <MetricCard\n          title=\"Pending Review\"\n          value={stats?.pendingReview ?? 0}\n          icon={Clock}\n          loading={isLoading}\n        />\n        <MetricCard\n          title=\"High Risk Flags\"\n          value={stats?.highRiskFlags ?? 0}\n          icon={AlertTriangle}\n          loading={isLoading}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <Card className=\"lg:col-span-2\">\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n            <CardTitle className=\"text-xl font-semibold\">Verification Volume</CardTitle>\n            <div className=\"flex gap-2\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">7D</Button>\n              <Button variant=\"secondary\" size=\"sm\" className=\"text-xs\">30D</Button>\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">90D</Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            {isLoading ? (\n              <Skeleton className=\"h-80 w-full\" />\n            ) : (\n              <div className=\"h-80\" data-testid=\"chart-volume\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <AreaChart data={stats?.volumeData ?? []}>\n                    <defs>\n                      <linearGradient id=\"colorCount\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.3} />\n                        <stop offset=\"95%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0} />\n                      </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n                    <XAxis \n                      dataKey=\"date\" \n                      className=\"text-xs fill-muted-foreground\"\n                      tickLine={false}\n                      axisLine={false}\n                    />\n                    <YAxis \n                      className=\"text-xs fill-muted-foreground\"\n                      tickLine={false}\n                      axisLine={false}\n                    />\n                    <Tooltip \n                      contentStyle={{ \n                        backgroundColor: \"hsl(var(--card))\",\n                        border: \"1px solid hsl(var(--border))\",\n                        borderRadius: \"8px\",\n                      }}\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"count\"\n                      stroke=\"hsl(var(--primary))\"\n                      strokeWidth={2}\n                      fillOpacity={1}\n                      fill=\"url(#colorCount)\"\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-4\">\n            <CardTitle className=\"text-xl font-semibold\">Recent Verifications</CardTitle>\n            <Link href=\"/verifications\">\n              <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\" data-testid=\"link-view-all\">\n                View All\n              </Button>\n            </Link>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            {isLoading ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3, 4, 5].map((i) => (\n                  <div key={i} className=\"flex items-center justify-between py-3 border-b border-border last:border-0\">\n                    <div className=\"space-y-2\">\n                      <Skeleton className=\"h-4 w-32\" />\n                      <Skeleton className=\"h-3 w-24\" />\n                    </div>\n                    <Skeleton className=\"h-6 w-16 rounded-full\" />\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"divide-y divide-border\">\n                {stats?.recentVerifications?.slice(0, 5).map((verification) => (\n                  <Link\n                    key={verification.id}\n                    href={`/verification/${verification.id}`}\n                  >\n                    <div \n                      className=\"flex items-center justify-between py-3 cursor-pointer hover-elevate rounded-md -mx-2 px-2\"\n                      data-testid={`verification-item-${verification.id}`}\n                    >\n                      <div className=\"min-w-0\">\n                        <p className=\"font-medium truncate\">\n                          {verification.customerName || `Document ${verification.id.slice(0, 8)}`}\n                        </p>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <DocumentTypeBadge type={verification.documentType} />\n                          <span className=\"text-xs text-muted-foreground\">\n                            {new Date(verification.submittedAt).toLocaleDateString()}\n                          </span>\n                        </div>\n                      </div>\n                      <StatusBadge status={verification.status} />\n                    </div>\n                  </Link>\n                ))}\n                {(!stats?.recentVerifications || stats.recentVerifications.length === 0) && (\n                  <div className=\"py-8 text-center text-muted-foreground\">\n                    <FileCheck className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                    <p>No verifications yet</p>\n                    <Link href=\"/upload\">\n                      <Button variant=\"ghost\" className=\"mt-2 underline\" data-testid=\"link-start-first\">\n                        Start your first verification\n                      </Button>\n                    </Link>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":10524,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/pages/AuditTrail.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  ClipboardList, \n  Download, \n  Filter, \n  Search, \n  FileCheck,\n  FileX,\n  Upload,\n  Settings,\n  User,\n  Calendar,\n  ChevronLeft,\n  ChevronRight,\n  Loader2\n} from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { format, parseISO } from \"date-fns\";\n\ninterface AuditLog {\n  id: string;\n  action: string;\n  entityType: string;\n  entityId: string | null;\n  userId: string;\n  userName: string;\n  details: Record<string, unknown> | null;\n  ipAddress: string | null;\n  timestamp: string;\n}\n\ninterface AuditLogsResponse {\n  logs: AuditLog[];\n  total: number;\n  limit: number;\n  offset: number;\n}\n\ninterface AuditStats {\n  totalLogs: number;\n  actionBreakdown: { action: string; count: number }[];\n  dailyActivity: { date: string; count: number }[];\n}\n\nconst actionLabels: Record<string, { label: string; icon: typeof FileCheck; color: string }> = {\n  document_uploaded: { label: \"Document Uploaded\", icon: Upload, color: \"bg-blue-500/10 text-blue-600\" },\n  verification_approved: { label: \"Approved\", icon: FileCheck, color: \"bg-green-500/10 text-green-600\" },\n  verification_rejected: { label: \"Rejected\", icon: FileX, color: \"bg-red-500/10 text-red-600\" },\n  verification_status_changed: { label: \"Status Changed\", icon: ClipboardList, color: \"bg-amber-500/10 text-amber-600\" },\n  settings_updated: { label: \"Settings Updated\", icon: Settings, color: \"bg-purple-500/10 text-purple-600\" },\n};\n\nexport default function AuditTrailPage() {\n  const [actionFilter, setActionFilter] = useState<string>(\"all\");\n  const [entityTypeFilter, setEntityTypeFilter] = useState<string>(\"all\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [page, setPage] = useState(0);\n  const limit = 20;\n\n  const buildQueryKey = () => {\n    const params = new URLSearchParams();\n    if (actionFilter && actionFilter !== \"all\") params.set(\"action\", actionFilter);\n    if (entityTypeFilter && entityTypeFilter !== \"all\") params.set(\"entityType\", entityTypeFilter);\n    params.set(\"limit\", limit.toString());\n    params.set(\"offset\", (page * limit).toString());\n    return `/api/audit-logs?${params.toString()}`;\n  };\n\n  const { data: logsData, isLoading: logsLoading } = useQuery<AuditLogsResponse>({\n    queryKey: [buildQueryKey()],\n  });\n\n  const { data: stats, isLoading: statsLoading } = useQuery<AuditStats>({\n    queryKey: [\"/api/audit-logs/stats\"],\n  });\n\n  const handleExport = () => {\n    const params = new URLSearchParams();\n    if (actionFilter && actionFilter !== \"all\") params.set(\"action\", actionFilter);\n    if (entityTypeFilter && entityTypeFilter !== \"all\") params.set(\"entityType\", entityTypeFilter);\n    window.open(`/api/audit-logs/export?${params.toString()}`, \"_blank\");\n  };\n\n  const getActionDisplay = (action: string) => {\n    const display = actionLabels[action] || { label: action, icon: ClipboardList, color: \"bg-muted text-muted-foreground\" };\n    const IconComponent = display.icon;\n    return (\n      <div className=\"flex items-center gap-2\">\n        <div className={`p-1.5 rounded-md ${display.color}`}>\n          <IconComponent className=\"h-3.5 w-3.5\" />\n        </div>\n        <span className=\"font-medium\">{display.label}</span>\n      </div>\n    );\n  };\n\n  const formatDetails = (details: Record<string, unknown> | null): string => {\n    if (!details) return \"-\";\n    const relevantKeys = [\"customerName\", \"documentType\", \"oldStatus\", \"newStatus\", \"riskScore\"];\n    const parts: string[] = [];\n    for (const key of relevantKeys) {\n      if (details[key] !== undefined) {\n        parts.push(`${key}: ${details[key]}`);\n      }\n    }\n    return parts.length > 0 ? parts.join(\", \") : JSON.stringify(details).slice(0, 100);\n  };\n\n  const filteredLogs = logsData?.logs.filter(log => {\n    if (!searchQuery) return true;\n    const searchLower = searchQuery.toLowerCase();\n    return (\n      log.userName.toLowerCase().includes(searchLower) ||\n      log.entityId?.toLowerCase().includes(searchLower) ||\n      formatDetails(log.details).toLowerCase().includes(searchLower)\n    );\n  }) || [];\n\n  const totalPages = Math.ceil((logsData?.total || 0) / limit);\n\n  if (logsLoading && statsLoading) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-8\">\n        <Skeleton className=\"h-10 w-48\" />\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <Skeleton className=\"h-32\" />\n          <Skeleton className=\"h-32\" />\n          <Skeleton className=\"h-32\" />\n        </div>\n        <Skeleton className=\"h-96\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-6 py-8 space-y-8\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-semibold tracking-tight\">Audit Trail</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Track all verification activities and compliance events\n          </p>\n        </div>\n        <Button onClick={handleExport} variant=\"outline\" data-testid=\"button-export-logs\">\n          <Download className=\"h-4 w-4 mr-2\" />\n          Export CSV\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center\">\n                <ClipboardList className=\"h-6 w-6 text-primary\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold\" data-testid=\"text-total-logs\">\n                  {stats?.totalLogs || 0}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">Total Events</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-lg bg-green-500/10 flex items-center justify-center\">\n                <FileCheck className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold\" data-testid=\"text-approved-count\">\n                  {stats?.actionBreakdown.find(a => a.action === \"verification_approved\")?.count || 0}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">Approvals</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-12 w-12 rounded-lg bg-red-500/10 flex items-center justify-center\">\n                <FileX className=\"h-6 w-6 text-red-600\" />\n              </div>\n              <div>\n                <p className=\"text-2xl font-bold\" data-testid=\"text-rejected-count\">\n                  {stats?.actionBreakdown.find(a => a.action === \"verification_rejected\")?.count || 0}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">Rejections</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">Activity Log</CardTitle>\n              <CardDescription>\n                Detailed record of all system activities\n              </CardDescription>\n            </div>\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search logs...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-9 w-[200px]\"\n                  data-testid=\"input-search-logs\"\n                />\n              </div>\n              <Select value={actionFilter} onValueChange={(val) => { setActionFilter(val); setPage(0); }}>\n                <SelectTrigger className=\"w-[180px]\" data-testid=\"select-action-filter\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"Filter by action\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Actions</SelectItem>\n                  <SelectItem value=\"document_uploaded\">Document Uploaded</SelectItem>\n                  <SelectItem value=\"verification_approved\">Approved</SelectItem>\n                  <SelectItem value=\"verification_rejected\">Rejected</SelectItem>\n                  <SelectItem value=\"verification_status_changed\">Status Changed</SelectItem>\n                  <SelectItem value=\"settings_updated\">Settings Updated</SelectItem>\n                </SelectContent>\n              </Select>\n              <Select value={entityTypeFilter} onValueChange={(val) => { setEntityTypeFilter(val); setPage(0); }}>\n                <SelectTrigger className=\"w-[160px]\" data-testid=\"select-entity-filter\">\n                  <SelectValue placeholder=\"Entity type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Types</SelectItem>\n                  <SelectItem value=\"verification\">Verification</SelectItem>\n                  <SelectItem value=\"settings\">Settings</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {logsLoading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : filteredLogs.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <ClipboardList className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\n              <p className=\"text-lg font-medium\">No audit logs found</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Activity logs will appear here as users interact with the system\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className=\"rounded-lg border overflow-hidden\">\n                <Table>\n                  <TableHeader>\n                    <TableRow className=\"bg-muted/50\">\n                      <TableHead className=\"w-[180px]\">Timestamp</TableHead>\n                      <TableHead className=\"w-[200px]\">Action</TableHead>\n                      <TableHead className=\"w-[120px]\">Entity Type</TableHead>\n                      <TableHead>Details</TableHead>\n                      <TableHead className=\"w-[120px]\">User</TableHead>\n                      <TableHead className=\"w-[120px]\">IP Address</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredLogs.map((log) => (\n                      <TableRow key={log.id} data-testid={`row-audit-${log.id}`}>\n                        <TableCell className=\"font-mono text-sm\">\n                          <div className=\"flex items-center gap-2\">\n                            <Calendar className=\"h-3.5 w-3.5 text-muted-foreground\" />\n                            {log.timestamp ? format(parseISO(log.timestamp), \"MMM dd, HH:mm:ss\") : \"-\"}\n                          </div>\n                        </TableCell>\n                        <TableCell>{getActionDisplay(log.action)}</TableCell>\n                        <TableCell>\n                          <Badge variant=\"outline\" className=\"capitalize\">\n                            {log.entityType}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"max-w-[300px] truncate text-sm text-muted-foreground\">\n                          {formatDetails(log.details)}\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex items-center gap-2\">\n                            <User className=\"h-3.5 w-3.5 text-muted-foreground\" />\n                            <span className=\"text-sm\">{log.userName}</span>\n                          </div>\n                        </TableCell>\n                        <TableCell className=\"font-mono text-sm text-muted-foreground\">\n                          {log.ipAddress || \"-\"}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n\n              <div className=\"flex items-center justify-between mt-4\">\n                <p className=\"text-sm text-muted-foreground\">\n                  Showing {page * limit + 1} to {Math.min((page + 1) * limit, logsData?.total || 0)} of {logsData?.total || 0} entries\n                </p>\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setPage(p => Math.max(0, p - 1))}\n                    disabled={page === 0}\n                    data-testid=\"button-prev-page\"\n                  >\n                    <ChevronLeft className=\"h-4 w-4\" />\n                    Previous\n                  </Button>\n                  <span className=\"text-sm text-muted-foreground px-2\">\n                    Page {page + 1} of {totalPages || 1}\n                  </span>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setPage(p => p + 1)}\n                    disabled={page >= totalPages - 1}\n                    data-testid=\"button-next-page\"\n                  >\n                    Next\n                    <ChevronRight className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":14668,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/pages/Upload.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Upload, FileText, X, Loader2, CheckCircle } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Verification, DocumentType } from \"@shared/schema\";\n\nexport default function UploadPage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [file, setFile] = useState<File | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [processingStage, setProcessingStage] = useState<string>(\"\");\n\n  const uploadMutation = useMutation({\n    mutationFn: async (formData: FormData) => {\n      setProcessingStage(\"Uploading document...\");\n      setUploadProgress(20);\n      \n      const response = await fetch(\"/api/verifications\", {\n        method: \"POST\",\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Upload failed\");\n      }\n      \n      setProcessingStage(\"Analyzing document with AI...\");\n      setUploadProgress(60);\n      \n      const data = await response.json();\n      \n      setProcessingStage(\"Extracting data...\");\n      setUploadProgress(90);\n      \n      await new Promise(resolve => setTimeout(resolve, 500));\n      setUploadProgress(100);\n      setProcessingStage(\"Complete!\");\n      \n      return data as Verification;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/verifications\"] });\n      toast({\n        title: \"Document uploaded successfully\",\n        description: \"Redirecting to verification details...\",\n      });\n      setTimeout(() => {\n        setLocation(`/verification/${data.id}`);\n      }, 1000);\n    },\n    onError: (error: Error) => {\n      setUploadProgress(0);\n      setProcessingStage(\"\");\n      toast({\n        title: \"Upload failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDrag = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    const droppedFile = e.dataTransfer.files?.[0];\n    if (droppedFile && isValidFile(droppedFile)) {\n      setFile(droppedFile);\n    }\n  }, []);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile && isValidFile(selectedFile)) {\n      setFile(selectedFile);\n    }\n  };\n\n  const isValidFile = (file: File): boolean => {\n    const validTypes = [\"image/jpeg\", \"image/png\", \"application/pdf\"];\n    const maxSize = 10 * 1024 * 1024;\n    \n    if (!validTypes.includes(file.type)) {\n      toast({\n        title: \"Invalid file type\",\n        description: \"Please upload a JPG, PNG, or PDF file.\",\n        variant: \"destructive\",\n      });\n      return false;\n    }\n    \n    if (file.size > maxSize) {\n      toast({\n        title: \"File too large\",\n        description: \"Maximum file size is 10MB.\",\n        variant: \"destructive\",\n      });\n      return false;\n    }\n    \n    return true;\n  };\n\n  const handleUpload = () => {\n    if (!file) return;\n    \n    const formData = new FormData();\n    formData.append(\"document\", file);\n    uploadMutation.mutate(formData);\n  };\n\n  const removeFile = () => {\n    setFile(null);\n    setUploadProgress(0);\n    setProcessingStage(\"\");\n  };\n\n  const isProcessing = uploadMutation.isPending;\n\n  return (\n    <div className=\"max-w-3xl mx-auto px-6 py-8 space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-semibold tracking-tight\">New Verification</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Upload a document to begin the KYC verification process\n        </p>\n      </div>\n\n      <Card>\n        <CardContent className=\"p-8\">\n          {!file ? (\n            <div\n              className={`relative flex flex-col items-center justify-center min-h-64 rounded-xl border-2 border-dashed transition-colors ${\n                dragActive\n                  ? \"border-primary bg-primary/5\"\n                  : \"border-border hover:border-primary/50\"\n              }`}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n              data-testid=\"dropzone\"\n            >\n              <input\n                type=\"file\"\n                accept=\".jpg,.jpeg,.png,.pdf\"\n                onChange={handleFileChange}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                data-testid=\"input-file\"\n              />\n              <div className=\"flex flex-col items-center text-center p-8\">\n                <div className=\"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mb-6\">\n                  <Upload className=\"h-8 w-8 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold mb-2\">\n                  Drag and drop your document\n                </h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  or click to browse files\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  Supported formats: JPG, PNG, PDF (max 10MB)\n                </p>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center gap-4 p-4 rounded-lg bg-muted/50\">\n                <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center shrink-0\">\n                  <FileText className=\"h-6 w-6 text-primary\" />\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"font-medium truncate\">{file.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {(file.size / 1024 / 1024).toFixed(2)} MB\n                  </p>\n                </div>\n                {!isProcessing && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={removeFile}\n                    data-testid=\"button-remove-file\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n\n              {isProcessing && (\n                <div className=\"space-y-3\">\n                  <Progress value={uploadProgress} className=\"h-2\" data-testid=\"progress-upload\" />\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    {uploadProgress < 100 ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                    )}\n                    <span data-testid=\"text-processing-stage\">{processingStage}</span>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex gap-3\">\n                <Button\n                  variant=\"outline\"\n                  onClick={removeFile}\n                  disabled={isProcessing}\n                  className=\"flex-1\"\n                  data-testid=\"button-cancel\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  onClick={handleUpload}\n                  disabled={isProcessing}\n                  className=\"flex-1\"\n                  data-testid=\"button-upload\"\n                >\n                  {isProcessing ? (\n                    <>\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Processing...\n                    </>\n                  ) : (\n                    \"Start Verification\"\n                  )}\n                </Button>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <h3 className=\"font-semibold mb-4\">Supported Document Types</h3>\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n            {[\n              { name: \"Passport\", description: \"International travel document\" },\n              { name: \"Driver's License\", description: \"State-issued ID\" },\n              { name: \"National ID\", description: \"Government-issued ID card\" },\n            ].map((doc) => (\n              <div\n                key={doc.name}\n                className=\"p-4 rounded-lg border border-border hover-elevate\"\n              >\n                <p className=\"font-medium\">{doc.name}</p>\n                <p className=\"text-sm text-muted-foreground\">{doc.description}</p>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":9448,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"server/storage.ts":{"content":"import type { \n  Verification, \n  InsertVerification, \n  Settings, \n  Integration, \n  FraudPattern,\n  ChatMessage,\n  DashboardStats\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  getVerification(id: string): Promise<Verification | undefined>;\n  getVerifications(): Promise<Verification[]>;\n  createVerification(verification: InsertVerification): Promise<Verification>;\n  updateVerification(id: string, updates: Partial<Verification>): Promise<Verification | undefined>;\n  \n  getSettings(): Promise<Settings>;\n  updateSettings(settings: Settings): Promise<Settings>;\n  \n  getIntegrations(): Promise<Integration[]>;\n  \n  getPatterns(): Promise<FraudPattern[]>;\n  \n  getChatHistory(verificationId: string): Promise<ChatMessage[]>;\n  addChatMessage(verificationId: string, message: ChatMessage): Promise<ChatMessage>;\n  \n  getDashboardStats(): Promise<DashboardStats>;\n}\n\nexport class MemStorage implements IStorage {\n  private verifications: Map<string, Verification>;\n  private settings: Settings;\n  private integrations: Integration[];\n  private patterns: FraudPattern[];\n  private chatHistories: Map<string, ChatMessage[]>;\n\n  constructor() {\n    this.verifications = new Map();\n    this.chatHistories = new Map();\n    \n    this.settings = {\n      autoApproveThreshold: 30,\n      highRiskThreshold: 70,\n      emailNotifications: true,\n      inAppNotifications: true,\n      autoRejectHighRisk: false\n    };\n\n    this.integrations = [\n      {\n        id: \"dmv-1\",\n        name: \"DMV Integration\",\n        type: \"dmv\",\n        status: \"connected\",\n        lastSync: new Date().toISOString(),\n        description: \"Validates driver's license numbers against motor vehicle records\"\n      },\n      {\n        id: \"passport-1\",\n        name: \"Passport Authority\",\n        type: \"passport_authority\",\n        status: \"pending\",\n        description: \"Verifies passport numbers with the issuing government authority\"\n      },\n      {\n        id: \"ssa-1\",\n        name: \"SSA Integration\",\n        type: \"ssa\",\n        status: \"disconnected\",\n        description: \"Cross-references Social Security numbers for identity confirmation\"\n      }\n    ];\n\n    this.patterns = [\n      {\n        id: \"pattern-1\",\n        name: \"Font Substitution\",\n        description: \"Detects when document text uses fonts that don't match official templates\",\n        technique: \"Font Analysis\",\n        confidenceScore: 94\n      },\n      {\n        id: \"pattern-2\",\n        name: \"Photo Manipulation\",\n        description: \"Identifies edited or replaced photos using ELA analysis\",\n        technique: \"Image Forensics\",\n        confidenceScore: 91\n      },\n      {\n        id: \"pattern-3\",\n        name: \"Metadata Tampering\",\n        description: \"Detects signs of editing software in file metadata\",\n        technique: \"Metadata Inspection\",\n        confidenceScore: 88\n      },\n      {\n        id: \"pattern-4\",\n        name: \"MRZ Inconsistency\",\n        description: \"Identifies mismatches between MRZ data and visual text\",\n        technique: \"Document Analysis\",\n        confidenceScore: 96\n      },\n      {\n        id: \"pattern-5\",\n        name: \"Security Feature Absence\",\n        description: \"Detects missing or incorrectly placed security features\",\n        technique: \"Layout Validation\",\n        confidenceScore: 89\n      },\n      {\n        id: \"pattern-6\",\n        name: \"Date Format Anomaly\",\n        description: \"Identifies incorrect date formats for the document's issuing country\",\n        technique: \"Document Analysis\",\n        confidenceScore: 92\n      }\n    ];\n  }\n\n  async getVerification(id: string): Promise<Verification | undefined> {\n    return this.verifications.get(id);\n  }\n\n  async getVerifications(): Promise<Verification[]> {\n    return Array.from(this.verifications.values());\n  }\n\n  async createVerification(insertVerification: InsertVerification): Promise<Verification> {\n    const id = randomUUID();\n    const verification: Verification = {\n      ...insertVerification,\n      id,\n      riskScore: 0,\n      riskLevel: \"low\",\n      ocrFields: [],\n      riskInsights: [],\n      validationResults: [],\n      chatHistory: []\n    };\n    this.verifications.set(id, verification);\n    this.chatHistories.set(id, []);\n    return verification;\n  }\n\n  async updateVerification(id: string, updates: Partial<Verification>): Promise<Verification | undefined> {\n    const verification = this.verifications.get(id);\n    if (!verification) return undefined;\n    \n    const updated = { ...verification, ...updates };\n    this.verifications.set(id, updated);\n    return updated;\n  }\n\n  async getSettings(): Promise<Settings> {\n    return this.settings;\n  }\n\n  async updateSettings(settings: Settings): Promise<Settings> {\n    this.settings = settings;\n    return this.settings;\n  }\n\n  async getIntegrations(): Promise<Integration[]> {\n    return this.integrations;\n  }\n\n  async getPatterns(): Promise<FraudPattern[]> {\n    return this.patterns;\n  }\n\n  async getChatHistory(verificationId: string): Promise<ChatMessage[]> {\n    return this.chatHistories.get(verificationId) || [];\n  }\n\n  async addChatMessage(verificationId: string, message: ChatMessage): Promise<ChatMessage> {\n    const history = this.chatHistories.get(verificationId) || [];\n    history.push(message);\n    this.chatHistories.set(verificationId, history);\n    return message;\n  }\n\n  async getDashboardStats(): Promise<DashboardStats> {\n    const verifications = Array.from(this.verifications.values());\n    const total = verifications.length;\n    const approved = verifications.filter(v => v.status === \"approved\").length;\n    const pending = verifications.filter(v => v.status === \"pending\" || v.status === \"in_review\").length;\n    const highRisk = verifications.filter(v => v.riskLevel === \"high\").length;\n    \n    return {\n      totalVerifications: total,\n      autoApprovalRate: total > 0 ? Math.round((approved / total) * 100) : 0,\n      pendingReview: pending,\n      highRiskFlags: highRisk,\n      recentVerifications: verifications.slice(-10).reverse(),\n      volumeData: []\n    };\n  }\n}\n\nexport const storage = new MemStorage();\n","path":null,"size_bytes":6132,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"server/routes.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { type Server } from \"http\";\nimport multer from \"multer\";\n\nconst upload = multer({ \n  storage: multer.memoryStorage(),\n  limits: { fileSize: 10 * 1024 * 1024 }\n});\n\nconst uploadMultiple = multer({ \n  storage: multer.memoryStorage(),\n  limits: { fileSize: 10 * 1024 * 1024, files: 50 }\n});\n\nconst PYTHON_BACKEND_URL = process.env.PYTHON_BACKEND_URL || \"http://127.0.0.1:5001\";\nconst DEMO_USERNAME = \"analyst\";\nconst DEMO_PASSWORD = \"analyst\";\n\nasync function proxyToPython(req: Request, res: Response, options: {\n  method?: string;\n  body?: any;\n  formData?: FormData;\n} = {}) {\n  try {\n    const url = `${PYTHON_BACKEND_URL}${req.path}`;\n    const method = options.method || req.method;\n    \n    const fetchOptions: RequestInit = {\n      method,\n      headers: {} as Record<string, string>,\n    };\n    \n    if (options.formData) {\n      fetchOptions.body = options.formData;\n    } else if (options.body) {\n      (fetchOptions.headers as Record<string, string>)[\"Content-Type\"] = \"application/json\";\n      fetchOptions.body = JSON.stringify(options.body);\n    } else if (req.body && Object.keys(req.body).length > 0) {\n      (fetchOptions.headers as Record<string, string>)[\"Content-Type\"] = \"application/json\";\n      fetchOptions.body = JSON.stringify(req.body);\n    }\n    \n    const response = await fetch(url, fetchOptions);\n    const data = await response.json();\n    \n    res.status(response.status).json(data);\n  } catch (error) {\n    console.error(\"Proxy error:\", error);\n    res.status(502).json({ error: \"Backend service unavailable\" });\n  }\n}\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  \n  app.get(\"/api/health\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/dashboard\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/verifications\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/verifications/:id\", (req, res) => proxyToPython(req, res));\n  \n  app.post(\"/api/verifications\", upload.single(\"document\"), async (req, res) => {\n    const maxRetries = 3;\n    let lastError: Error | null = null;\n    \n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        const url = `${PYTHON_BACKEND_URL}/api/verifications`;\n        \n        const formData = new FormData();\n        if (req.file) {\n          const blob = new Blob([req.file.buffer], { type: req.file.mimetype });\n          formData.append(\"document\", blob, req.file.originalname);\n        }\n        \n        const response = await fetch(url, {\n          method: \"POST\",\n          body: formData,\n        });\n        \n        const data = await response.json();\n        res.status(response.status).json(data);\n        return;\n      } catch (error) {\n        lastError = error as Error;\n        console.error(`Upload error (attempt ${attempt + 1}/${maxRetries}):`, error);\n        if (attempt < maxRetries - 1) {\n          await new Promise(resolve => setTimeout(resolve, 1000));\n        }\n      }\n    }\n    \n    console.error(\"Upload failed after retries:\", lastError);\n    res.status(502).json({ error: \"Backend service unavailable. Please try again in a moment.\" });\n  });\n  \n  app.patch(\"/api/verifications/:id\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/verifications/:id/chat\", (req, res) => proxyToPython(req, res));\n  \n  app.post(\"/api/verifications/:id/chat\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/integrations\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/patterns\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/settings\", (req, res) => proxyToPython(req, res));\n  \n  app.put(\"/api/settings\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/audit-logs\", async (req, res) => {\n    try {\n      const queryString = new URLSearchParams(req.query as Record<string, string>).toString();\n      const url = `${PYTHON_BACKEND_URL}/api/audit-logs${queryString ? '?' + queryString : ''}`;\n      const response = await fetch(url);\n      const data = await response.json();\n      res.status(response.status).json(data);\n    } catch (error) {\n      console.error(\"Audit logs error:\", error);\n      res.status(502).json({ error: \"Backend service unavailable\" });\n    }\n  });\n  \n  app.get(\"/api/audit-logs/stats\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/audit-logs/export\", async (req, res) => {\n    try {\n      const queryString = new URLSearchParams(req.query as Record<string, string>).toString();\n      const url = `${PYTHON_BACKEND_URL}/api/audit-logs/export${queryString ? '?' + queryString : ''}`;\n      const response = await fetch(url);\n      \n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', response.headers.get('Content-Disposition') || 'attachment; filename=\"audit_logs.csv\"');\n      \n      const buffer = await response.arrayBuffer();\n      res.send(Buffer.from(buffer));\n    } catch (error) {\n      console.error(\"Audit export error:\", error);\n      res.status(502).json({ error: \"Backend service unavailable\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", (req, res) => {\n    const { username, password } = req.body;\n    \n    if (username === DEMO_USERNAME && password === DEMO_PASSWORD) {\n      req.session.isAuthenticated = true;\n      req.session.user = { username };\n      res.json({ success: true, user: { username } });\n    } else {\n      res.status(401).json({ error: \"Invalid credentials\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        res.status(500).json({ error: \"Logout failed\" });\n      } else {\n        res.json({ success: true });\n      }\n    });\n  });\n\n  app.get(\"/api/auth/me\", (req, res) => {\n    if (req.session.isAuthenticated && req.session.user) {\n      res.json({ user: req.session.user });\n    } else {\n      res.status(401).json({ error: \"Not authenticated\" });\n    }\n  });\n\n  app.get(\"/api/batch-jobs\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/batch-jobs/stats\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/batch-jobs/:id\", (req, res) => proxyToPython(req, res));\n  \n  app.get(\"/api/batch-jobs/:id/verifications\", (req, res) => proxyToPython(req, res));\n  \n  app.post(\"/api/batch-jobs\", uploadMultiple.array(\"documents\", 50), async (req, res) => {\n    try {\n      const url = `${PYTHON_BACKEND_URL}/api/batch-jobs`;\n      \n      const formData = new FormData();\n      const files = req.files as Express.Multer.File[];\n      \n      if (files && files.length > 0) {\n        for (const file of files) {\n          const blob = new Blob([file.buffer], { type: file.mimetype });\n          formData.append(\"documents\", blob, file.originalname);\n        }\n      }\n      \n      if (req.body.name) {\n        formData.append(\"name\", req.body.name);\n      }\n      \n      const response = await fetch(url, {\n        method: \"POST\",\n        body: formData,\n      });\n      \n      const data = await response.json();\n      res.status(response.status).json(data);\n    } catch (error) {\n      console.error(\"Batch upload error:\", error);\n      res.status(502).json({ error: \"Backend service unavailable\" });\n    }\n  });\n\n  return httpServer;\n}\n","path":null,"size_bytes":7253,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 89%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 217 91% 48%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 9%;\n  --sidebar-ring: 217 91% 48%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 90%;\n  --primary: 217 91% 48%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 90%;\n  --secondary-foreground: 0 0% 9%;\n  --muted: 0 0% 92%;\n  --muted-foreground: 0 0% 35%;\n  --accent: 217 15% 91%;\n  --accent-foreground: 0 0% 9%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 78%;\n  --ring: 217 91% 48%;\n  --chart-1: 217 91% 35%;\n  --chart-2: 173 58% 32%;\n  --chart-3: 283 62% 38%;\n  --chart-4: 30 82% 42%;\n  --chart-5: 340 75% 40%;\n  --font-sans: Inter, system-ui, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 7%;\n  --foreground: 0 0% 98%;\n  --border: 0 0% 16%;\n  --card: 0 0% 9%;\n  --card-foreground: 0 0% 98%;\n  --card-border: 0 0% 12%;\n  --sidebar: 0 0% 11%;\n  --sidebar-foreground: 0 0% 98%;\n  --sidebar-border: 0 0% 14%;\n  --sidebar-primary: 217 91% 52%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 0 0% 14%;\n  --sidebar-accent-foreground: 0 0% 98%;\n  --sidebar-ring: 217 91% 52%;\n  --popover: 0 0% 13%;\n  --popover-foreground: 0 0% 98%;\n  --popover-border: 0 0% 16%;\n  --primary: 217 91% 48%;\n  --primary-foreground: 0 0% 98%;\n  --secondary: 0 0% 16%;\n  --secondary-foreground: 0 0% 98%;\n  --muted: 217 8% 15%;\n  --muted-foreground: 0 0% 70%;\n  --accent: 217 12% 14%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 72% 42%;\n  --destructive-foreground: 0 0% 98%;\n  --input: 0 0% 28%;\n  --ring: 217 91% 52%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 173 58% 68%;\n  --chart-3: 283 62% 72%;\n  --chart-4: 30 82% 68%;\n  --chart-5: 340 75% 70%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","path":null,"size_bytes":10549,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/pages/Settings.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Settings as SettingsIcon, Bell, Shield, Sliders, Save, Loader2 } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Settings } from \"@shared/schema\";\n\nexport default function SettingsPage() {\n  const { toast } = useToast();\n  \n  const { data: settings, isLoading } = useQuery<Settings>({\n    queryKey: [\"/api/settings\"],\n  });\n\n  const [localSettings, setLocalSettings] = useState<Settings | null>(null);\n  const currentSettings = localSettings ?? settings;\n\n  const updateSettingsMutation = useMutation({\n    mutationFn: async (newSettings: Settings) => {\n      return apiRequest(\"PUT\", \"/api/settings\", newSettings);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      setLocalSettings(null);\n      toast({\n        title: \"Settings saved\",\n        description: \"Your settings have been updated successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Failed to save settings\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateSetting = <K extends keyof Settings>(key: K, value: Settings[K]) => {\n    if (!currentSettings) return;\n    setLocalSettings({\n      ...currentSettings,\n      [key]: value,\n    });\n  };\n\n  const hasChanges = localSettings !== null;\n\n  const handleSave = () => {\n    if (localSettings) {\n      updateSettingsMutation.mutate(localSettings);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-3xl mx-auto px-6 py-8 space-y-8\">\n        <Skeleton className=\"h-10 w-48\" />\n        <Skeleton className=\"h-64\" />\n        <Skeleton className=\"h-48\" />\n        <Skeleton className=\"h-32\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto px-6 py-8 space-y-8\">\n      <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-semibold tracking-tight\">Settings</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Configure your verification preferences\n          </p>\n        </div>\n        {hasChanges && (\n          <Button onClick={handleSave} disabled={updateSettingsMutation.isPending} data-testid=\"button-save-settings\">\n            {updateSettingsMutation.isPending ? (\n              <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n            ) : (\n              <Save className=\"h-4 w-4 mr-2\" />\n            )}\n            Save Changes\n          </Button>\n        )}\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Sliders className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">Risk Thresholds</CardTitle>\n              <CardDescription>Configure automatic approval and flagging boundaries</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-8\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between gap-4\">\n              <div>\n                <Label className=\"text-base\">Auto-Approval Threshold</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  Documents with risk scores below this value will be automatically approved\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <span className=\"text-2xl font-semibold\">{currentSettings?.autoApproveThreshold ?? 30}</span>\n              </div>\n            </div>\n            <Slider\n              value={[currentSettings?.autoApproveThreshold ?? 30]}\n              onValueChange={([value]) => updateSetting(\"autoApproveThreshold\", value)}\n              max={100}\n              step={5}\n              className=\"w-full\"\n              data-testid=\"slider-auto-approve\"\n            />\n            <div className=\"flex justify-between text-xs text-muted-foreground\">\n              <span>0 (Very Strict)</span>\n              <span>100 (Very Lenient)</span>\n            </div>\n          </div>\n\n          <Separator />\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between gap-4\">\n              <div>\n                <Label className=\"text-base\">High Risk Threshold</Label>\n                <p className=\"text-sm text-muted-foreground\">\n                  Documents with risk scores above this value will be flagged for immediate attention\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <span className=\"text-2xl font-semibold\">{currentSettings?.highRiskThreshold ?? 70}</span>\n              </div>\n            </div>\n            <Slider\n              value={[currentSettings?.highRiskThreshold ?? 70]}\n              onValueChange={([value]) => updateSetting(\"highRiskThreshold\", value)}\n              max={100}\n              step={5}\n              className=\"w-full\"\n              data-testid=\"slider-high-risk\"\n            />\n            <div className=\"flex justify-between text-xs text-muted-foreground\">\n              <span>0 (Sensitive)</span>\n              <span>100 (Less Sensitive)</span>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Shield className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">Automation Rules</CardTitle>\n              <CardDescription>Configure automatic actions based on risk factors</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"space-y-0.5\">\n              <Label className=\"text-base\">Auto-Reject High Risk</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Automatically reject documents that exceed the high risk threshold\n              </p>\n            </div>\n            <Switch\n              checked={currentSettings?.autoRejectHighRisk ?? false}\n              onCheckedChange={(checked) => updateSetting(\"autoRejectHighRisk\", checked)}\n              data-testid=\"switch-auto-reject\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Bell className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">Notifications</CardTitle>\n              <CardDescription>Configure how you receive alerts</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"space-y-0.5\">\n              <Label className=\"text-base\">Email Notifications</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Receive email alerts for high-risk submissions\n              </p>\n            </div>\n            <Switch\n              checked={currentSettings?.emailNotifications ?? true}\n              onCheckedChange={(checked) => updateSetting(\"emailNotifications\", checked)}\n              data-testid=\"switch-email-notifications\"\n            />\n          </div>\n\n          <Separator />\n\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"space-y-0.5\">\n              <Label className=\"text-base\">In-App Notifications</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Show notifications within the dashboard\n              </p>\n            </div>\n            <Switch\n              checked={currentSettings?.inAppNotifications ?? true}\n              onCheckedChange={(checked) => updateSetting(\"inAppNotifications\", checked)}\n              data-testid=\"switch-in-app-notifications\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n            <div>\n              <h3 className=\"font-semibold\">Need help with configuration?</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Our team can help you optimize settings for your compliance needs.\n              </p>\n            </div>\n            <Button variant=\"outline\">Contact Support</Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":9545,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\nimport { spawn, type ChildProcess } from \"child_process\";\nimport path from \"path\";\nimport session from \"express-session\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\nlet pythonProcess: ChildProcess | null = null;\n\ndeclare module \"express-session\" {\n  interface SessionData {\n    isAuthenticated?: boolean;\n    user?: { username: string };\n  }\n}\n\nfunction startPythonBackend() {\n  const pythonPath = path.join(process.cwd(), \"python_backend\", \"app.py\");\n  \n  pythonProcess = spawn(\"python\", [pythonPath], {\n    env: { ...process.env, FLASK_PORT: \"5001\" },\n    stdio: [\"pipe\", \"pipe\", \"pipe\"],\n  });\n\n  pythonProcess.stdout?.on(\"data\", (data) => {\n    console.log(`[python] ${data.toString().trim()}`);\n  });\n\n  pythonProcess.stderr?.on(\"data\", (data) => {\n    console.log(`[python] ${data.toString().trim()}`);\n  });\n\n  pythonProcess.on(\"error\", (err) => {\n    console.error(`[python] Failed to start Python backend: ${err.message}`);\n  });\n\n  pythonProcess.on(\"exit\", (code) => {\n    if (code !== null && code !== 0) {\n      console.log(`[python] Backend exited with code ${code}, restarting...`);\n      setTimeout(startPythonBackend, 2000);\n    }\n  });\n\n  console.log(\"[python] Starting Python backend on port 5001...\");\n}\n\nprocess.on(\"SIGTERM\", () => {\n  if (pythonProcess) {\n    pythonProcess.kill();\n  }\n  process.exit(0);\n});\n\nprocess.on(\"SIGINT\", () => {\n  if (pythonProcess) {\n    pythonProcess.kill();\n  }\n  process.exit(0);\n});\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET || \"verifai-demo-secret-key\",\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      secure: false,\n      httpOnly: true,\n      maxAge: 24 * 60 * 60 * 1000,\n    },\n  })\n);\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  startPythonBackend();\n  \n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":4228,"size_tokens":null},"start-production.sh":{"content":"#!/bin/bash\npython python_backend/app.py &\nnpm run start\n","path":null,"size_bytes":57,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  serial,\n  text,\n  integer,\n  boolean,\n} from \"drizzle-orm/pg-core\";\nimport { z } from \"zod\";\n\nexport const DocumentTypeEnum = z.enum([\"passport\", \"drivers_license\", \"national_id\"]);\nexport type DocumentType = z.infer<typeof DocumentTypeEnum>;\n\nexport const VerificationStatusEnum = z.enum([\"pending\", \"approved\", \"rejected\", \"in_review\"]);\nexport type VerificationStatus = z.infer<typeof VerificationStatusEnum>;\n\nexport const RiskLevelEnum = z.enum([\"low\", \"medium\", \"high\"]);\nexport type RiskLevel = z.infer<typeof RiskLevelEnum>;\n\nexport const ocrFieldSchema = z.object({\n  fieldName: z.string(),\n  value: z.string(),\n  confidence: z.number().min(0).max(100),\n  boundingBox: z.object({\n    x: z.number(),\n    y: z.number(),\n    width: z.number(),\n    height: z.number(),\n  }).optional(),\n});\nexport type OcrField = z.infer<typeof ocrFieldSchema>;\n\nexport const riskInsightSchema = z.object({\n  category: z.string(),\n  description: z.string(),\n  severity: RiskLevelEnum,\n});\nexport type RiskInsight = z.infer<typeof riskInsightSchema>;\n\nexport const validationResultSchema = z.object({\n  fieldName: z.string(),\n  submittedValue: z.string(),\n  extractedValue: z.string(),\n  isMatch: z.boolean(),\n});\nexport type ValidationResult = z.infer<typeof validationResultSchema>;\n\nexport const chatMessageSchema = z.object({\n  id: z.string(),\n  role: z.enum([\"user\", \"assistant\"]),\n  content: z.string(),\n  timestamp: z.string(),\n});\nexport type ChatMessage = z.infer<typeof chatMessageSchema>;\n\nexport const verificationSchema = z.object({\n  id: z.string(),\n  documentType: DocumentTypeEnum,\n  documentUrl: z.string(),\n  status: VerificationStatusEnum,\n  riskScore: z.number().min(0).max(100),\n  riskLevel: RiskLevelEnum,\n  ocrFields: z.array(ocrFieldSchema),\n  riskInsights: z.array(riskInsightSchema),\n  validationResults: z.array(validationResultSchema),\n  chatHistory: z.array(chatMessageSchema),\n  customerName: z.string().optional(),\n  submittedAt: z.string(),\n  reviewedAt: z.string().optional(),\n});\nexport type Verification = z.infer<typeof verificationSchema>;\n\nexport const insertVerificationSchema = verificationSchema.omit({ \n  id: true, \n  ocrFields: true, \n  riskInsights: true, \n  validationResults: true, \n  chatHistory: true,\n  riskScore: true,\n  riskLevel: true,\n  reviewedAt: true,\n});\nexport type InsertVerification = z.infer<typeof insertVerificationSchema>;\n\nexport const integrationSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  type: z.enum([\"dmv\", \"passport_authority\", \"ssa\"]),\n  status: z.enum([\"connected\", \"disconnected\", \"pending\"]),\n  lastSync: z.string().optional(),\n  description: z.string(),\n});\nexport type Integration = z.infer<typeof integrationSchema>;\n\nexport const fraudPatternSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  description: z.string(),\n  technique: z.string(),\n  confidenceScore: z.number().min(0).max(100),\n  beforeExample: z.string().optional(),\n  afterExample: z.string().optional(),\n});\nexport type FraudPattern = z.infer<typeof fraudPatternSchema>;\n\nexport const settingsSchema = z.object({\n  autoApproveThreshold: z.number().min(0).max(100),\n  highRiskThreshold: z.number().min(0).max(100),\n  emailNotifications: z.boolean(),\n  inAppNotifications: z.boolean(),\n  autoRejectHighRisk: z.boolean(),\n});\nexport type Settings = z.infer<typeof settingsSchema>;\n\nexport const dashboardStatsSchema = z.object({\n  totalVerifications: z.number(),\n  autoApprovalRate: z.number(),\n  pendingReview: z.number(),\n  highRiskFlags: z.number(),\n  recentVerifications: z.array(verificationSchema),\n  volumeData: z.array(z.object({\n    date: z.string(),\n    count: z.number(),\n  })),\n});\nexport type DashboardStats = z.infer<typeof dashboardStatsSchema>;\n\nexport const auditLogs = pgTable(\"audit_logs\", {\n  id: serial(\"id\").primaryKey(),\n  action: varchar(\"action\").notNull(),\n  entityType: varchar(\"entity_type\").notNull(),\n  entityId: varchar(\"entity_id\"),\n  userId: varchar(\"user_id\"),\n  userName: varchar(\"user_name\"),\n  details: jsonb(\"details\"),\n  ipAddress: varchar(\"ip_address\"),\n  timestamp: timestamp(\"timestamp\").defaultNow().notNull(),\n});\n\nexport type AuditLog = typeof auditLogs.$inferSelect;\nexport type InsertAuditLog = typeof auditLogs.$inferInsert;\n\nexport const auditLogSchema = z.object({\n  id: z.number(),\n  action: z.string(),\n  entityType: z.string(),\n  entityId: z.string().nullable(),\n  userId: z.string().nullable(),\n  userName: z.string().nullable(),\n  details: z.any().nullable(),\n  ipAddress: z.string().nullable(),\n  timestamp: z.string(),\n});\n\n","path":null,"size_bytes":4633,"size_tokens":null},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":96,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/components/GenAIAssistant.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Send, Bot, User, Loader2, Sparkles } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { ChatMessage } from \"@shared/schema\";\n\ninterface GenAIAssistantProps {\n  verificationId: string;\n}\n\nconst suggestedPrompts = [\n  \"Explain the risk score\",\n  \"Check for fraud patterns\",\n  \"Summarize extracted data\",\n  \"Should I approve this?\",\n];\n\nfunction MessageBubble({ message }: { message: ChatMessage }) {\n  const isAssistant = message.role === \"assistant\";\n  \n  return (\n    <div className={`flex gap-3 ${isAssistant ? \"\" : \"flex-row-reverse\"}`}>\n      <Avatar className=\"h-8 w-8 shrink-0\">\n        <AvatarFallback className={isAssistant ? \"bg-primary text-primary-foreground\" : \"bg-muted\"}>\n          {isAssistant ? <Bot className=\"h-4 w-4\" /> : <User className=\"h-4 w-4\" />}\n        </AvatarFallback>\n      </Avatar>\n      <div\n        className={`rounded-2xl px-4 py-3 max-w-md ${\n          isAssistant\n            ? \"bg-muted text-foreground\"\n            : \"bg-primary text-primary-foreground\"\n        }`}\n      >\n        <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n        <span className={`text-xs mt-2 block ${isAssistant ? \"text-muted-foreground\" : \"text-primary-foreground/70\"}`}>\n          {new Date(message.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nexport function GenAIAssistant({ verificationId }: GenAIAssistantProps) {\n  const [input, setInput] = useState(\"\");\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const { data: messages = [] } = useQuery<ChatMessage[]>({\n    queryKey: [\"/api/verifications\", verificationId, \"chat\"],\n  });\n\n  const sendMessageMutation = useMutation({\n    mutationFn: async (content: string) => {\n      return apiRequest(\"POST\", `/api/verifications/${verificationId}/chat`, { content });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/verifications\", verificationId, \"chat\"] });\n    },\n  });\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const handleSend = () => {\n    const trimmedInput = input.trim();\n    if (!trimmedInput || sendMessageMutation.isPending) return;\n    \n    setInput(\"\");\n    sendMessageMutation.mutate(trimmedInput);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleSuggestedPrompt = (prompt: string) => {\n    setInput(prompt);\n    textareaRef.current?.focus();\n  };\n\n  return (\n    <Card>\n      <CardHeader className=\"flex flex-row items-center gap-3 space-y-0 pb-4\">\n        <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n          <Sparkles className=\"h-5 w-5 text-primary\" />\n        </div>\n        <div>\n          <CardTitle className=\"text-lg font-semibold\">GenAI Assistant</CardTitle>\n          <p className=\"text-sm text-muted-foreground\">Ask questions about this verification</p>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-0\">\n        <ScrollArea className=\"h-96 px-6\" ref={scrollRef}>\n          <div className=\"space-y-4 py-4\">\n            {messages.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <Bot className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\n                <p className=\"text-muted-foreground mb-4\">\n                  Hi! I'm your AI assistant. I can help you analyze this document, explain risk factors, and provide recommendations.\n                </p>\n                <div className=\"flex flex-wrap justify-center gap-2\">\n                  {suggestedPrompts.map((prompt) => (\n                    <Button\n                      key={prompt}\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"rounded-full text-xs\"\n                      onClick={() => handleSuggestedPrompt(prompt)}\n                      data-testid={`prompt-${prompt.replace(/\\s+/g, \"-\").toLowerCase()}`}\n                    >\n                      {prompt}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              messages.map((message) => (\n                <MessageBubble key={message.id} message={message} />\n              ))\n            )}\n            \n            {sendMessageMutation.isPending && (\n              <div className=\"flex gap-3\">\n                <Avatar className=\"h-8 w-8 shrink-0\">\n                  <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                    <Bot className=\"h-4 w-4\" />\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"rounded-2xl px-4 py-3 bg-muted\">\n                  <div className=\"flex items-center gap-2\">\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    <span className=\"text-sm text-muted-foreground\">Thinking...</span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n\n        {messages.length > 0 && (\n          <div className=\"px-6 py-2 border-t border-border\">\n            <div className=\"flex flex-wrap gap-2\">\n              {suggestedPrompts.map((prompt) => (\n                <Button\n                  key={prompt}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"rounded-full text-xs h-7\"\n                  onClick={() => handleSuggestedPrompt(prompt)}\n                >\n                  {prompt}\n                </Button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"p-4 border-t border-border\">\n          <div className=\"flex items-end gap-2\">\n            <Textarea\n              ref={textareaRef}\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Ask about this document...\"\n              className=\"min-h-[44px] max-h-32 resize-none rounded-2xl border-input\"\n              rows={1}\n              data-testid=\"input-chat\"\n            />\n            <Button\n              size=\"icon\"\n              onClick={handleSend}\n              disabled={!input.trim() || sendMessageMutation.isPending}\n              className=\"shrink-0 rounded-full h-11 w-11\"\n              data-testid=\"button-send-message\"\n            >\n              {sendMessageMutation.isPending ? (\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <Send className=\"h-5 w-5\" />\n              )}\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":7306,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/pages/Integrations.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Link2, CheckCircle, XCircle, Clock, Settings2, ExternalLink } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport type { Integration } from \"@shared/schema\";\n\nfunction StatusIndicator({ status }: { status: Integration[\"status\"] }) {\n  const config = {\n    connected: { \n      icon: CheckCircle, \n      label: \"Connected\", \n      className: \"text-green-600 dark:text-green-400\",\n      dotClass: \"bg-green-500\"\n    },\n    disconnected: { \n      icon: XCircle, \n      label: \"Disconnected\", \n      className: \"text-red-600 dark:text-red-400\",\n      dotClass: \"bg-red-500\"\n    },\n    pending: { \n      icon: Clock, \n      label: \"Pending\", \n      className: \"text-yellow-600 dark:text-yellow-400\",\n      dotClass: \"bg-yellow-500\"\n    },\n  };\n  \n  const { icon: Icon, label, className, dotClass } = config[status];\n  \n  return (\n    <div className={`flex items-center gap-2 ${className}`}>\n      <span className={`h-2 w-2 rounded-full ${dotClass}`} />\n      <span className=\"text-sm font-medium\">{label}</span>\n    </div>\n  );\n}\n\nfunction IntegrationCard({ integration }: { integration: Integration }) {\n  const getIcon = (type: Integration[\"type\"]) => {\n    switch (type) {\n      case \"dmv\":\n        return \"DMV\";\n      case \"passport_authority\":\n        return \"PA\";\n      case \"ssa\":\n        return \"SSA\";\n      default:\n        return \"??\";\n    }\n  };\n\n  return (\n    <Card className=\"hover-elevate\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center shrink-0\">\n              <span className=\"font-semibold text-primary text-sm\">{getIcon(integration.type)}</span>\n            </div>\n            <div>\n              <h3 className=\"font-semibold\">{integration.name}</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">{integration.description}</p>\n              {integration.lastSync && (\n                <p className=\"text-xs text-muted-foreground mt-2\">\n                  Last sync: {new Date(integration.lastSync).toLocaleString()}\n                </p>\n              )}\n            </div>\n          </div>\n          <StatusIndicator status={integration.status} />\n        </div>\n\n        <div className=\"flex items-center gap-2 mt-4 pt-4 border-t border-border\">\n          <Dialog>\n            <DialogTrigger asChild>\n              <Button variant=\"outline\" size=\"sm\" data-testid={`button-configure-${integration.id}`}>\n                <Settings2 className=\"h-4 w-4 mr-2\" />\n                Configure\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>Configure {integration.name}</DialogTitle>\n                <DialogDescription>\n                  Enter your API credentials to connect to {integration.name}.\n                </DialogDescription>\n              </DialogHeader>\n              <div className=\"space-y-4 py-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"api-key\">API Key</Label>\n                  <Input id=\"api-key\" type=\"password\" placeholder=\"Enter your API key\" />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"api-secret\">API Secret</Label>\n                  <Input id=\"api-secret\" type=\"password\" placeholder=\"Enter your API secret\" />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"endpoint\">Endpoint URL</Label>\n                  <Input id=\"endpoint\" placeholder=\"https://api.example.com/v1\" />\n                </div>\n              </div>\n              <div className=\"flex justify-end gap-2\">\n                <Button variant=\"outline\">Test Connection</Button>\n                <Button>Save Configuration</Button>\n              </div>\n            </DialogContent>\n          </Dialog>\n          \n          <Button variant=\"ghost\" size=\"sm\">\n            <ExternalLink className=\"h-4 w-4 mr-2\" />\n            View Docs\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default function Integrations() {\n  const { data: integrations, isLoading } = useQuery<Integration[]>({\n    queryKey: [\"/api/integrations\"],\n  });\n\n  return (\n    <div className=\"max-w-5xl mx-auto px-6 py-8 space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-semibold tracking-tight\">Integrations</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Connect to government databases for identity verification\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Link2 className=\"h-5 w-5 text-primary\" />\n            </div>\n            <div>\n              <CardTitle className=\"text-lg font-semibold\">External Data Sources</CardTitle>\n              <p className=\"text-sm text-muted-foreground\">\n                Cross-reference identity information with official databases\n              </p>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"space-y-4\">\n              {[1, 2, 3].map((i) => (\n                <Skeleton key={i} className=\"h-40\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {integrations?.map((integration) => (\n                <IntegrationCard key={integration.id} integration={integration} />\n              ))}\n              {(!integrations || integrations.length === 0) && (\n                <div className=\"text-center py-12\">\n                  <Link2 className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground/50\" />\n                  <p className=\"text-muted-foreground\">No integrations configured</p>\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n            <div>\n              <h3 className=\"font-semibold\">Need a custom integration?</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Contact our team to add support for additional data sources.\n              </p>\n            </div>\n            <Button variant=\"outline\">Contact Support</Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":7086,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"replit.md":{"content":"# VerifAI - AI-Powered KYC Document Verification Platform\n\n## Overview\nVerifAI is an intelligent Know Your Customer (KYC) document verification platform that leverages AI technologies to automate identity verification, detect fraud, and assist compliance teams with real-time insights.\n\n## Tech Stack\n- **Frontend**: React 18 with TypeScript, Tailwind CSS, Shadcn UI components\n- **Backend**: Python Flask API with OpenAI integration\n- **Server**: Node.js Express (serves frontend and proxies API requests to Python backend)\n- **Database**: PostgreSQL for persistent storage\n- **AI**: OpenAI GPT-4o for document analysis and Vision API for OCR\n\n## Project Structure\n```\n client/                    # React frontend\n    src/\n       components/        # Reusable UI components\n          TopNavbar.tsx  # Top navigation bar\n          GenAIAssistant.tsx  # AI chat component\n          ui/            # Shadcn UI components\n       pages/             # Page components\n          Dashboard.tsx  # Main dashboard with KPIs\n          Upload.tsx     # Document upload interface\n          VerificationDetail.tsx  # Verification review page\n          Integrations.tsx  # External data sources\n          Patterns.tsx   # Fraud detection patterns\n          Settings.tsx   # Configuration settings\n       hooks/             # Custom React hooks\n       lib/               # Utility functions\n       App.tsx            # Main app with routing\n server/                    # Node.js Express server\n    routes.ts              # API route proxying to Python\n    storage.ts             # Storage interface\n    index.ts               # Server entry point\n python_backend/            # Python Flask API\n    app.py                 # Flask application with AI logic\n shared/                    # Shared TypeScript types\n    schema.ts              # Data models and Zod schemas\n design_guidelines.md       # UI/UX design guidelines\n```\n\n## Key Features\n1. **Dashboard**: Real-time KPIs, verification volume chart, recent verifications feed\n2. **Document Upload**: Drag-and-drop interface supporting JPG, PNG, PDF\n3. **Verification Detail**: Document viewer with OCR data, risk scoring, approve/reject workflow\n4. **GenAI Assistant**: AI-powered chat for document analysis\n5. **Integrations**: Mock connections to DMV, Passport Authority, SSA\n6. **Patterns Library**: Fraud detection techniques\n7. **Settings**: Risk thresholds, automation rules\n8. **Audit Trail**: Complete activity logging with export\n\n## Running the Application\nThe application requires two servers:\n1. **Python Backend** (port 5001): `python python_backend/app.py`\n2. **Node.js Server** (port 5000): `npm run dev`\n\n## Environment Variables\n- `OPENAI_API_KEY`: Your OpenAI API key for AI features\n- `DATABASE_URL`: PostgreSQL connection string\n\n## API Endpoints\n- `GET /api/dashboard` - Dashboard statistics\n- `GET /api/verifications` - List all verifications\n- `POST /api/verifications` - Create new verification\n- `GET /api/verifications/:id` - Get verification details\n- `PATCH /api/verifications/:id` - Update verification status\n- `POST /api/verifications/:id/chat` - Send chat message\n- `GET /api/batch-jobs` - List batch jobs\n- `POST /api/batch-jobs` - Create batch job with multiple documents\n\n## Login Credentials\n- Username: analyst\n- Password: analyst\n","path":null,"size_bytes":3659,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/TechnicalDetails.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { \n  Code2, \n  Database, \n  Brain, \n  Shield, \n  FileCheck, \n  Upload,\n  MessageSquare,\n  BarChart3,\n  Settings,\n  Users,\n  Layers,\n  Server,\n  Globe,\n  Zap,\n  CheckCircle,\n  ArrowLeft\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n\nconst fadeIn = {\n  hidden: { opacity: 0, y: 20 },\n  visible: { opacity: 1, y: 0 }\n};\n\nconst techStack = {\n  frontend: [\n    { name: \"React 18\", description: \"Modern UI library with hooks and functional components\" },\n    { name: \"TypeScript\", description: \"Type-safe JavaScript for robust development\" },\n    { name: \"Tailwind CSS\", description: \"Utility-first CSS framework for rapid styling\" },\n    { name: \"Shadcn UI\", description: \"Beautifully designed component library\" },\n    { name: \"Framer Motion\", description: \"Production-ready animation library\" },\n    { name: \"TanStack Query\", description: \"Powerful data fetching and caching\" },\n    { name: \"Wouter\", description: \"Lightweight routing solution\" },\n    { name: \"Recharts\", description: \"Composable charting library\" },\n  ],\n  backend: [\n    { name: \"Python Flask\", description: \"Lightweight WSGI web application framework\" },\n    { name: \"Node.js Express\", description: \"Fast, unopinionated web framework for proxying\" },\n    { name: \"PostgreSQL\", description: \"Advanced open-source relational database\" },\n    { name: \"Drizzle ORM\", description: \"TypeScript ORM for type-safe database queries\" },\n  ],\n  ai: [\n    { name: \"OpenAI GPT-4o\", description: \"Advanced language model for document analysis\" },\n    { name: \"OpenAI Vision API\", description: \"OCR and image analysis capabilities\" },\n    { name: \"LangChain\", description: \"Framework for LLM application development\" },\n    { name: \"LangGraph\", description: \"Workflow orchestration for AI agents\" },\n    { name: \"ChromaDB\", description: \"Vector database for embeddings and semantic search\" },\n    { name: \"RAG Pipeline\", description: \"Retrieval Augmented Generation for context-aware AI\" },\n  ],\n};\n\nconst features = [\n  {\n    icon: Upload,\n    title: \"Document Upload & OCR\",\n    description: \"Drag-and-drop document upload with AI-powered OCR extraction using OpenAI Vision API. Supports passports, driver's licenses, and national IDs.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Brain,\n    title: \"AI-Powered Risk Scoring\",\n    description: \"Automated risk assessment using machine learning algorithms that analyze document quality, data consistency, and fraud indicators.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Shield,\n    title: \"Fraud Detection Patterns\",\n    description: \"Library of known fraud patterns including font substitution, photo manipulation, metadata tampering, and MRZ inconsistencies.\",\n    status: \"implemented\"\n  },\n  {\n    icon: MessageSquare,\n    title: \"GenAI Assistant\",\n    description: \"RAG-enhanced chat assistant that provides context-aware insights about verifications using historical data and fraud patterns.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Layers,\n    title: \"LangGraph Workflows\",\n    description: \"Multi-step verification workflow with OCR analysis, fraud detection, similarity search, compliance checks, and recommendations.\",\n    status: \"implemented\"\n  },\n  {\n    icon: BarChart3,\n    title: \"Real-time Dashboard\",\n    description: \"Live KPIs showing verification metrics, approval rates, pending reviews, and high-risk flags with interactive charts.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Database,\n    title: \"Vector Search\",\n    description: \"Semantic document search using ChromaDB embeddings to find similar past verifications and matching fraud patterns.\",\n    status: \"implemented\"\n  },\n  {\n    icon: FileCheck,\n    title: \"Verification Workflow\",\n    description: \"Complete approve/reject workflow with audit trail, status tracking, and detailed verification review interface.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Settings,\n    title: \"Configurable Settings\",\n    description: \"Adjustable risk thresholds, auto-approval rules, and notification preferences for compliance customization.\",\n    status: \"implemented\"\n  },\n  {\n    icon: Users,\n    title: \"Session Authentication\",\n    description: \"Secure session-based authentication protecting all verification data and operations.\",\n    status: \"implemented\"\n  },\n];\n\nconst apiEndpoints = [\n  { method: \"GET\", path: \"/api/dashboard\", description: \"Dashboard statistics and metrics\" },\n  { method: \"GET\", path: \"/api/verifications\", description: \"List all verifications\" },\n  { method: \"POST\", path: \"/api/verifications\", description: \"Create new verification with document upload\" },\n  { method: \"GET\", path: \"/api/verifications/:id\", description: \"Get verification details\" },\n  { method: \"PATCH\", path: \"/api/verifications/:id\", description: \"Update verification status (approve/reject)\" },\n  { method: \"POST\", path: \"/api/verifications/:id/chat\", description: \"Send message to GenAI assistant\" },\n  { method: \"GET\", path: \"/api/patterns\", description: \"List fraud detection patterns\" },\n  { method: \"GET\", path: \"/api/integrations\", description: \"List external data integrations\" },\n  { method: \"GET\", path: \"/api/settings\", description: \"Get system settings\" },\n  { method: \"PUT\", path: \"/api/settings\", description: \"Update system settings\" },\n  { method: \"GET\", path: \"/api/audit-logs\", description: \"Get audit trail logs\" },\n  { method: \"POST\", path: \"/api/rag/query\", description: \"Query RAG system directly\" },\n];\n\nfunction TechStackSection({ title, items, color }: { title: string; items: { name: string; description: string }[]; color: string }) {\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n        <div className={`w-3 h-3 rounded-full ${color}`} />\n        {title}\n      </h3>\n      <div className=\"grid gap-3\">\n        {items.map((item) => (\n          <div key={item.name} className=\"flex items-start gap-3 p-3 bg-muted/50 rounded-lg\">\n            <CheckCircle className=\"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0\" />\n            <div>\n              <span className=\"font-medium\">{item.name}</span>\n              <p className=\"text-sm text-muted-foreground\">{item.description}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default function TechnicalDetails() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link href=\"/dashboard\">\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold flex items-center gap-3\" data-testid=\"text-page-title\">\n              <Code2 className=\"w-8 h-8 text-primary\" />\n              Technical Details\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">\n              Project documentation, tech stack, and implemented features\n            </p>\n          </div>\n        </div>\n\n        <Tabs defaultValue=\"overview\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4 mb-8\" data-testid=\"tabs-technical\">\n            <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"stack\" data-testid=\"tab-stack\">Tech Stack</TabsTrigger>\n            <TabsTrigger value=\"features\" data-testid=\"tab-features\">Features</TabsTrigger>\n            <TabsTrigger value=\"api\" data-testid=\"tab-api\">API Reference</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\">\n            <motion.div\n              initial=\"hidden\"\n              animate=\"visible\"\n              variants={fadeIn}\n              className=\"space-y-6\"\n            >\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Globe className=\"w-5 h-5 text-primary\" />\n                    Project Overview\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <p className=\"text-muted-foreground\">\n                    <strong className=\"text-foreground\">VerifAI</strong> is an AI-powered Know Your Customer (KYC) document verification platform \n                    that leverages cutting-edge AI technologies to automate identity verification, detect fraud, \n                    and assist compliance teams with real-time insights.\n                  </p>\n                  \n                  <div className=\"grid md:grid-cols-3 gap-4 mt-6\">\n                    <div className=\"p-4 bg-blue-500/10 rounded-lg border border-blue-500/20\">\n                      <Server className=\"w-6 h-6 text-blue-500 mb-2\" />\n                      <h4 className=\"font-semibold\">Architecture</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        React frontend + Flask AI backend + Express proxy server with PostgreSQL database\n                      </p>\n                    </div>\n                    <div className=\"p-4 bg-purple-500/10 rounded-lg border border-purple-500/20\">\n                      <Brain className=\"w-6 h-6 text-purple-500 mb-2\" />\n                      <h4 className=\"font-semibold\">AI Capabilities</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        GPT-4o Vision OCR, LangChain RAG, LangGraph workflows, ChromaDB vector search\n                      </p>\n                    </div>\n                    <div className=\"p-4 bg-green-500/10 rounded-lg border border-green-500/20\">\n                      <Shield className=\"w-6 h-6 text-green-500 mb-2\" />\n                      <h4 className=\"font-semibold\">Security</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Session-based authentication, audit logging, encrypted data handling\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Zap className=\"w-5 h-5 text-primary\" />\n                    Key Highlights\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Real-time document OCR with OpenAI Vision API</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>AI-powered risk scoring and fraud detection</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>RAG-enhanced GenAI assistant for insights</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Multi-step LangGraph verification workflows</span>\n                      </div>\n                    </div>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Vector-based similar document search</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Comprehensive audit trail logging</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Configurable auto-approval thresholds</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"w-4 h-4 text-green-500\" />\n                        <span>Interactive architecture visualization</span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Login Credentials</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"bg-muted p-4 rounded-lg font-mono text-sm\">\n                    <p><span className=\"text-muted-foreground\">Username:</span> <span className=\"text-primary font-semibold\">analyst</span></p>\n                    <p><span className=\"text-muted-foreground\">Password:</span> <span className=\"text-primary font-semibold\">analyst</span></p>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"stack\">\n            <motion.div\n              initial=\"hidden\"\n              animate=\"visible\"\n              variants={fadeIn}\n              className=\"space-y-6\"\n            >\n              <Card>\n                <CardHeader>\n                  <CardTitle>Technology Stack</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid md:grid-cols-3 gap-8\">\n                    <TechStackSection \n                      title=\"Frontend\" \n                      items={techStack.frontend} \n                      color=\"bg-blue-500\" \n                    />\n                    <TechStackSection \n                      title=\"Backend\" \n                      items={techStack.backend} \n                      color=\"bg-green-500\" \n                    />\n                    <TechStackSection \n                      title=\"AI & ML\" \n                      items={techStack.ai} \n                      color=\"bg-purple-500\" \n                    />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Project Structure</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"bg-muted p-4 rounded-lg font-mono text-sm overflow-x-auto\">\n                    <pre>{` client/                    # React frontend\n    src/\n       components/        # Reusable UI components\n       pages/             # Page components\n       hooks/             # Custom React hooks\n       lib/               # Utility functions\n server/                    # Node.js Express server\n    routes.ts              # API route proxying\n    storage.ts             # Storage interface\n python_backend/            # Python Flask API\n    app.py                 # Flask application\n    rag_service.py         # RAG & LangChain services\n shared/                    # Shared TypeScript types\n    schema.ts              # Data models & Zod schemas\n design_guidelines.md       # UI/UX design guidelines`}</pre>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"features\">\n            <motion.div\n              initial=\"hidden\"\n              animate=\"visible\"\n              variants={fadeIn}\n            >\n              <Card>\n                <CardHeader>\n                  <CardTitle>Implemented Features</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    {features.map((feature) => {\n                      const Icon = feature.icon;\n                      return (\n                        <div \n                          key={feature.title} \n                          className=\"p-4 border rounded-lg hover:bg-muted/50 transition-colors\"\n                        >\n                          <div className=\"flex items-start gap-3\">\n                            <div className=\"p-2 bg-primary/10 rounded-lg\">\n                              <Icon className=\"w-5 h-5 text-primary\" />\n                            </div>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <h4 className=\"font-semibold\">{feature.title}</h4>\n                                <Badge variant=\"outline\" className=\"bg-green-100 text-green-700 border-0 text-xs\">\n                                  {feature.status}\n                                </Badge>\n                              </div>\n                              <p className=\"text-sm text-muted-foreground\">{feature.description}</p>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"api\">\n            <motion.div\n              initial=\"hidden\"\n              animate=\"visible\"\n              variants={fadeIn}\n            >\n              <Card>\n                <CardHeader>\n                  <CardTitle>API Endpoints</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2\">\n                    {apiEndpoints.map((endpoint, index) => (\n                      <div \n                        key={index}\n                        className=\"flex items-center gap-4 p-3 bg-muted/50 rounded-lg\"\n                      >\n                        <Badge \n                          variant=\"outline\" \n                          className={`font-mono text-xs min-w-[60px] justify-center ${\n                            endpoint.method === 'GET' ? 'bg-blue-100 text-blue-700 border-blue-200' :\n                            endpoint.method === 'POST' ? 'bg-green-100 text-green-700 border-green-200' :\n                            endpoint.method === 'PUT' ? 'bg-amber-100 text-amber-700 border-amber-200' :\n                            'bg-purple-100 text-purple-700 border-purple-200'\n                          }`}\n                        >\n                          {endpoint.method}\n                        </Badge>\n                        <code className=\"font-mono text-sm flex-1\">{endpoint.path}</code>\n                        <span className=\"text-sm text-muted-foreground hidden md:block\">{endpoint.description}</span>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"mt-6\">\n                <CardHeader>\n                  <CardTitle>Environment Variables</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-4 p-3 bg-muted/50 rounded-lg\">\n                      <code className=\"font-mono text-sm text-primary\">OPENAI_API_KEY</code>\n                      <span className=\"text-sm text-muted-foreground\">OpenAI API key for AI features</span>\n                    </div>\n                    <div className=\"flex items-center gap-4 p-3 bg-muted/50 rounded-lg\">\n                      <code className=\"font-mono text-sm text-primary\">DATABASE_URL</code>\n                      <span className=\"text-sm text-muted-foreground\">PostgreSQL connection string</span>\n                    </div>\n                    <div className=\"flex items-center gap-4 p-3 bg-muted/50 rounded-lg\">\n                      <code className=\"font-mono text-sm text-primary\">SESSION_SECRET</code>\n                      <span className=\"text-sm text-muted-foreground\">Secret for session encryption</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":20853,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"client/src/pages/AIArchitecture.tsx":{"content":"import { motion } from \"framer-motion\";\nimport { \n  SystemArchitectureDiagram,\n  LangGraphWorkflowDiagram,\n  RAGPipelineDiagram,\n  LangChainComponentsDiagram,\n  DataFlowDiagram\n} from \"@/components/diagrams/AIArchitectureDiagrams\";\nimport { \n  Brain, \n  Workflow, \n  Sparkles, \n  Layers, \n  Zap,\n  ArrowLeft\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n\nexport default function AIArchitecture() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link href=\"/dashboard\">\n            <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-back\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold flex items-center gap-3\" data-testid=\"text-page-title\">\n              <Brain className=\"w-8 h-8 text-primary\" />\n              AI Architecture & Technology\n            </h1>\n            <p className=\"text-muted-foreground mt-1\">\n              Visual documentation of VerifAI's AI-powered verification system\n            </p>\n          </div>\n        </div>\n\n        <Tabs defaultValue=\"all\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-6 mb-8\" data-testid=\"tabs-architecture\">\n            <TabsTrigger value=\"all\" className=\"flex items-center gap-2\" data-testid=\"tab-all\">\n              <Layers className=\"w-4 h-4\" />\n              All\n            </TabsTrigger>\n            <TabsTrigger value=\"system\" className=\"flex items-center gap-2\" data-testid=\"tab-system\">\n              <Layers className=\"w-4 h-4\" />\n              System\n            </TabsTrigger>\n            <TabsTrigger value=\"langgraph\" className=\"flex items-center gap-2\" data-testid=\"tab-langgraph\">\n              <Workflow className=\"w-4 h-4\" />\n              LangGraph\n            </TabsTrigger>\n            <TabsTrigger value=\"rag\" className=\"flex items-center gap-2\" data-testid=\"tab-rag\">\n              <Sparkles className=\"w-4 h-4\" />\n              RAG\n            </TabsTrigger>\n            <TabsTrigger value=\"langchain\" className=\"flex items-center gap-2\" data-testid=\"tab-langchain\">\n              <Brain className=\"w-4 h-4\" />\n              LangChain\n            </TabsTrigger>\n            <TabsTrigger value=\"flow\" className=\"flex items-center gap-2\" data-testid=\"tab-flow\">\n              <Zap className=\"w-4 h-4\" />\n              Data Flow\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"all\">\n            <motion.div \n              className=\"grid gap-8 lg:grid-cols-2\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ duration: 0.5 }}\n            >\n              <SystemArchitectureDiagram />\n              <LangGraphWorkflowDiagram />\n              <RAGPipelineDiagram />\n              <LangChainComponentsDiagram />\n              <div className=\"lg:col-span-2\">\n                <DataFlowDiagram />\n              </div>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"system\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"max-w-2xl mx-auto\"\n            >\n              <SystemArchitectureDiagram />\n              <div className=\"mt-6 bg-card rounded-lg p-6 border\">\n                <h3 className=\"text-lg font-semibold mb-4\">System Architecture Overview</h3>\n                <ul className=\"space-y-3 text-muted-foreground\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\" />\n                    <span><strong>Client Browser:</strong> React SPA with TypeScript, Tailwind CSS, and Shadcn UI components</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"w-2 h-2 bg-green-500 rounded-full mt-2\" />\n                    <span><strong>Express Server:</strong> Handles authentication, file uploads, and proxies requests to Flask</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"w-2 h-2 bg-purple-500 rounded-full mt-2\" />\n                    <span><strong>Flask API:</strong> Core business logic with RAG, LangGraph workflows, and OpenAI integration</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"w-2 h-2 bg-amber-500 rounded-full mt-2\" />\n                    <span><strong>PostgreSQL:</strong> Persistent storage for verifications, chat history, and audit logs</span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"w-2 h-2 bg-pink-500 rounded-full mt-2\" />\n                    <span><strong>ChromaDB:</strong> Vector database for document embeddings and semantic search</span>\n                  </li>\n                </ul>\n              </div>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"langgraph\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"max-w-2xl mx-auto\"\n            >\n              <LangGraphWorkflowDiagram />\n              <div className=\"mt-6 bg-card rounded-lg p-6 border\">\n                <h3 className=\"text-lg font-semibold mb-4\">LangGraph Verification Workflow</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  LangGraph orchestrates a sophisticated multi-step verification pipeline that processes each document through:\n                </p>\n                <ol className=\"space-y-3 text-muted-foreground\">\n                  <li className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 bg-cyan-500 rounded-full flex items-center justify-center text-white text-sm font-bold\">1</span>\n                    <span><strong>OCR Analysis:</strong> Evaluates extracted field quality and flags low-confidence extractions</span>\n                  </li>\n                  <li className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-sm font-bold\">2</span>\n                    <span><strong>Fraud Detection:</strong> Matches against embedded fraud pattern library using vector similarity</span>\n                  </li>\n                  <li className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold\">3</span>\n                    <span><strong>Similar Documents:</strong> Retrieves historically similar verifications for context</span>\n                  </li>\n                  <li className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold\">4</span>\n                    <span><strong>Compliance Check:</strong> Validates required fields and document type acceptability</span>\n                  </li>\n                  <li className=\"flex items-start gap-3\">\n                    <span className=\"flex-shrink-0 w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center text-white text-sm font-bold\">5</span>\n                    <span><strong>Recommendation:</strong> Generates APPROVE / REJECT / MANUAL REVIEW decision</span>\n                  </li>\n                </ol>\n              </div>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"rag\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"max-w-2xl mx-auto\"\n            >\n              <RAGPipelineDiagram />\n              <div className=\"mt-6 bg-card rounded-lg p-6 border\">\n                <h3 className=\"text-lg font-semibold mb-4\">RAG (Retrieval Augmented Generation)</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  The RAG system enhances AI responses by retrieving relevant context from the knowledge base:\n                </p>\n                <div className=\"space-y-4\">\n                  <div className=\"bg-purple-500/10 border border-purple-500/20 rounded-lg p-4\">\n                    <h4 className=\"font-semibold text-purple-400 mb-2\">Retrieval Phase</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Embeds user query, searches ChromaDB for similar verifications and matching fraud patterns\n                    </p>\n                  </div>\n                  <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-4\">\n                    <h4 className=\"font-semibold text-green-400 mb-2\">Augmentation Phase</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Combines current document data with retrieved similar cases and patterns\n                    </p>\n                  </div>\n                  <div className=\"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4\">\n                    <h4 className=\"font-semibold text-amber-400 mb-2\">Generation Phase</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      GPT-4o generates informed responses grounded in actual historical data\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"langchain\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"max-w-2xl mx-auto\"\n            >\n              <LangChainComponentsDiagram />\n              <div className=\"mt-6 bg-card rounded-lg p-6 border\">\n                <h3 className=\"text-lg font-semibold mb-4\">LangChain Components</h3>\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div className=\"bg-muted/50 rounded-lg p-4\">\n                    <h4 className=\"font-semibold mb-2\">ChatOpenAI</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      GPT-4o model for document analysis, risk assessment, and conversational AI responses\n                    </p>\n                  </div>\n                  <div className=\"bg-muted/50 rounded-lg p-4\">\n                    <h4 className=\"font-semibold mb-2\">OpenAIEmbeddings</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      text-embedding-3-small model creates 1536-dimensional vectors for semantic similarity\n                    </p>\n                  </div>\n                  <div className=\"bg-muted/50 rounded-lg p-4\">\n                    <h4 className=\"font-semibold mb-2\">ChromaDB</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Persistent vector store for document and fraud pattern embeddings with cosine similarity search\n                    </p>\n                  </div>\n                  <div className=\"bg-muted/50 rounded-lg p-4\">\n                    <h4 className=\"font-semibold mb-2\">RAG Chain</h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Query  Retrieve  Augment  Generate pipeline for context-aware responses\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </TabsContent>\n\n          <TabsContent value=\"flow\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"max-w-4xl mx-auto\"\n            >\n              <DataFlowDiagram />\n              <div className=\"mt-6 bg-card rounded-lg p-6 border\">\n                <h3 className=\"text-lg font-semibold mb-4\">Document Processing Flow</h3>\n                <p className=\"text-muted-foreground mb-4\">\n                  When a document is uploaded, it goes through a comprehensive processing pipeline:\n                </p>\n                <div className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\">\n                  {[\n                    { step: \"1. Upload\", desc: \"Document received by Express, validated, forwarded to Flask\" },\n                    { step: \"2. OCR\", desc: \"OpenAI Vision API extracts text fields with confidence scores\" },\n                    { step: \"3. Risk Score\", desc: \"Algorithm calculates risk based on quality, confidence, patterns\" },\n                    { step: \"4. Embed\", desc: \"Document converted to vector and stored in ChromaDB\" },\n                    { step: \"5. Workflow\", desc: \"LangGraph runs multi-step verification analysis\" },\n                    { step: \"6. Store\", desc: \"Final result saved to PostgreSQL with full audit trail\" },\n                  ].map((item) => (\n                    <div key={item.step} className=\"bg-muted/50 rounded-lg p-3\">\n                      <div className=\"font-semibold text-sm\">{item.step}</div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">{item.desc}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":13667,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"python_backend/rag_service.py":{"content":"\"\"\"\nRAG Service Module - LangChain, LangGraph, ChromaDB Integration\nProvides advanced AI capabilities for document verification including:\n- Vector embeddings for document similarity search\n- RAG-enhanced GenAI Assistant\n- LangGraph workflow for multi-step verification\n- Semantic fraud pattern matching\n\"\"\"\n\nimport os\nimport json\nimport uuid\nfrom datetime import datetime\nfrom typing import List, Dict, Any, Optional, TypedDict, Annotated\nfrom operator import add\n\nfrom langchain_openai import OpenAIEmbeddings, ChatOpenAI\nfrom langchain_core.documents import Document\nfrom langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder\nfrom langchain_core.messages import HumanMessage, AIMessage, SystemMessage\nfrom langchain_core.output_parsers import StrOutputParser\nfrom langchain_chroma import Chroma\n\nfrom langgraph.graph import StateGraph, END\n\nOPENAI_API_KEY = os.environ.get(\"OPENAI_API_KEY\")\n\nembeddings = None\nllm = None\nvector_store = None\n\ndef init_langchain():\n    \"\"\"Initialize LangChain components\"\"\"\n    global embeddings, llm, vector_store\n    \n    if not OPENAI_API_KEY:\n        print(\"[RAG] Warning: OPENAI_API_KEY not set\")\n        return False\n    \n    try:\n        embeddings = OpenAIEmbeddings(\n            model=\"text-embedding-3-small\",\n            openai_api_key=OPENAI_API_KEY\n        )\n        \n        llm = ChatOpenAI(\n            model=\"gpt-4o\",\n            temperature=0.3,\n            openai_api_key=OPENAI_API_KEY\n        )\n        \n        vector_store = Chroma(\n            collection_name=\"verifai_documents\",\n            embedding_function=embeddings,\n            persist_directory=\"./chroma_db\"\n        )\n        \n        print(\"[RAG] LangChain components initialized successfully\")\n        return True\n    except Exception as e:\n        print(f\"[RAG] Initialization error: {e}\")\n        return False\n\ntry:\n    init_langchain()\nexcept Exception as e:\n    print(f\"[RAG] Could not initialize: {e}\")\n\n\nclass VerificationState(TypedDict):\n    \"\"\"State for LangGraph verification workflow\"\"\"\n    verification_id: str\n    document_type: str\n    ocr_data: Dict[str, Any]\n    risk_score: int\n    risk_level: str\n    fraud_indicators: List[str]\n    similar_documents: List[Dict]\n    compliance_check: Dict[str, Any]\n    final_recommendation: str\n    workflow_steps: Annotated[List[str], add]\n\n\ndef create_document_embedding(verification: Dict) -> Optional[str]:\n    \"\"\"Create and store embedding for a verification document\"\"\"\n    global vector_store\n    \n    if not vector_store or not embeddings:\n        return None\n    \n    try:\n        doc_text = f\"\"\"\n        Document Type: {verification.get('documentType', 'unknown')}\n        Customer Name: {verification.get('customerName', 'unknown')}\n        Risk Score: {verification.get('riskScore', 0)}\n        Risk Level: {verification.get('riskLevel', 'unknown')}\n        Status: {verification.get('status', 'pending')}\n        \n        OCR Extracted Fields:\n        {json.dumps(verification.get('ocrFields', []), indent=2)}\n        \n        Risk Insights:\n        {json.dumps(verification.get('riskInsights', []), indent=2)}\n        \n        Validation Results:\n        {json.dumps(verification.get('validationResults', []), indent=2)}\n        \"\"\"\n        \n        metadata = {\n            \"verification_id\": verification.get(\"id\", \"\"),\n            \"document_type\": verification.get(\"documentType\", \"\"),\n            \"customer_name\": verification.get(\"customerName\", \"\"),\n            \"risk_score\": verification.get(\"riskScore\", 0),\n            \"risk_level\": verification.get(\"riskLevel\", \"\"),\n            \"status\": verification.get(\"status\", \"\"),\n            \"submitted_at\": verification.get(\"submittedAt\", \"\"),\n            \"type\": \"verification\"\n        }\n        \n        doc = Document(page_content=doc_text, metadata=metadata)\n        \n        doc_id = f\"ver_{verification.get('id', str(uuid.uuid4()))}\"\n        vector_store.add_documents([doc], ids=[doc_id])\n        \n        return doc_id\n    except Exception as e:\n        print(f\"[RAG] Embedding creation error: {e}\")\n        return None\n\n\ndef store_fraud_pattern_embeddings(patterns: List[Dict]) -> int:\n    \"\"\"Store fraud pattern embeddings for similarity matching\"\"\"\n    global vector_store\n    \n    if not vector_store:\n        return 0\n    \n    try:\n        docs = []\n        ids = []\n        \n        for pattern in patterns:\n            doc_text = f\"\"\"\n            Fraud Pattern: {pattern.get('name', '')}\n            Description: {pattern.get('description', '')}\n            Technique: {pattern.get('technique', '')}\n            Confidence Score: {pattern.get('confidenceScore', 0)}%\n            \n            Detection Method: This pattern is used to identify {pattern.get('name', '').lower()} \n            in identity documents through {pattern.get('technique', '').lower()}.\n            \"\"\"\n            \n            metadata = {\n                \"pattern_id\": pattern.get(\"id\", \"\"),\n                \"name\": pattern.get(\"name\", \"\"),\n                \"technique\": pattern.get(\"technique\", \"\"),\n                \"confidence_score\": pattern.get(\"confidenceScore\", 0),\n                \"type\": \"fraud_pattern\"\n            }\n            \n            docs.append(Document(page_content=doc_text, metadata=metadata))\n            ids.append(f\"pattern_{pattern.get('id', str(uuid.uuid4()))}\")\n        \n        vector_store.add_documents(docs, ids=ids)\n        return len(docs)\n    except Exception as e:\n        print(f\"[RAG] Pattern embedding error: {e}\")\n        return 0\n\n\ndef semantic_document_search(query: str, k: int = 5, filter_type: str = None) -> List[Dict]:\n    \"\"\"Search for similar documents using semantic similarity\"\"\"\n    global vector_store\n    \n    if not vector_store:\n        return []\n    \n    try:\n        filter_dict = None\n        if filter_type:\n            filter_dict = {\"type\": filter_type}\n        \n        results = vector_store.similarity_search_with_score(\n            query, \n            k=k,\n            filter=filter_dict\n        )\n        \n        search_results = []\n        for doc, score in results:\n            search_results.append({\n                \"content\": doc.page_content[:500],\n                \"metadata\": doc.metadata,\n                \"similarity_score\": round(1 - score, 4)\n            })\n        \n        return search_results\n    except Exception as e:\n        print(f\"[RAG] Semantic search error: {e}\")\n        return []\n\n\ndef find_similar_verifications(verification: Dict, k: int = 3) -> List[Dict]:\n    \"\"\"Find similar past verifications for fraud detection\"\"\"\n    query = f\"\"\"\n    Document type: {verification.get('documentType', '')}\n    Customer: {verification.get('customerName', '')}\n    Risk indicators: {json.dumps(verification.get('riskInsights', []))}\n    \"\"\"\n    \n    return semantic_document_search(query, k=k, filter_type=\"verification\")\n\n\ndef find_matching_fraud_patterns(verification: Dict, k: int = 3) -> List[Dict]:\n    \"\"\"Find fraud patterns that may match this verification\"\"\"\n    risk_insights = verification.get('riskInsights', [])\n    ocr_fields = verification.get('ocrFields', [])\n    \n    query = f\"\"\"\n    Document issues and risk factors:\n    Risk insights: {json.dumps(risk_insights)}\n    OCR confidence levels: {json.dumps([{'field': f.get('fieldName'), 'confidence': f.get('confidence')} for f in ocr_fields])}\n    Document type: {verification.get('documentType', '')}\n    Risk score: {verification.get('riskScore', 0)}\n    \"\"\"\n    \n    return semantic_document_search(query, k=k, filter_type=\"fraud_pattern\")\n\n\ndef rag_enhanced_chat(verification: Dict, user_message: str, chat_history: List[Dict]) -> str:\n    \"\"\"RAG-enhanced chat with document context retrieval\"\"\"\n    global llm, vector_store\n    \n    if not llm:\n        return \"AI service is currently unavailable. Please try again later.\"\n    \n    try:\n        context_docs = []\n        \n        similar_docs = find_similar_verifications(verification, k=2)\n        matching_patterns = find_matching_fraud_patterns(verification, k=2)\n        \n        similar_context = \"\"\n        if similar_docs:\n            similar_context = \"\\n\\nSimilar Past Verifications:\\n\"\n            for i, doc in enumerate(similar_docs, 1):\n                similar_context += f\"{i}. {doc['metadata'].get('customer_name', 'Unknown')} - \"\n                similar_context += f\"Risk: {doc['metadata'].get('risk_level', 'unknown')}, \"\n                similar_context += f\"Status: {doc['metadata'].get('status', 'unknown')}\\n\"\n        \n        pattern_context = \"\"\n        if matching_patterns:\n            pattern_context = \"\\n\\nPotentially Matching Fraud Patterns:\\n\"\n            for i, pattern in enumerate(matching_patterns, 1):\n                pattern_context += f\"{i}. {pattern['metadata'].get('name', 'Unknown')} - \"\n                pattern_context += f\"Technique: {pattern['metadata'].get('technique', 'unknown')}\\n\"\n        \n        system_prompt = f\"\"\"You are an expert KYC compliance analyst AI assistant powered by advanced RAG technology.\nYou have access to a knowledge base of past verifications and fraud patterns.\n\nCurrent Document Under Review:\n- Type: {verification.get('documentType', '').replace('_', ' ').title()}\n- Customer: {verification.get('customerName', 'Unknown')}\n- Risk Score: {verification.get('riskScore', 0)}/100 ({verification.get('riskLevel', 'unknown').upper()} risk)\n- Status: {verification.get('status', 'pending').replace('_', ' ').title()}\n\nExtracted OCR Data:\n{json.dumps(verification.get('ocrFields', []), indent=2)}\n\nRisk Insights:\n{json.dumps(verification.get('riskInsights', []), indent=2)}\n{similar_context}\n{pattern_context}\n\nProvide expert analysis and recommendations based on the document data and your knowledge base.\nBe concise but thorough. Cite similar cases or patterns when relevant.\"\"\"\n\n        messages = [SystemMessage(content=system_prompt)]\n        \n        for msg in chat_history[-6:]:\n            if msg.get(\"role\") == \"user\":\n                messages.append(HumanMessage(content=msg.get(\"content\", \"\")))\n            elif msg.get(\"role\") == \"assistant\":\n                messages.append(AIMessage(content=msg.get(\"content\", \"\")))\n        \n        messages.append(HumanMessage(content=user_message))\n        \n        response = llm.invoke(messages)\n        return response.content\n        \n    except Exception as e:\n        print(f\"[RAG] Chat error: {e}\")\n        return f\"I encountered an error processing your request. Based on the document's risk score of {verification.get('riskScore', 0)}, this is classified as {verification.get('riskLevel', 'unknown')} risk.\"\n\n\ndef ocr_analysis_node(state: VerificationState) -> VerificationState:\n    \"\"\"LangGraph node: Analyze OCR data quality\"\"\"\n    state[\"workflow_steps\"] = [\"OCR Analysis: Checking extracted field quality\"]\n    \n    ocr_data = state.get(\"ocr_data\", {})\n    fields = ocr_data.get(\"extracted_fields\", [])\n    \n    low_confidence_fields = [f for f in fields if f.get(\"confidence\", 100) < 80]\n    \n    if low_confidence_fields:\n        state[\"fraud_indicators\"] = state.get(\"fraud_indicators\", []) + [\n            f\"Low OCR confidence on: {', '.join([f.get('fieldName', 'unknown') for f in low_confidence_fields])}\"\n        ]\n    \n    return state\n\n\ndef fraud_detection_node(state: VerificationState) -> VerificationState:\n    \"\"\"LangGraph node: Check for fraud patterns using vector similarity\"\"\"\n    state[\"workflow_steps\"] = [\"Fraud Detection: Matching against known patterns\"]\n    \n    verification = {\n        \"documentType\": state.get(\"document_type\", \"\"),\n        \"riskScore\": state.get(\"risk_score\", 0),\n        \"riskInsights\": [],\n        \"ocrFields\": state.get(\"ocr_data\", {}).get(\"extracted_fields\", [])\n    }\n    \n    matching_patterns = find_matching_fraud_patterns(verification, k=3)\n    \n    high_confidence_matches = [\n        p for p in matching_patterns \n        if p.get(\"similarity_score\", 0) > 0.7\n    ]\n    \n    if high_confidence_matches:\n        for pattern in high_confidence_matches:\n            state[\"fraud_indicators\"] = state.get(\"fraud_indicators\", []) + [\n                f\"Potential {pattern['metadata'].get('name', 'fraud')} detected (similarity: {pattern['similarity_score']:.0%})\"\n            ]\n    \n    return state\n\n\ndef similar_docs_node(state: VerificationState) -> VerificationState:\n    \"\"\"LangGraph node: Find similar past verifications\"\"\"\n    state[\"workflow_steps\"] = [\"Historical Analysis: Searching similar documents\"]\n    \n    verification = {\n        \"documentType\": state.get(\"document_type\", \"\"),\n        \"customerName\": \"\",\n        \"riskInsights\": []\n    }\n    \n    similar = find_similar_verifications(verification, k=3)\n    state[\"similar_documents\"] = similar\n    \n    high_risk_similar = [d for d in similar if d[\"metadata\"].get(\"risk_level\") == \"high\"]\n    if high_risk_similar:\n        state[\"fraud_indicators\"] = state.get(\"fraud_indicators\", []) + [\n            f\"Similar to {len(high_risk_similar)} high-risk document(s)\"\n        ]\n    \n    return state\n\n\ndef compliance_check_node(state: VerificationState) -> VerificationState:\n    \"\"\"LangGraph node: Run compliance checks\"\"\"\n    state[\"workflow_steps\"] = [\"Compliance Check: Validating regulatory requirements\"]\n    \n    checks = {\n        \"document_type_valid\": state.get(\"document_type\") in [\"passport\", \"drivers_license\", \"national_id\"],\n        \"has_required_fields\": True,\n        \"expiry_valid\": True,\n        \"issuing_authority_valid\": True\n    }\n    \n    ocr_data = state.get(\"ocr_data\", {})\n    fields = ocr_data.get(\"extracted_fields\", [])\n    field_names = [f.get(\"fieldName\", \"\").lower() for f in fields]\n    \n    required_fields = [\"full name\", \"document number\", \"date of birth\"]\n    missing_fields = [f for f in required_fields if f not in [fn.lower() for fn in field_names]]\n    \n    if missing_fields:\n        checks[\"has_required_fields\"] = False\n        checks[\"missing_fields\"] = missing_fields\n        state[\"fraud_indicators\"] = state.get(\"fraud_indicators\", []) + [\n            f\"Missing required fields: {', '.join(missing_fields)}\"\n        ]\n    \n    state[\"compliance_check\"] = checks\n    return state\n\n\ndef recommendation_node(state: VerificationState) -> VerificationState:\n    \"\"\"LangGraph node: Generate final recommendation\"\"\"\n    state[\"workflow_steps\"] = [\"Final Analysis: Generating recommendation\"]\n    \n    fraud_indicators = state.get(\"fraud_indicators\", [])\n    risk_score = state.get(\"risk_score\", 50)\n    compliance = state.get(\"compliance_check\", {})\n    \n    if risk_score < 30 and len(fraud_indicators) == 0 and compliance.get(\"has_required_fields\", True):\n        recommendation = \"APPROVE - Low risk, no fraud indicators, all compliance checks passed\"\n    elif risk_score > 70 or len(fraud_indicators) > 2:\n        recommendation = f\"REJECT - High risk ({risk_score}/100) with {len(fraud_indicators)} fraud indicator(s)\"\n    else:\n        recommendation = f\"MANUAL REVIEW - Medium risk ({risk_score}/100) with {len(fraud_indicators)} indicator(s) requiring analyst attention\"\n    \n    state[\"final_recommendation\"] = recommendation\n    return state\n\n\ndef create_verification_workflow() -> StateGraph:\n    \"\"\"Create the LangGraph verification workflow\"\"\"\n    workflow = StateGraph(VerificationState)\n    \n    workflow.add_node(\"ocr_analysis\", ocr_analysis_node)\n    workflow.add_node(\"fraud_detection\", fraud_detection_node)\n    workflow.add_node(\"similar_docs\", similar_docs_node)\n    workflow.add_node(\"compliance_check\", compliance_check_node)\n    workflow.add_node(\"recommendation\", recommendation_node)\n    \n    workflow.set_entry_point(\"ocr_analysis\")\n    workflow.add_edge(\"ocr_analysis\", \"fraud_detection\")\n    workflow.add_edge(\"fraud_detection\", \"similar_docs\")\n    workflow.add_edge(\"similar_docs\", \"compliance_check\")\n    workflow.add_edge(\"compliance_check\", \"recommendation\")\n    workflow.add_edge(\"recommendation\", END)\n    \n    return workflow.compile()\n\n\nverification_workflow = None\ntry:\n    verification_workflow = create_verification_workflow()\n    print(\"[RAG] LangGraph verification workflow created\")\nexcept Exception as e:\n    print(f\"[RAG] Workflow creation error: {e}\")\n\n\ndef run_verification_workflow(verification: Dict, ocr_result: Dict) -> Dict:\n    \"\"\"Run the full LangGraph verification workflow\"\"\"\n    global verification_workflow\n    \n    if not verification_workflow:\n        return {\n            \"workflow_steps\": [\"Workflow unavailable\"],\n            \"fraud_indicators\": [],\n            \"final_recommendation\": \"MANUAL REVIEW - Automated workflow unavailable\"\n        }\n    \n    try:\n        initial_state = VerificationState(\n            verification_id=verification.get(\"id\", \"\"),\n            document_type=verification.get(\"documentType\", \"\"),\n            ocr_data=ocr_result or {},\n            risk_score=verification.get(\"riskScore\", 50),\n            risk_level=verification.get(\"riskLevel\", \"medium\"),\n            fraud_indicators=[],\n            similar_documents=[],\n            compliance_check={},\n            final_recommendation=\"\",\n            workflow_steps=[]\n        )\n        \n        final_state = verification_workflow.invoke(initial_state)\n        \n        return {\n            \"workflow_steps\": final_state.get(\"workflow_steps\", []),\n            \"fraud_indicators\": final_state.get(\"fraud_indicators\", []),\n            \"similar_documents\": final_state.get(\"similar_documents\", []),\n            \"compliance_check\": final_state.get(\"compliance_check\", {}),\n            \"final_recommendation\": final_state.get(\"final_recommendation\", \"\")\n        }\n    except Exception as e:\n        print(f\"[RAG] Workflow execution error: {e}\")\n        return {\n            \"workflow_steps\": [f\"Error: {str(e)}\"],\n            \"fraud_indicators\": [],\n            \"final_recommendation\": \"MANUAL REVIEW - Workflow error\"\n        }\n\n\ndef get_knowledge_base_stats() -> Dict:\n    \"\"\"Get statistics about the knowledge base\"\"\"\n    global vector_store\n    \n    if not vector_store:\n        return {\"status\": \"unavailable\", \"total_documents\": 0}\n    \n    try:\n        collection = vector_store._collection\n        count = collection.count()\n        \n        return {\n            \"status\": \"active\",\n            \"total_documents\": count,\n            \"embedding_model\": \"text-embedding-3-small\",\n            \"llm_model\": \"gpt-4o\",\n            \"vector_db\": \"ChromaDB\"\n        }\n    except Exception as e:\n        return {\"status\": \"error\", \"error\": str(e)}\n\n\ndef analyze_document_with_rag(verification: Dict, ocr_result: Dict) -> Dict:\n    \"\"\"Complete RAG-powered document analysis\"\"\"\n    \n    create_document_embedding(verification)\n    \n    workflow_result = run_verification_workflow(verification, ocr_result)\n    \n    similar_docs = find_similar_verifications(verification, k=3)\n    matching_patterns = find_matching_fraud_patterns(verification, k=3)\n    \n    return {\n        \"workflow_analysis\": workflow_result,\n        \"similar_verifications\": similar_docs,\n        \"matching_fraud_patterns\": matching_patterns,\n        \"knowledge_base_stats\": get_knowledge_base_stats()\n    }\n","path":null,"size_bytes":19041,"size_tokens":null},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { AlertCircle, Lock, User } from \"lucide-react\";\nimport verifaiHero from \"@assets/VerifAI (1)_1764611697534.png\";\n\nexport default function Login() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const { login, isLoggingIn } = useAuth();\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    \n    if (!username || !password) {\n      setError(\"Please enter both username and password\");\n      return;\n    }\n\n    login(\n      { username, password },\n      {\n        onError: () => {\n          setError(\"Invalid credentials. Please try again.\");\n        },\n      }\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black flex items-center justify-center p-6\">\n      <div className=\"w-full max-w-5xl flex items-stretch rounded-xl overflow-hidden shadow-2xl\">\n        <div className=\"hidden lg:flex lg:w-1/2 bg-[#050d1a] items-center justify-center\">\n          <img \n            src={verifaiHero} \n            alt=\"VerifAI - AI-Powered KYC Verification Platform\" \n            className=\"w-full h-auto object-contain\"\n          />\n        </div>\n\n        <div className=\"w-full lg:w-1/2 bg-white p-6 flex items-center justify-center\">\n          <div className=\"w-full max-w-sm\">\n            <div className=\"text-center mb-6 lg:hidden\">\n              <h1 className=\"text-2xl font-bold text-slate-900\">VerifAI</h1>\n              <p className=\"text-slate-600 mt-1 text-sm\">AI-Powered KYC Verification Platform</p>\n            </div>\n\n            <Card className=\"shadow-none border-0\">\n              <CardHeader className=\"space-y-1 px-0 pb-4\">\n                <CardTitle className=\"text-xl\">Sign In</CardTitle>\n                <CardDescription className=\"text-sm\">\n                  Enter your credentials to access the platform\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"px-0 pt-0\">\n                <form onSubmit={handleSubmit} className=\"space-y-3\">\n                  {error && (\n                    <div className=\"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-md text-sm\" data-testid=\"error-login\">\n                      <AlertCircle className=\"w-4 h-4\" />\n                      {error}\n                    </div>\n                  )}\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"username\">Username</Label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        id=\"username\"\n                        type=\"text\"\n                        placeholder=\"Enter your username\"\n                        value={username}\n                        onChange={(e) => setUsername(e.target.value)}\n                        className=\"pl-10\"\n                        data-testid=\"input-username\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"password\">Password</Label>\n                    <div className=\"relative\">\n                      <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Enter your password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        className=\"pl-10\"\n                        data-testid=\"input-password\"\n                      />\n                    </div>\n                  </div>\n\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\" \n                    disabled={isLoggingIn}\n                    data-testid=\"button-login\"\n                  >\n                    {isLoggingIn ? \"Signing in...\" : \"Sign In\"}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":4578,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { TopNavbar } from \"@/components/TopNavbar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Upload from \"@/pages/Upload\";\nimport VerificationDetail from \"@/pages/VerificationDetail\";\nimport Integrations from \"@/pages/Integrations\";\nimport Patterns from \"@/pages/Patterns\";\nimport Settings from \"@/pages/Settings\";\nimport AuditTrail from \"@/pages/AuditTrail\";\nimport AIArchitecture from \"@/pages/AIArchitecture\";\nimport TechnicalDetails from \"@/pages/TechnicalDetails\";\nimport Login from \"@/pages/Login\";\nimport NotFound from \"@/pages/not-found\";\nimport { Loader2 } from \"lucide-react\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Dashboard} />\n      <Route path=\"/upload\" component={Upload} />\n      <Route path=\"/verification/:id\" component={VerificationDetail} />\n      <Route path=\"/integrations\" component={Integrations} />\n      <Route path=\"/patterns\" component={Patterns} />\n      <Route path=\"/settings\" component={Settings} />\n      <Route path=\"/audit\" component={AuditTrail} />\n      <Route path=\"/ai-architecture\" component={AIArchitecture} />\n      <Route path=\"/technical-details\" component={TechnicalDetails} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AuthenticatedApp() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"flex flex-col items-center gap-3\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <TopNavbar />\n      <main>\n        <Router />\n      </main>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthenticatedApp />\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":2387,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"chromadb>=1.3.5\",\n    \"flask>=3.1.2\",\n    \"flask-cors>=6.0.1\",\n    \"langchain>=1.1.0\",\n    \"langchain-chroma>=1.0.0\",\n    \"langchain-community>=0.4.1\",\n    \"langchain-openai>=1.1.0\",\n    \"langgraph>=1.0.4\",\n    \"openai>=2.8.1\",\n    \"pillow>=12.0.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"python-dotenv>=1.2.1\",\n    \"tiktoken>=0.12.0\",\n]\n","path":null,"size_bytes":482,"size_tokens":null},"python_backend/app.py":{"content":"import os\nimport uuid\nimport json\nimport base64\nfrom datetime import datetime, timedelta\nfrom flask import Flask, request, jsonify, send_file\nfrom flask_cors import CORS\nfrom openai import OpenAI\nfrom io import BytesIO\nimport random\nimport psycopg2\nfrom psycopg2.extras import RealDictCursor\n\napp = Flask(__name__)\nCORS(app, origins=\"*\")\n\nclient = OpenAI(\n    api_key=os.environ.get(\"OPENAI_API_KEY\")\n)\n\ntry:\n    from rag_service import (\n        rag_enhanced_chat,\n        create_document_embedding,\n        store_fraud_pattern_embeddings,\n        semantic_document_search,\n        find_similar_verifications,\n        find_matching_fraud_patterns,\n        run_verification_workflow,\n        analyze_document_with_rag,\n        get_knowledge_base_stats,\n        init_langchain\n    )\n    RAG_ENABLED = True\n    print(\"[python] RAG service loaded successfully\")\nexcept Exception as e:\n    RAG_ENABLED = False\n    print(f\"[python] RAG service not available: {e}\")\n\nDATABASE_URL = os.environ.get(\"DATABASE_URL\")\n\ndef get_db_connection():\n    \"\"\"Get a database connection\"\"\"\n    conn = psycopg2.connect(DATABASE_URL, cursor_factory=RealDictCursor)\n    return conn\n\ndef init_db():\n    \"\"\"Initialize database tables\"\"\"\n    conn = get_db_connection()\n    cur = conn.cursor()\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS verifications (\n            id TEXT PRIMARY KEY,\n            document_type TEXT,\n            document_url TEXT,\n            status TEXT,\n            risk_score INTEGER,\n            risk_level TEXT,\n            customer_name TEXT,\n            submitted_at TIMESTAMP,\n            reviewed_at TIMESTAMP,\n            ocr_fields JSONB,\n            risk_insights JSONB,\n            validation_results JSONB\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS chat_messages (\n            id TEXT PRIMARY KEY,\n            verification_id TEXT REFERENCES verifications(id),\n            role TEXT,\n            content TEXT,\n            timestamp TIMESTAMP\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS settings (\n            id INTEGER PRIMARY KEY DEFAULT 1,\n            auto_approve_threshold INTEGER DEFAULT 30,\n            high_risk_threshold INTEGER DEFAULT 70,\n            email_notifications BOOLEAN DEFAULT TRUE,\n            in_app_notifications BOOLEAN DEFAULT TRUE,\n            auto_reject_high_risk BOOLEAN DEFAULT FALSE\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS audit_logs (\n            id TEXT PRIMARY KEY,\n            action TEXT NOT NULL,\n            entity_type TEXT NOT NULL,\n            entity_id TEXT,\n            user_id TEXT DEFAULT 'system',\n            user_name TEXT DEFAULT 'System',\n            details JSONB,\n            ip_address TEXT,\n            timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS batch_jobs (\n            id TEXT PRIMARY KEY,\n            name TEXT NOT NULL,\n            status TEXT DEFAULT 'pending',\n            total_documents INTEGER DEFAULT 0,\n            processed_documents INTEGER DEFAULT 0,\n            successful_documents INTEGER DEFAULT 0,\n            failed_documents INTEGER DEFAULT 0,\n            verification_ids JSONB DEFAULT '[]',\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            started_at TIMESTAMP,\n            completed_at TIMESTAMP,\n            error_message TEXT\n        )\n    \"\"\")\n    \n    cur.execute(\"SELECT COUNT(*) as count FROM settings\")\n    if cur.fetchone()[\"count\"] == 0:\n        cur.execute(\"\"\"\n            INSERT INTO settings (id, auto_approve_threshold, high_risk_threshold, \n                                  email_notifications, in_app_notifications, auto_reject_high_risk)\n            VALUES (1, 30, 70, TRUE, TRUE, FALSE)\n        \"\"\")\n    \n    conn.commit()\n    cur.close()\n    conn.close()\n\ntry:\n    init_db()\n    print(\"[python] Database initialized successfully\")\nexcept Exception as e:\n    print(f\"[python] Database initialization warning: {e}\")\n\ndef get_settings():\n    \"\"\"Get settings from database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM settings WHERE id = 1\")\n        row = cur.fetchone()\n        cur.close()\n        conn.close()\n        if row:\n            return {\n                \"autoApproveThreshold\": row[\"auto_approve_threshold\"],\n                \"highRiskThreshold\": row[\"high_risk_threshold\"],\n                \"emailNotifications\": row[\"email_notifications\"],\n                \"inAppNotifications\": row[\"in_app_notifications\"],\n                \"autoRejectHighRisk\": row[\"auto_reject_high_risk\"]\n            }\n    except:\n        pass\n    return {\n        \"autoApproveThreshold\": 30,\n        \"highRiskThreshold\": 70,\n        \"emailNotifications\": True,\n        \"inAppNotifications\": True,\n        \"autoRejectHighRisk\": False\n    }\n\ndef save_settings(settings_data):\n    \"\"\"Save settings to database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            UPDATE settings SET \n                auto_approve_threshold = %s,\n                high_risk_threshold = %s,\n                email_notifications = %s,\n                in_app_notifications = %s,\n                auto_reject_high_risk = %s\n            WHERE id = 1\n        \"\"\", (\n            settings_data.get(\"autoApproveThreshold\", 30),\n            settings_data.get(\"highRiskThreshold\", 70),\n            settings_data.get(\"emailNotifications\", True),\n            settings_data.get(\"inAppNotifications\", True),\n            settings_data.get(\"autoRejectHighRisk\", False)\n        ))\n        conn.commit()\n        cur.close()\n        conn.close()\n    except Exception as e:\n        print(f\"Settings save error: {e}\")\n\nintegrations = [\n    {\n        \"id\": \"dmv-1\",\n        \"name\": \"DMV Integration\",\n        \"type\": \"dmv\",\n        \"status\": \"connected\",\n        \"lastSync\": datetime.now().isoformat(),\n        \"description\": \"Validates driver's license numbers against motor vehicle records\"\n    },\n    {\n        \"id\": \"passport-1\",\n        \"name\": \"Passport Authority\",\n        \"type\": \"passport_authority\",\n        \"status\": \"pending\",\n        \"description\": \"Verifies passport numbers with the issuing government authority\"\n    },\n    {\n        \"id\": \"ssa-1\",\n        \"name\": \"SSA Integration\",\n        \"type\": \"ssa\",\n        \"status\": \"disconnected\",\n        \"description\": \"Cross-references Social Security numbers for identity confirmation\"\n    }\n]\n\nfraud_patterns = [\n    {\n        \"id\": \"pattern-1\",\n        \"name\": \"Font Substitution\",\n        \"description\": \"Detects when document text uses fonts that don't match official templates\",\n        \"technique\": \"Font Analysis\",\n        \"confidenceScore\": 94\n    },\n    {\n        \"id\": \"pattern-2\",\n        \"name\": \"Photo Manipulation\",\n        \"description\": \"Identifies edited or replaced photos using ELA analysis\",\n        \"technique\": \"Image Forensics\",\n        \"confidenceScore\": 91\n    },\n    {\n        \"id\": \"pattern-3\",\n        \"name\": \"Metadata Tampering\",\n        \"description\": \"Detects signs of editing software in file metadata\",\n        \"technique\": \"Metadata Inspection\",\n        \"confidenceScore\": 88\n    },\n    {\n        \"id\": \"pattern-4\",\n        \"name\": \"MRZ Inconsistency\",\n        \"description\": \"Identifies mismatches between MRZ data and visual text\",\n        \"technique\": \"Document Analysis\",\n        \"confidenceScore\": 96\n    },\n    {\n        \"id\": \"pattern-5\",\n        \"name\": \"Security Feature Absence\",\n        \"description\": \"Detects missing or incorrectly placed security features\",\n        \"technique\": \"Layout Validation\",\n        \"confidenceScore\": 89\n    },\n    {\n        \"id\": \"pattern-6\",\n        \"name\": \"Date Format Anomaly\",\n        \"description\": \"Identifies incorrect date formats for the document's issuing country\",\n        \"technique\": \"Document Analysis\",\n        \"confidenceScore\": 92\n    }\n]\n\ndef db_row_to_verification(row):\n    \"\"\"Convert database row to verification dict\"\"\"\n    return {\n        \"id\": row[\"id\"],\n        \"documentType\": row[\"document_type\"],\n        \"documentUrl\": row[\"document_url\"] or \"\",\n        \"status\": row[\"status\"],\n        \"riskScore\": row[\"risk_score\"],\n        \"riskLevel\": row[\"risk_level\"],\n        \"customerName\": row[\"customer_name\"],\n        \"submittedAt\": row[\"submitted_at\"].isoformat() if row[\"submitted_at\"] else None,\n        \"reviewedAt\": row[\"reviewed_at\"].isoformat() if row[\"reviewed_at\"] else None,\n        \"ocrFields\": row[\"ocr_fields\"] or [],\n        \"riskInsights\": row[\"risk_insights\"] or [],\n        \"validationResults\": row[\"validation_results\"] or [],\n        \"chatHistory\": []\n    }\n\ndef get_all_verifications():\n    \"\"\"Get all verifications from database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM verifications ORDER BY submitted_at DESC\")\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [db_row_to_verification(row) for row in rows]\n    except Exception as e:\n        print(f\"Get verifications error: {e}\")\n        return []\n\ndef get_verification_by_id(ver_id):\n    \"\"\"Get a single verification by ID\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM verifications WHERE id = %s\", (ver_id,))\n        row = cur.fetchone()\n        cur.close()\n        conn.close()\n        if row:\n            return db_row_to_verification(row)\n    except Exception as e:\n        print(f\"Get verification error: {e}\")\n    return None\n\ndef save_verification(verification):\n    \"\"\"Save or update a verification in database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            INSERT INTO verifications (id, document_type, document_url, status, risk_score, \n                                       risk_level, customer_name, submitted_at, reviewed_at,\n                                       ocr_fields, risk_insights, validation_results)\n            VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)\n            ON CONFLICT (id) DO UPDATE SET\n                status = EXCLUDED.status,\n                reviewed_at = EXCLUDED.reviewed_at\n        \"\"\", (\n            verification[\"id\"],\n            verification[\"documentType\"],\n            verification[\"documentUrl\"],\n            verification[\"status\"],\n            verification[\"riskScore\"],\n            verification[\"riskLevel\"],\n            verification[\"customerName\"],\n            verification.get(\"submittedAt\"),\n            verification.get(\"reviewedAt\"),\n            json.dumps(verification.get(\"ocrFields\", [])),\n            json.dumps(verification.get(\"riskInsights\", [])),\n            json.dumps(verification.get(\"validationResults\", []))\n        ))\n        conn.commit()\n        cur.close()\n        conn.close()\n    except Exception as e:\n        print(f\"Save verification error: {e}\")\n\ndef get_chat_history(ver_id):\n    \"\"\"Get chat history for a verification\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            SELECT id, role, content, timestamp \n            FROM chat_messages \n            WHERE verification_id = %s \n            ORDER BY timestamp ASC\n        \"\"\", (ver_id,))\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [{\"id\": r[\"id\"], \"role\": r[\"role\"], \"content\": r[\"content\"], \n                 \"timestamp\": r[\"timestamp\"].isoformat() if r[\"timestamp\"] else None} for r in rows]\n    except Exception as e:\n        print(f\"Get chat history error: {e}\")\n        return []\n\ndef save_chat_message(ver_id, message):\n    \"\"\"Save a chat message to database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            INSERT INTO chat_messages (id, verification_id, role, content, timestamp)\n            VALUES (%s, %s, %s, %s, %s)\n        \"\"\", (message[\"id\"], ver_id, message[\"role\"], message[\"content\"], message.get(\"timestamp\")))\n        conn.commit()\n        cur.close()\n        conn.close()\n    except Exception as e:\n        print(f\"Save chat message error: {e}\")\n\ndef log_audit_event(action, entity_type, entity_id=None, user_id=\"system\", user_name=\"System\", details=None, ip_address=None):\n    \"\"\"Log an audit event to the database\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            INSERT INTO audit_logs (id, action, entity_type, entity_id, user_id, user_name, details, ip_address, timestamp)\n            VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)\n        \"\"\", (\n            str(uuid.uuid4()),\n            action,\n            entity_type,\n            entity_id,\n            user_id,\n            user_name,\n            json.dumps(details) if details else None,\n            ip_address,\n            datetime.now()\n        ))\n        conn.commit()\n        cur.close()\n        conn.close()\n    except Exception as e:\n        print(f\"Audit log error: {e}\")\n\ndef get_audit_logs(filters=None, limit=100, offset=0):\n    \"\"\"Get audit logs with optional filtering\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        \n        query = \"SELECT * FROM audit_logs WHERE 1=1\"\n        params = []\n        \n        if filters:\n            if filters.get(\"action\"):\n                query += \" AND action = %s\"\n                params.append(filters[\"action\"])\n            if filters.get(\"entity_type\"):\n                query += \" AND entity_type = %s\"\n                params.append(filters[\"entity_type\"])\n            if filters.get(\"entity_id\"):\n                query += \" AND entity_id = %s\"\n                params.append(filters[\"entity_id\"])\n            if filters.get(\"user_id\"):\n                query += \" AND user_id = %s\"\n                params.append(filters[\"user_id\"])\n            if filters.get(\"start_date\"):\n                query += \" AND timestamp >= %s\"\n                params.append(filters[\"start_date\"])\n            if filters.get(\"end_date\"):\n                query += \" AND timestamp <= %s\"\n                params.append(filters[\"end_date\"])\n        \n        query += \" ORDER BY timestamp DESC LIMIT %s OFFSET %s\"\n        params.extend([limit, offset])\n        \n        cur.execute(query, params)\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        \n        return [{\n            \"id\": row[\"id\"],\n            \"action\": row[\"action\"],\n            \"entityType\": row[\"entity_type\"],\n            \"entityId\": row[\"entity_id\"],\n            \"userId\": row[\"user_id\"],\n            \"userName\": row[\"user_name\"],\n            \"details\": row[\"details\"],\n            \"ipAddress\": row[\"ip_address\"],\n            \"timestamp\": row[\"timestamp\"].isoformat() if row[\"timestamp\"] else None\n        } for row in rows]\n    except Exception as e:\n        print(f\"Get audit logs error: {e}\")\n        return []\n\ndef get_audit_log_count(filters=None):\n    \"\"\"Get total count of audit logs with optional filtering\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        \n        query = \"SELECT COUNT(*) as count FROM audit_logs WHERE 1=1\"\n        params = []\n        \n        if filters:\n            if filters.get(\"action\"):\n                query += \" AND action = %s\"\n                params.append(filters[\"action\"])\n            if filters.get(\"entity_type\"):\n                query += \" AND entity_type = %s\"\n                params.append(filters[\"entity_type\"])\n            if filters.get(\"entity_id\"):\n                query += \" AND entity_id = %s\"\n                params.append(filters[\"entity_id\"])\n            if filters.get(\"user_id\"):\n                query += \" AND user_id = %s\"\n                params.append(filters[\"user_id\"])\n            if filters.get(\"start_date\"):\n                query += \" AND timestamp >= %s\"\n                params.append(filters[\"start_date\"])\n            if filters.get(\"end_date\"):\n                query += \" AND timestamp <= %s\"\n                params.append(filters[\"end_date\"])\n        \n        cur.execute(query, params)\n        count = cur.fetchone()[\"count\"]\n        cur.close()\n        conn.close()\n        return count\n    except Exception as e:\n        print(f\"Get audit log count error: {e}\")\n        return 0\n\ndef get_batch_job(job_id):\n    \"\"\"Get a batch job by ID\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM batch_jobs WHERE id = %s\", (job_id,))\n        row = cur.fetchone()\n        cur.close()\n        conn.close()\n        if row:\n            return {\n                \"id\": row[\"id\"],\n                \"name\": row[\"name\"],\n                \"status\": row[\"status\"],\n                \"totalDocuments\": row[\"total_documents\"],\n                \"processedDocuments\": row[\"processed_documents\"],\n                \"successfulDocuments\": row[\"successful_documents\"],\n                \"failedDocuments\": row[\"failed_documents\"],\n                \"verificationIds\": row[\"verification_ids\"] or [],\n                \"createdAt\": row[\"created_at\"].isoformat() if row[\"created_at\"] else None,\n                \"startedAt\": row[\"started_at\"].isoformat() if row[\"started_at\"] else None,\n                \"completedAt\": row[\"completed_at\"].isoformat() if row[\"completed_at\"] else None,\n                \"errorMessage\": row[\"error_message\"]\n            }\n    except Exception as e:\n        print(f\"Get batch job error: {e}\")\n    return None\n\ndef get_all_batch_jobs():\n    \"\"\"Get all batch jobs\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM batch_jobs ORDER BY created_at DESC\")\n        rows = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [{\n            \"id\": row[\"id\"],\n            \"name\": row[\"name\"],\n            \"status\": row[\"status\"],\n            \"totalDocuments\": row[\"total_documents\"],\n            \"processedDocuments\": row[\"processed_documents\"],\n            \"successfulDocuments\": row[\"successful_documents\"],\n            \"failedDocuments\": row[\"failed_documents\"],\n            \"verificationIds\": row[\"verification_ids\"] or [],\n            \"createdAt\": row[\"created_at\"].isoformat() if row[\"created_at\"] else None,\n            \"startedAt\": row[\"started_at\"].isoformat() if row[\"started_at\"] else None,\n            \"completedAt\": row[\"completed_at\"].isoformat() if row[\"completed_at\"] else None,\n            \"errorMessage\": row[\"error_message\"]\n        } for row in rows]\n    except Exception as e:\n        print(f\"Get batch jobs error: {e}\")\n        return []\n\ndef create_batch_job(name, total_documents):\n    \"\"\"Create a new batch job\"\"\"\n    try:\n        job_id = str(uuid.uuid4())\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            INSERT INTO batch_jobs (id, name, status, total_documents, created_at)\n            VALUES (%s, %s, 'pending', %s, %s)\n        \"\"\", (job_id, name, total_documents, datetime.now()))\n        conn.commit()\n        cur.close()\n        conn.close()\n        return job_id\n    except Exception as e:\n        print(f\"Create batch job error: {e}\")\n        return None\n\ndef update_batch_job(job_id, updates):\n    \"\"\"Update batch job progress\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        \n        set_clauses = []\n        params = []\n        \n        if \"status\" in updates:\n            set_clauses.append(\"status = %s\")\n            params.append(updates[\"status\"])\n        if \"processed_documents\" in updates:\n            set_clauses.append(\"processed_documents = %s\")\n            params.append(updates[\"processed_documents\"])\n        if \"successful_documents\" in updates:\n            set_clauses.append(\"successful_documents = %s\")\n            params.append(updates[\"successful_documents\"])\n        if \"failed_documents\" in updates:\n            set_clauses.append(\"failed_documents = %s\")\n            params.append(updates[\"failed_documents\"])\n        if \"verification_ids\" in updates:\n            set_clauses.append(\"verification_ids = %s\")\n            params.append(json.dumps(updates[\"verification_ids\"]))\n        if \"started_at\" in updates:\n            set_clauses.append(\"started_at = %s\")\n            params.append(updates[\"started_at\"])\n        if \"completed_at\" in updates:\n            set_clauses.append(\"completed_at = %s\")\n            params.append(updates[\"completed_at\"])\n        if \"error_message\" in updates:\n            set_clauses.append(\"error_message = %s\")\n            params.append(updates[\"error_message\"])\n        \n        if set_clauses:\n            params.append(job_id)\n            cur.execute(f\"UPDATE batch_jobs SET {', '.join(set_clauses)} WHERE id = %s\", params)\n            conn.commit()\n        \n        cur.close()\n        conn.close()\n    except Exception as e:\n        print(f\"Update batch job error: {e}\")\n\ndef process_single_document_for_batch(file_content, filename, mime_type):\n    \"\"\"Process a single document as part of a batch job\"\"\"\n    try:\n        ver_id = str(uuid.uuid4())\n        doc_type = detect_document_type(filename)\n        \n        file_base64 = base64.b64encode(file_content).decode(\"utf-8\")\n        document_url = f\"data:{mime_type};base64,{file_base64}\"\n        \n        ocr_result = extract_ocr_with_vision(file_base64, mime_type, doc_type)\n        \n        if ocr_result and \"document_analysis\" in ocr_result:\n            detected_type = ocr_result[\"document_analysis\"].get(\"detected_type\")\n            if detected_type and detected_type in [\"passport\", \"drivers_license\", \"national_id\"]:\n                doc_type = detected_type\n        \n        risk_score = calculate_risk_score(ocr_result, doc_type)\n        risk_level = \"low\" if risk_score < 30 else (\"medium\" if risk_score < 70 else \"high\")\n        \n        current_settings = get_settings()\n        auto_approve = risk_score < current_settings[\"autoApproveThreshold\"]\n        auto_reject = current_settings[\"autoRejectHighRisk\"] and risk_score > current_settings[\"highRiskThreshold\"]\n        \n        status = \"approved\" if auto_approve else (\"rejected\" if auto_reject else \"pending\")\n        \n        ocr_fields = generate_ocr_fields(doc_type, ocr_result)\n        \n        name_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Full Name\"), None)\n        dob_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Date of Birth\"), None)\n        doc_num_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Document Number\"), None)\n        \n        validation_results = []\n        if name_field:\n            validation_results.append({\n                \"fieldName\": \"Full Name\", \n                \"submittedValue\": \"\", \n                \"extractedValue\": name_field[\"value\"], \n                \"isMatch\": True\n            })\n        if dob_field:\n            validation_results.append({\n                \"fieldName\": \"Date of Birth\", \n                \"submittedValue\": \"\", \n                \"extractedValue\": dob_field[\"value\"], \n                \"isMatch\": True\n            })\n        if doc_num_field:\n            validation_results.append({\n                \"fieldName\": \"Document Number\", \n                \"submittedValue\": \"\", \n                \"extractedValue\": doc_num_field[\"value\"], \n                \"isMatch\": True\n            })\n        \n        customer_name = name_field[\"value\"] if name_field else f\"Customer {ver_id[:8]}\"\n        \n        verification = {\n            \"id\": ver_id,\n            \"documentType\": doc_type,\n            \"documentUrl\": document_url,\n            \"status\": status,\n            \"riskScore\": risk_score,\n            \"riskLevel\": risk_level,\n            \"customerName\": customer_name,\n            \"submittedAt\": datetime.now().isoformat(),\n            \"reviewedAt\": datetime.now().isoformat() if status in [\"approved\", \"rejected\"] else None,\n            \"ocrFields\": ocr_fields,\n            \"riskInsights\": generate_risk_insights(risk_score),\n            \"validationResults\": validation_results,\n            \"chatHistory\": []\n        }\n        \n        save_verification(verification)\n        \n        return {\"success\": True, \"verification_id\": ver_id, \"status\": status}\n    except Exception as e:\n        print(f\"Process document error: {e}\")\n        return {\"success\": False, \"error\": str(e)}\n\n\ndef detect_document_type(filename):\n    \"\"\"Simple document type detection based on filename or content\"\"\"\n    filename_lower = filename.lower()\n    if \"passport\" in filename_lower:\n        return \"passport\"\n    elif \"license\" in filename_lower or \"dl\" in filename_lower:\n        return \"drivers_license\"\n    else:\n        return \"national_id\"\n\ndef extract_ocr_with_vision(image_base64, mime_type, doc_type):\n    \"\"\"Use OpenAI Vision to extract text and data from document image\"\"\"\n    try:\n        prompt = f\"\"\"Analyze this {doc_type.replace('_', ' ')} document image and extract all visible text fields.\n\nReturn a JSON object with the following structure:\n{{\n    \"extracted_fields\": [\n        {{\"fieldName\": \"Full Name\", \"value\": \"extracted value\", \"confidence\": 95}},\n        {{\"fieldName\": \"Document Number\", \"value\": \"extracted value\", \"confidence\": 98}},\n        {{\"fieldName\": \"Date of Birth\", \"value\": \"YYYY-MM-DD format\", \"confidence\": 92}},\n        {{\"fieldName\": \"Expiry Date\", \"value\": \"YYYY-MM-DD format\", \"confidence\": 90}},\n        {{\"fieldName\": \"Issuing Country\", \"value\": \"country name\", \"confidence\": 88}}\n    ],\n    \"document_analysis\": {{\n        \"detected_type\": \"passport|drivers_license|national_id\",\n        \"quality_score\": 85,\n        \"is_readable\": true,\n        \"potential_issues\": [\"list any visible issues like blur, damage, etc\"]\n    }}\n}}\n\nOnly include fields that are actually visible in the document. Estimate confidence based on text clarity.\"\"\"\n\n        response = client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=[\n                {\n                    \"role\": \"user\",\n                    \"content\": [\n                        {\"type\": \"text\", \"text\": prompt},\n                        {\n                            \"type\": \"image_url\",\n                            \"image_url\": {\n                                \"url\": f\"data:{mime_type};base64,{image_base64}\",\n                                \"detail\": \"high\"\n                            }\n                        }\n                    ]\n                }\n            ],\n            max_tokens=1000\n        )\n        \n        response_text = response.choices[0].message.content\n        json_start = response_text.find('{')\n        json_end = response_text.rfind('}') + 1\n        if json_start >= 0 and json_end > json_start:\n            result = json.loads(response_text[json_start:json_end])\n            return result\n    except Exception as e:\n        print(f\"Vision OCR error: {e}\")\n    \n    return None\n\ndef calculate_risk_score(ocr_result, doc_type):\n    \"\"\"Calculate risk score based on document analysis\"\"\"\n    base_score = 20\n    \n    if ocr_result and \"document_analysis\" in ocr_result:\n        analysis = ocr_result[\"document_analysis\"]\n        \n        quality = analysis.get(\"quality_score\", 80)\n        if quality < 50:\n            base_score += 30\n        elif quality < 70:\n            base_score += 15\n        \n        issues = analysis.get(\"potential_issues\", [])\n        base_score += len(issues) * 8\n        \n        if not analysis.get(\"is_readable\", True):\n            base_score += 25\n    \n    if ocr_result and \"extracted_fields\" in ocr_result:\n        fields = ocr_result[\"extracted_fields\"]\n        avg_confidence = sum(f.get(\"confidence\", 80) for f in fields) / max(len(fields), 1)\n        if avg_confidence < 70:\n            base_score += 20\n        elif avg_confidence < 85:\n            base_score += 10\n    \n    return min(max(base_score, 5), 95)\n\ndef generate_ocr_fields(doc_type, ocr_result=None):\n    \"\"\"Generate OCR fields from Vision result or fallback to simulation\"\"\"\n    if ocr_result and \"extracted_fields\" in ocr_result:\n        fields = []\n        for i, field in enumerate(ocr_result[\"extracted_fields\"]):\n            fields.append({\n                \"fieldName\": field.get(\"fieldName\", f\"Field {i+1}\"),\n                \"value\": field.get(\"value\", \"\"),\n                \"confidence\": field.get(\"confidence\", 85),\n                \"boundingBox\": {\"x\": 15 + (i % 2) * 45, \"y\": 20 + (i // 2) * 15, \"width\": 30, \"height\": 5}\n            })\n        return fields\n    \n    base_fields = [\n        {\"fieldName\": \"Full Name\", \"value\": \"John Michael Smith\", \"confidence\": 97, \"boundingBox\": {\"x\": 15, \"y\": 20, \"width\": 30, \"height\": 5}},\n        {\"fieldName\": \"Document Number\", \"value\": f\"DOC{random.randint(100000, 999999)}\", \"confidence\": 99, \"boundingBox\": {\"x\": 60, \"y\": 20, \"width\": 25, \"height\": 5}},\n        {\"fieldName\": \"Date of Birth\", \"value\": \"1985-03-15\", \"confidence\": 96, \"boundingBox\": {\"x\": 15, \"y\": 35, \"width\": 20, \"height\": 5}},\n        {\"fieldName\": \"Expiry Date\", \"value\": \"2028-03-14\", \"confidence\": 95, \"boundingBox\": {\"x\": 60, \"y\": 35, \"width\": 20, \"height\": 5}},\n    ]\n    \n    if doc_type == \"passport\":\n        base_fields.append({\"fieldName\": \"MRZ Code\", \"value\": \"P<USAMSMITH<<JOHN<MICHAEL<<<<<<<<<<<<<<<<<<\", \"confidence\": 98, \"boundingBox\": {\"x\": 5, \"y\": 85, \"width\": 90, \"height\": 8}})\n    elif doc_type == \"drivers_license\":\n        base_fields.append({\"fieldName\": \"License Class\", \"value\": \"Class C\", \"confidence\": 94, \"boundingBox\": {\"x\": 15, \"y\": 50, \"width\": 15, \"height\": 5}})\n    \n    return base_fields\n\ndef generate_risk_insights(risk_score):\n    \"\"\"Generate AI-powered risk insights\"\"\"\n    if risk_score < 30:\n        return [\n            {\"category\": \"Document Quality\", \"description\": \"High-resolution image with clear text and security features\", \"severity\": \"low\"},\n            {\"category\": \"Data Consistency\", \"description\": \"All extracted fields match expected patterns\", \"severity\": \"low\"},\n            {\"category\": \"Fraud Detection\", \"description\": \"No suspicious patterns detected\", \"severity\": \"low\"},\n        ]\n    elif risk_score < 70:\n        return [\n            {\"category\": \"Image Quality\", \"description\": \"Some areas of the document are slightly blurred\", \"severity\": \"medium\"},\n            {\"category\": \"Security Features\", \"description\": \"Hologram verification inconclusive\", \"severity\": \"medium\"},\n            {\"category\": \"Data Format\", \"description\": \"Date format slightly unusual for issuing country\", \"severity\": \"low\"},\n        ]\n    else:\n        return [\n            {\"category\": \"Tampering Detection\", \"description\": \"Potential photo manipulation detected\", \"severity\": \"high\"},\n            {\"category\": \"Font Analysis\", \"description\": \"Font inconsistencies found in name field\", \"severity\": \"high\"},\n            {\"category\": \"Metadata\", \"description\": \"File metadata suggests recent editing\", \"severity\": \"medium\"},\n        ]\n\n@app.route(\"/api/health\", methods=[\"GET\"])\ndef health_check():\n    return jsonify({\"status\": \"healthy\", \"timestamp\": datetime.now().isoformat()})\n\n@app.route(\"/api/dashboard\", methods=[\"GET\"])\ndef get_dashboard_route():\n    all_verifications = get_all_verifications()\n    total = len(all_verifications)\n    approved = sum(1 for v in all_verifications if v[\"status\"] == \"approved\")\n    rejected = sum(1 for v in all_verifications if v[\"status\"] == \"rejected\")\n    pending = sum(1 for v in all_verifications if v[\"status\"] in [\"pending\", \"in_review\"])\n    high_risk = sum(1 for v in all_verifications if v[\"riskLevel\"] == \"high\")\n    \n    auto_approval_rate = round((approved / total * 100) if total > 0 else 0)\n    \n    recent = all_verifications[:10]\n    \n    volume_data = []\n    for i in range(30):\n        date = (datetime.now() - timedelta(days=29-i)).strftime(\"%b %d\")\n        target_date = (datetime.now() - timedelta(days=29-i)).date()\n        count = sum(1 for v in all_verifications \n                   if v.get(\"submittedAt\") and datetime.fromisoformat(v[\"submittedAt\"]).date() == target_date)\n        volume_data.append({\"date\": date, \"count\": count})\n    \n    return jsonify({\n        \"totalVerifications\": total,\n        \"approvedCount\": approved,\n        \"rejectedCount\": rejected,\n        \"autoApprovalRate\": auto_approval_rate,\n        \"pendingReview\": pending,\n        \"highRiskFlags\": high_risk,\n        \"recentVerifications\": recent,\n        \"volumeData\": volume_data\n    })\n\n@app.route(\"/api/verifications\", methods=[\"GET\"])\ndef get_verifications_route():\n    return jsonify(get_all_verifications())\n\n@app.route(\"/api/verifications/<verification_id>\", methods=[\"GET\"])\ndef get_verification_route(verification_id):\n    verification = get_verification_by_id(verification_id)\n    if verification:\n        return jsonify(verification)\n    return jsonify({\"error\": \"Verification not found\"}), 404\n\n@app.route(\"/api/verifications\", methods=[\"POST\"])\ndef create_verification():\n    if \"document\" not in request.files:\n        return jsonify({\"error\": \"No document provided\"}), 400\n    \n    file = request.files[\"document\"]\n    if file.filename == \"\":\n        return jsonify({\"error\": \"No file selected\"}), 400\n    \n    ver_id = str(uuid.uuid4())\n    doc_type = detect_document_type(file.filename)\n    \n    file_content = file.read()\n    file_base64 = base64.b64encode(file_content).decode(\"utf-8\")\n    mime_type = file.content_type or \"image/jpeg\"\n    document_url = f\"data:{mime_type};base64,{file_base64}\"\n    \n    ocr_result = extract_ocr_with_vision(file_base64, mime_type, doc_type)\n    \n    if ocr_result and \"document_analysis\" in ocr_result:\n        detected_type = ocr_result[\"document_analysis\"].get(\"detected_type\")\n        if detected_type and detected_type in [\"passport\", \"drivers_license\", \"national_id\"]:\n            doc_type = detected_type\n    \n    risk_score = calculate_risk_score(ocr_result, doc_type)\n    risk_level = \"low\" if risk_score < 30 else (\"medium\" if risk_score < 70 else \"high\")\n    \n    current_settings = get_settings()\n    auto_approve = risk_score < current_settings[\"autoApproveThreshold\"]\n    auto_reject = current_settings[\"autoRejectHighRisk\"] and risk_score > current_settings[\"highRiskThreshold\"]\n    \n    status = \"approved\" if auto_approve else (\"rejected\" if auto_reject else \"pending\")\n    \n    ocr_fields = generate_ocr_fields(doc_type, ocr_result)\n    \n    name_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Full Name\"), None)\n    dob_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Date of Birth\"), None)\n    doc_num_field = next((f for f in ocr_fields if f[\"fieldName\"] == \"Document Number\"), None)\n    \n    validation_results = []\n    if name_field:\n        validation_results.append({\n            \"fieldName\": \"Full Name\", \n            \"submittedValue\": \"\", \n            \"extractedValue\": name_field[\"value\"], \n            \"isMatch\": True\n        })\n    if dob_field:\n        validation_results.append({\n            \"fieldName\": \"Date of Birth\", \n            \"submittedValue\": \"\", \n            \"extractedValue\": dob_field[\"value\"], \n            \"isMatch\": True\n        })\n    if doc_num_field:\n        validation_results.append({\n            \"fieldName\": \"Document Number\", \n            \"submittedValue\": \"\", \n            \"extractedValue\": doc_num_field[\"value\"], \n            \"isMatch\": True\n        })\n    \n    customer_name = name_field[\"value\"] if name_field else f\"Customer {ver_id[:8]}\"\n    \n    verification = {\n        \"id\": ver_id,\n        \"documentType\": doc_type,\n        \"documentUrl\": document_url,\n        \"status\": status,\n        \"riskScore\": risk_score,\n        \"riskLevel\": risk_level,\n        \"customerName\": customer_name,\n        \"submittedAt\": datetime.now().isoformat(),\n        \"reviewedAt\": datetime.now().isoformat() if status in [\"approved\", \"rejected\"] else None,\n        \"ocrFields\": ocr_fields,\n        \"riskInsights\": generate_risk_insights(risk_score),\n        \"validationResults\": validation_results,\n        \"chatHistory\": []\n    }\n    \n    save_verification(verification)\n    \n    log_audit_event(\n        action=\"document_uploaded\",\n        entity_type=\"verification\",\n        entity_id=ver_id,\n        details={\n            \"documentType\": doc_type,\n            \"riskScore\": risk_score,\n            \"riskLevel\": risk_level,\n            \"customerName\": customer_name,\n            \"status\": status\n        },\n        ip_address=request.remote_addr\n    )\n    \n    return jsonify(verification), 201\n\n@app.route(\"/api/verifications/<verification_id>\", methods=[\"PATCH\"])\ndef update_verification_route(verification_id):\n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    \n    data = request.get_json()\n    old_status = verification.get(\"status\")\n    \n    if \"status\" in data:\n        new_status = data[\"status\"]\n        verification[\"status\"] = new_status\n        verification[\"reviewedAt\"] = datetime.now().isoformat()\n        save_verification(verification)\n        \n        action = \"verification_approved\" if new_status == \"approved\" else (\n            \"verification_rejected\" if new_status == \"rejected\" else \"verification_status_changed\"\n        )\n        \n        log_audit_event(\n            action=action,\n            entity_type=\"verification\",\n            entity_id=verification_id,\n            details={\n                \"oldStatus\": old_status,\n                \"newStatus\": new_status,\n                \"customerName\": verification.get(\"customerName\"),\n                \"riskScore\": verification.get(\"riskScore\"),\n                \"riskLevel\": verification.get(\"riskLevel\")\n            },\n            ip_address=request.remote_addr\n        )\n    \n    return jsonify(verification)\n\n@app.route(\"/api/verifications/<verification_id>/chat\", methods=[\"GET\"])\ndef get_chat_history_route(verification_id):\n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    return jsonify(get_chat_history(verification_id))\n\n@app.route(\"/api/verifications/<verification_id>/chat\", methods=[\"POST\"])\ndef send_chat_message_route(verification_id):\n    \"\"\"RAG-enhanced chat endpoint using LangChain\"\"\"\n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    \n    data = request.get_json()\n    content = data.get(\"content\", \"\")\n    \n    if not content:\n        return jsonify({\"error\": \"Message content required\"}), 400\n    \n    user_message = {\n        \"id\": str(uuid.uuid4()),\n        \"role\": \"user\",\n        \"content\": content,\n        \"timestamp\": datetime.now().isoformat()\n    }\n    \n    save_chat_message(verification_id, user_message)\n    \n    chat_history = get_chat_history(verification_id)\n    \n    if RAG_ENABLED:\n        try:\n            assistant_content = rag_enhanced_chat(verification, content, chat_history)\n        except Exception as e:\n            print(f\"[python] RAG chat error, falling back: {e}\")\n            assistant_content = fallback_chat_response(verification, content, chat_history)\n    else:\n        assistant_content = fallback_chat_response(verification, content, chat_history)\n    \n    assistant_message = {\n        \"id\": str(uuid.uuid4()),\n        \"role\": \"assistant\",\n        \"content\": assistant_content,\n        \"timestamp\": datetime.now().isoformat()\n    }\n    \n    save_chat_message(verification_id, assistant_message)\n    \n    return jsonify(assistant_message)\n\n\ndef fallback_chat_response(verification, content, chat_history):\n    \"\"\"Fallback chat when RAG is not available\"\"\"\n    context = f\"\"\"You are an AI assistant helping a compliance analyst review a KYC document verification.\n\nDocument Information:\n- Type: {verification['documentType'].replace('_', ' ').title()}\n- Risk Score: {verification['riskScore']}/100 ({verification['riskLevel'].upper()} risk)\n- Status: {verification['status'].replace('_', ' ').title()}\n\nExtracted Data:\n{json.dumps(verification['ocrFields'], indent=2)}\n\nRisk Insights:\n{json.dumps(verification['riskInsights'], indent=2)}\n\nPlease provide helpful, concise responses about this document. If asked about approval recommendations, consider the risk score and insights.\"\"\"\n\n    try:\n        response = client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=[\n                {\"role\": \"system\", \"content\": context},\n                *[{\"role\": m[\"role\"], \"content\": m[\"content\"]} for m in chat_history[-10:]]\n            ],\n            max_tokens=500\n        )\n        return response.choices[0].message.content\n    except Exception as e:\n        return f\"I'm currently analyzing this document. Based on the risk score of {verification['riskScore']}, this document is classified as {verification['riskLevel']} risk. The OCR extraction identified {len(verification['ocrFields'])} fields with high confidence. Would you like me to explain any specific aspect of this verification?\"\n\n@app.route(\"/api/integrations\", methods=[\"GET\"])\ndef get_integrations_route():\n    return jsonify(integrations)\n\n@app.route(\"/api/patterns\", methods=[\"GET\"])\ndef get_patterns_route():\n    return jsonify(fraud_patterns)\n\n@app.route(\"/api/settings\", methods=[\"GET\"])\ndef get_settings_route():\n    return jsonify(get_settings())\n\n@app.route(\"/api/settings\", methods=[\"PUT\"])\ndef update_settings_route():\n    data = request.get_json()\n    current = get_settings()\n    old_settings = current.copy()\n    current.update(data)\n    save_settings(current)\n    \n    log_audit_event(\n        action=\"settings_updated\",\n        entity_type=\"settings\",\n        details={\"old\": old_settings, \"new\": current},\n        ip_address=request.remote_addr\n    )\n    \n    return jsonify(current)\n\n@app.route(\"/api/audit-logs\", methods=[\"GET\"])\ndef get_audit_logs_route():\n    \"\"\"Get audit logs with optional filtering and pagination\"\"\"\n    filters = {}\n    if request.args.get(\"action\"):\n        filters[\"action\"] = request.args.get(\"action\")\n    if request.args.get(\"entityType\"):\n        filters[\"entity_type\"] = request.args.get(\"entityType\")\n    if request.args.get(\"entityId\"):\n        filters[\"entity_id\"] = request.args.get(\"entityId\")\n    if request.args.get(\"userId\"):\n        filters[\"user_id\"] = request.args.get(\"userId\")\n    if request.args.get(\"startDate\"):\n        filters[\"start_date\"] = request.args.get(\"startDate\")\n    if request.args.get(\"endDate\"):\n        filters[\"end_date\"] = request.args.get(\"endDate\")\n    \n    limit = int(request.args.get(\"limit\", 50))\n    offset = int(request.args.get(\"offset\", 0))\n    \n    logs = get_audit_logs(filters if filters else None, limit, offset)\n    total = get_audit_log_count(filters if filters else None)\n    \n    return jsonify({\n        \"logs\": logs,\n        \"total\": total,\n        \"limit\": limit,\n        \"offset\": offset\n    })\n\n@app.route(\"/api/audit-logs/export\", methods=[\"GET\"])\ndef export_audit_logs_route():\n    \"\"\"Export audit logs as CSV\"\"\"\n    import csv\n    from io import StringIO\n    \n    filters = {}\n    if request.args.get(\"action\"):\n        filters[\"action\"] = request.args.get(\"action\")\n    if request.args.get(\"entityType\"):\n        filters[\"entity_type\"] = request.args.get(\"entityType\")\n    if request.args.get(\"startDate\"):\n        filters[\"start_date\"] = request.args.get(\"startDate\")\n    if request.args.get(\"endDate\"):\n        filters[\"end_date\"] = request.args.get(\"endDate\")\n    \n    logs = get_audit_logs(filters if filters else None, limit=10000, offset=0)\n    \n    output = StringIO()\n    writer = csv.writer(output)\n    writer.writerow([\"Timestamp\", \"Action\", \"Entity Type\", \"Entity ID\", \"User\", \"Details\", \"IP Address\"])\n    \n    for log in logs:\n        writer.writerow([\n            log[\"timestamp\"],\n            log[\"action\"],\n            log[\"entityType\"],\n            log[\"entityId\"] or \"\",\n            log[\"userName\"],\n            json.dumps(log[\"details\"]) if log[\"details\"] else \"\",\n            log[\"ipAddress\"] or \"\"\n        ])\n    \n    output.seek(0)\n    return send_file(\n        BytesIO(output.getvalue().encode('utf-8')),\n        mimetype=\"text/csv\",\n        as_attachment=True,\n        download_name=f\"audit_logs_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv\"\n    )\n\n@app.route(\"/api/audit-logs/stats\", methods=[\"GET\"])\ndef get_audit_stats_route():\n    \"\"\"Get audit log statistics\"\"\"\n    try:\n        conn = get_db_connection()\n        cur = conn.cursor()\n        \n        cur.execute(\"\"\"\n            SELECT action, COUNT(*) as count \n            FROM audit_logs \n            GROUP BY action \n            ORDER BY count DESC\n        \"\"\")\n        actions = [{\"action\": row[\"action\"], \"count\": row[\"count\"]} for row in cur.fetchall()]\n        \n        cur.execute(\"\"\"\n            SELECT DATE(timestamp) as date, COUNT(*) as count \n            FROM audit_logs \n            WHERE timestamp >= NOW() - INTERVAL '30 days'\n            GROUP BY DATE(timestamp) \n            ORDER BY date\n        \"\"\")\n        daily = [{\"date\": row[\"date\"].isoformat() if row[\"date\"] else None, \"count\": row[\"count\"]} for row in cur.fetchall()]\n        \n        cur.execute(\"SELECT COUNT(*) as total FROM audit_logs\")\n        total = cur.fetchone()[\"total\"]\n        \n        cur.close()\n        conn.close()\n        \n        return jsonify({\n            \"totalLogs\": total,\n            \"actionBreakdown\": actions,\n            \"dailyActivity\": daily\n        })\n    except Exception as e:\n        print(f\"Audit stats error: {e}\")\n        return jsonify({\"totalLogs\": 0, \"actionBreakdown\": [], \"dailyActivity\": []})\n\n@app.route(\"/api/batch-jobs\", methods=[\"GET\"])\ndef get_batch_jobs_route():\n    \"\"\"Get all batch jobs\"\"\"\n    return jsonify(get_all_batch_jobs())\n\n@app.route(\"/api/batch-jobs/<job_id>\", methods=[\"GET\"])\ndef get_batch_job_route(job_id):\n    \"\"\"Get a specific batch job\"\"\"\n    job = get_batch_job(job_id)\n    if job:\n        return jsonify(job)\n    return jsonify({\"error\": \"Batch job not found\"}), 404\n\n@app.route(\"/api/batch-jobs\", methods=[\"POST\"])\ndef create_batch_job_route():\n    \"\"\"Create a new batch job and process documents\"\"\"\n    if \"documents\" not in request.files:\n        return jsonify({\"error\": \"No documents provided\"}), 400\n    \n    files = request.files.getlist(\"documents\")\n    if len(files) == 0:\n        return jsonify({\"error\": \"No files selected\"}), 400\n    \n    if len(files) > 50:\n        return jsonify({\"error\": \"Maximum 50 documents per batch\"}), 400\n    \n    batch_name = request.form.get(\"name\", f\"Batch {datetime.now().strftime('%Y-%m-%d %H:%M')}\")\n    \n    job_id = create_batch_job(batch_name, len(files))\n    if not job_id:\n        return jsonify({\"error\": \"Failed to create batch job\"}), 500\n    \n    update_batch_job(job_id, {\"status\": \"processing\", \"started_at\": datetime.now()})\n    \n    log_audit_event(\n        action=\"batch_job_started\",\n        entity_type=\"batch_job\",\n        entity_id=job_id,\n        details={\"name\": batch_name, \"documentCount\": len(files)},\n        ip_address=request.remote_addr\n    )\n    \n    verification_ids = []\n    successful = 0\n    failed = 0\n    \n    for i, file in enumerate(files):\n        try:\n            file_content = file.read()\n            mime_type = file.content_type or \"image/jpeg\"\n            result = process_single_document_for_batch(file_content, file.filename, mime_type)\n            \n            if result[\"success\"]:\n                verification_ids.append(result[\"verification_id\"])\n                successful += 1\n            else:\n                failed += 1\n            \n            update_batch_job(job_id, {\n                \"processed_documents\": i + 1,\n                \"successful_documents\": successful,\n                \"failed_documents\": failed,\n                \"verification_ids\": verification_ids\n            })\n        except Exception as e:\n            print(f\"Batch document processing error: {e}\")\n            failed += 1\n            update_batch_job(job_id, {\n                \"processed_documents\": i + 1,\n                \"failed_documents\": failed\n            })\n    \n    final_status = \"completed\" if failed == 0 else (\"completed_with_errors\" if successful > 0 else \"failed\")\n    update_batch_job(job_id, {\n        \"status\": final_status,\n        \"completed_at\": datetime.now()\n    })\n    \n    log_audit_event(\n        action=\"batch_job_completed\",\n        entity_type=\"batch_job\",\n        entity_id=job_id,\n        details={\n            \"name\": batch_name,\n            \"status\": final_status,\n            \"successful\": successful,\n            \"failed\": failed\n        },\n        ip_address=request.remote_addr\n    )\n    \n    return jsonify(get_batch_job(job_id)), 201\n\n@app.route(\"/api/batch-jobs/<job_id>/verifications\", methods=[\"GET\"])\ndef get_batch_verifications_route(job_id):\n    \"\"\"Get all verifications for a batch job\"\"\"\n    job = get_batch_job(job_id)\n    if not job:\n        return jsonify({\"error\": \"Batch job not found\"}), 404\n    \n    verifications = []\n    for ver_id in job.get(\"verificationIds\", []):\n        ver = get_verification_by_id(ver_id)\n        if ver:\n            verifications.append(ver)\n    \n    return jsonify(verifications)\n\n@app.route(\"/api/batch-jobs/stats\", methods=[\"GET\"])\ndef get_batch_stats_route():\n    \"\"\"Get batch processing statistics\"\"\"\n    try:\n        all_jobs = get_all_batch_jobs()\n        total_jobs = len(all_jobs)\n        completed_jobs = sum(1 for j in all_jobs if j[\"status\"] in [\"completed\", \"completed_with_errors\"])\n        total_documents = sum(j[\"totalDocuments\"] for j in all_jobs)\n        successful_documents = sum(j[\"successfulDocuments\"] for j in all_jobs)\n        \n        return jsonify({\n            \"totalJobs\": total_jobs,\n            \"completedJobs\": completed_jobs,\n            \"totalDocuments\": total_documents,\n            \"successfulDocuments\": successful_documents,\n            \"successRate\": round((successful_documents / total_documents * 100) if total_documents > 0 else 0, 1)\n        })\n    except Exception as e:\n        print(f\"Batch stats error: {e}\")\n        return jsonify({\n            \"totalJobs\": 0,\n            \"completedJobs\": 0,\n            \"totalDocuments\": 0,\n            \"successfulDocuments\": 0,\n            \"successRate\": 0\n        })\n\n\n@app.route(\"/api/rag/status\", methods=[\"GET\"])\ndef get_rag_status_route():\n    \"\"\"Get RAG system status and knowledge base statistics\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\n            \"enabled\": False,\n            \"status\": \"unavailable\",\n            \"message\": \"RAG service is not available\",\n            \"features\": {\n                \"langchain\": False,\n                \"langgraph\": False,\n                \"vectorDb\": False,\n                \"embeddings\": False\n            }\n        })\n    \n    try:\n        kb_stats = get_knowledge_base_stats()\n        return jsonify({\n            \"enabled\": True,\n            \"status\": kb_stats.get(\"status\", \"unknown\"),\n            \"knowledgeBase\": kb_stats,\n            \"features\": {\n                \"langchain\": True,\n                \"langgraph\": True,\n                \"vectorDb\": True,\n                \"embeddings\": True,\n                \"ragChat\": True,\n                \"semanticSearch\": True,\n                \"fraudPatternMatching\": True,\n                \"workflowAnalysis\": True\n            },\n            \"models\": {\n                \"llm\": \"gpt-4o\",\n                \"embeddings\": \"text-embedding-3-small\",\n                \"vectorDb\": \"ChromaDB\"\n            }\n        })\n    except Exception as e:\n        return jsonify({\n            \"enabled\": True,\n            \"status\": \"error\",\n            \"error\": str(e)\n        })\n\n\n@app.route(\"/api/rag/search\", methods=[\"POST\"])\ndef semantic_search_route():\n    \"\"\"Semantic search across document knowledge base\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\"error\": \"RAG service not available\"}), 503\n    \n    data = request.get_json()\n    query = data.get(\"query\", \"\")\n    limit = data.get(\"limit\", 5)\n    filter_type = data.get(\"filterType\")\n    \n    if not query:\n        return jsonify({\"error\": \"Search query required\"}), 400\n    \n    try:\n        results = semantic_document_search(query, k=limit, filter_type=filter_type)\n        \n        log_audit_event(\n            action=\"semantic_search\",\n            entity_type=\"rag\",\n            details={\"query\": query, \"results_count\": len(results)},\n            ip_address=request.remote_addr\n        )\n        \n        return jsonify({\n            \"query\": query,\n            \"results\": results,\n            \"total\": len(results)\n        })\n    except Exception as e:\n        return jsonify({\"error\": str(e)}), 500\n\n\n@app.route(\"/api/rag/similar/<verification_id>\", methods=[\"GET\"])\ndef find_similar_route(verification_id):\n    \"\"\"Find similar verifications using vector similarity\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\"error\": \"RAG service not available\"}), 503\n    \n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    \n    try:\n        similar_verifications = find_similar_verifications(verification, k=5)\n        matching_patterns = find_matching_fraud_patterns(verification, k=3)\n        \n        return jsonify({\n            \"verificationId\": verification_id,\n            \"similarVerifications\": similar_verifications,\n            \"matchingFraudPatterns\": matching_patterns\n        })\n    except Exception as e:\n        return jsonify({\"error\": str(e)}), 500\n\n\n@app.route(\"/api/rag/analyze/<verification_id>\", methods=[\"POST\"])\ndef rag_analyze_route(verification_id):\n    \"\"\"Run complete RAG analysis on a verification using LangGraph workflow\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\"error\": \"RAG service not available\"}), 503\n    \n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    \n    try:\n        ocr_result = {\n            \"extracted_fields\": verification.get(\"ocrFields\", []),\n            \"document_analysis\": {\n                \"detected_type\": verification.get(\"documentType\"),\n                \"quality_score\": 80,\n                \"is_readable\": True,\n                \"potential_issues\": []\n            }\n        }\n        \n        analysis = analyze_document_with_rag(verification, ocr_result)\n        \n        log_audit_event(\n            action=\"rag_analysis\",\n            entity_type=\"verification\",\n            entity_id=verification_id,\n            details={\n                \"recommendation\": analysis.get(\"workflow_analysis\", {}).get(\"final_recommendation\", \"\"),\n                \"fraud_indicators_count\": len(analysis.get(\"workflow_analysis\", {}).get(\"fraud_indicators\", []))\n            },\n            ip_address=request.remote_addr\n        )\n        \n        return jsonify({\n            \"verificationId\": verification_id,\n            \"analysis\": analysis\n        })\n    except Exception as e:\n        return jsonify({\"error\": str(e)}), 500\n\n\n@app.route(\"/api/rag/workflow/<verification_id>\", methods=[\"POST\"])\ndef run_workflow_route(verification_id):\n    \"\"\"Execute LangGraph verification workflow\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\"error\": \"RAG service not available\"}), 503\n    \n    verification = get_verification_by_id(verification_id)\n    if not verification:\n        return jsonify({\"error\": \"Verification not found\"}), 404\n    \n    try:\n        ocr_result = {\n            \"extracted_fields\": verification.get(\"ocrFields\", []),\n            \"document_analysis\": {\n                \"detected_type\": verification.get(\"documentType\"),\n                \"quality_score\": 80,\n                \"is_readable\": True,\n                \"potential_issues\": []\n            }\n        }\n        \n        workflow_result = run_verification_workflow(verification, ocr_result)\n        \n        return jsonify({\n            \"verificationId\": verification_id,\n            \"workflowResult\": workflow_result\n        })\n    except Exception as e:\n        return jsonify({\"error\": str(e)}), 500\n\n\n@app.route(\"/api/rag/embed\", methods=[\"POST\"])\ndef embed_documents_route():\n    \"\"\"Manually trigger document embedding for existing verifications\"\"\"\n    if not RAG_ENABLED:\n        return jsonify({\"error\": \"RAG service not available\"}), 503\n    \n    try:\n        all_verifications = get_all_verifications()\n        embedded_count = 0\n        \n        for verification in all_verifications:\n            result = create_document_embedding(verification)\n            if result:\n                embedded_count += 1\n        \n        pattern_count = store_fraud_pattern_embeddings(fraud_patterns)\n        \n        log_audit_event(\n            action=\"bulk_embedding\",\n            entity_type=\"rag\",\n            details={\n                \"verifications_embedded\": embedded_count,\n                \"patterns_embedded\": pattern_count\n            },\n            ip_address=request.remote_addr\n        )\n        \n        return jsonify({\n            \"success\": True,\n            \"verificationsEmbedded\": embedded_count,\n            \"patternsEmbedded\": pattern_count\n        })\n    except Exception as e:\n        return jsonify({\"error\": str(e)}), 500\n\n\nif __name__ == \"__main__\":\n    port = int(os.environ.get(\"FLASK_PORT\", 5001))\n    app.run(host=\"0.0.0.0\", port=port, debug=False, threaded=True)\n","path":null,"size_bytes":57285,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"README.md":{"content":"# VerifAI - AI-Powered KYC Document Verification Platform\n\n<p align=\"center\">\n  <strong>Intelligent Know Your Customer (KYC) document verification powered by cutting-edge AI technologies</strong>\n</p>\n\n<p align=\"center\">\n  <em>LangChain | LangGraph | RAG | Vector Embeddings | OpenAI GPT-4o | ChromaDB</em>\n</p>\n\n---\n\n## Table of Contents\n- [Overview](#overview)\n- [Key Features](#key-features)\n- [AI Technologies](#ai-technologies)\n- [Technical Stack](#technical-stack)\n- [Architecture](#architecture)\n- [Menu Flow](#menu-flow)\n- [User Flow](#user-flow)\n- [Technical Details](#technical-details)\n- [API Reference](#api-reference)\n- [Getting Started](#getting-started)\n\n---\n\n## Overview\n\nVerifAI is an enterprise-grade Know Your Customer (KYC) document verification platform that combines traditional OCR capabilities with advanced AI technologies. The platform leverages **LangChain** for intelligent document processing, **LangGraph** for multi-step verification workflows, **RAG (Retrieval Augmented Generation)** for context-aware AI assistance, and **ChromaDB** for semantic document similarity search.\n\n### What Makes VerifAI Unique\n\n- **Multi-Step Verification Workflow**: LangGraph orchestrates a sophisticated verification pipeline with OCR analysis, fraud detection, historical comparison, and compliance checking\n- **Knowledge-Augmented AI Assistant**: RAG-enhanced GenAI provides contextual responses by retrieving relevant historical documents and fraud patterns\n- **Semantic Fraud Detection**: Vector embeddings enable similarity-based fraud pattern matching across the document knowledge base\n- **Real-Time Risk Scoring**: Advanced algorithms analyze document quality, data consistency, and historical patterns\n\n---\n\n## Key Features\n\n### Core Verification Features\n\n| Feature | Description | Technology |\n|---------|-------------|------------|\n| **AI-Powered OCR** | Automated text extraction from passports, driver's licenses, and national IDs with field-level confidence scoring | OpenAI Vision API (GPT-4o) |\n| **Intelligent Risk Scoring** | Multi-factor risk assessment analyzing document quality, data consistency, OCR confidence, and historical patterns | Custom Risk Engine |\n| **LangGraph Verification Workflow** | Automated multi-step verification pipeline with OCR analysis, fraud detection, similarity search, and compliance validation | LangGraph State Machine |\n| **RAG-Enhanced GenAI Assistant** | Context-aware AI chat that retrieves relevant historical documents and fraud patterns for informed responses | LangChain RAG + ChromaDB |\n| **Semantic Document Search** | Find similar verifications using natural language queries across the entire document knowledge base | Vector Embeddings + ChromaDB |\n| **Fraud Pattern Matching** | Automatic detection of fraud patterns by comparing against a vector-embedded library of known techniques | Cosine Similarity Search |\n\n### Dashboard & Analytics\n\n| Feature | Description |\n|---------|-------------|\n| **Real-Time KPIs** | Total verifications, auto-approval rate, pending reviews, and high-risk flags at a glance |\n| **Verification Volume Chart** | 7-day trend visualization of verification activity with status breakdown |\n| **Recent Activity Feed** | Live feed of verification submissions with risk indicators and status |\n| **RAG System Status** | Knowledge base statistics showing indexed documents, embeddings, and AI model health |\n\n### Document Processing\n\n| Feature | Description |\n|---------|-------------|\n| **Drag-and-Drop Upload** | Intuitive file upload supporting JPG, PNG, and PDF formats up to 10MB |\n| **Batch Processing** | Upload and process multiple documents simultaneously with progress tracking |\n| **Document Preview** | Full-size document viewer with OCR field highlighting |\n| **Multi-Tab Analysis** | Organized views for OCR data, validation results, and risk insights |\n\n### Compliance & Audit\n\n| Feature | Description |\n|---------|-------------|\n| **Complete Audit Trail** | Every action logged with timestamp, user, IP address, and detailed changes |\n| **Filterable Logs** | Search audit history by action type, entity, user, or date range |\n| **CSV Export** | Export audit logs for external compliance reporting |\n| **Role-Based Access** | Session-based authentication with configurable user permissions |\n\n### Configuration & Integrations\n\n| Feature | Description |\n|---------|-------------|\n| **Risk Thresholds** | Configurable auto-approve (low risk) and high-risk threshold values |\n| **Automation Rules** | Optional auto-rejection for high-risk documents |\n| **Notification Settings** | Email and in-app notification preferences |\n| **External Data Sources** | Integration points for DMV, Passport Authority, and SSA verification |\n| **Fraud Pattern Library** | Curated detection techniques for font substitution, photo manipulation, and metadata tampering |\n\n---\n\n## AI Technologies\n\n### LangChain Integration\n\nLangChain powers the core AI capabilities of VerifAI:\n\n```\n\n                     LANGCHAIN COMPONENTS                            \n\n                                                                      \n          \n     ChatOpenAI         OpenAIEmbeddings      ChromaDB        \n     (GPT-4o)           (text-embedding       Vector Store    \n                         -3-small)                            \n    - Chat responses     - Document           - Persistent    \n    - Analysis             embeddings           storage       \n    - Reasoning          - Semantic           - Similarity    \n                           similarity           search        \n          \n                                                                      \n    \n                       RAG Chain                                    \n    Query  Retrieve Similar Docs  Augment Context  Generate     \n    \n                                                                      \n\n```\n\n**Key Capabilities:**\n- **ChatOpenAI**: GPT-4o model for document analysis, risk assessment, and conversational AI\n- **OpenAIEmbeddings**: text-embedding-3-small model for creating vector representations of documents\n- **Document Loaders**: Convert verification data into LangChain Document objects with metadata\n- **Prompt Templates**: Specialized prompts for compliance analysis and fraud detection\n\n### LangGraph Verification Workflow\n\nLangGraph orchestrates a sophisticated multi-step verification pipeline:\n\n```\n\n                  LANGGRAPH VERIFICATION WORKFLOW                     \n\n                                                                      \n                \n      OCR       FRAUD     SIMILAR  COMPLIANCE   \n   ANALYSIS       DETECTION        DOCS           CHECK     \n                \n                                                                 \n                                                                 \n                                                                 \n     \n                      VERIFICATION STATE                           \n    - verification_id    - fraud_indicators    - risk_score       \n    - document_type      - similar_documents   - risk_level       \n    - ocr_data          - compliance_check    - recommendation    \n    - workflow_steps    (accumulated across all nodes)            \n     \n                                                                     \n                                                                     \n                                            \n                         RECOMMENDATION                            \n                      APPROVE | REJECT |                           \n                        MANUAL REVIEW                              \n                                            \n                                                                      \n\n```\n\n**Workflow Nodes:**\n\n1. **OCR Analysis Node**\n   - Evaluates extracted field quality\n   - Flags low-confidence extractions (<80%)\n   - Identifies missing required fields\n\n2. **Fraud Detection Node**\n   - Matches against embedded fraud pattern library\n   - Uses vector similarity for pattern detection\n   - Reports confidence scores for matches\n\n3. **Similar Documents Node**\n   - Retrieves historically similar verifications\n   - Identifies patterns from high-risk similar documents\n   - Provides context from past decisions\n\n4. **Compliance Check Node**\n   - Validates document type acceptability\n   - Checks for required fields (name, DOB, document number)\n   - Verifies expiry and issuing authority\n\n5. **Recommendation Node**\n   - Aggregates all indicators\n   - Generates final APPROVE/REJECT/MANUAL REVIEW decision\n   - Provides reasoning summary\n\n### RAG (Retrieval Augmented Generation)\n\nThe RAG system enhances AI responses with relevant historical context:\n\n```\n\n                         RAG PIPELINE                                 \n\n                                                                      \n  User Query: \"What are the risk factors for this document?\"         \n                                                                      \n                                                                     \n                                                                     \n    \n                      RETRIEVAL PHASE                               \n    1. Embed user query using text-embedding-3-small                \n    2. Search ChromaDB for similar verifications (k=2)              \n    3. Search ChromaDB for matching fraud patterns (k=2)            \n    4. Rank results by cosine similarity score                      \n    \n                                                                     \n                                                                     \n    \n                      AUGMENTATION PHASE                            \n    Context = Current Document + Similar Documents + Patterns       \n                                                                    \n    \"Current Document: Passport, Risk Score: 45...\"                 \n    \"Similar Case 1: Medium risk, approved...\"                      \n    \"Matching Pattern: Font substitution detected...\"               \n    \n                                                                     \n                                                                     \n    \n                      GENERATION PHASE                              \n    GPT-4o generates response using augmented context               \n                                                                    \n    \"Based on the analysis and similar past cases, the main        \n     risk factors are: 1) Low OCR confidence on DOB field...       \n     2) Similar to 2 previously flagged documents...\"              \n    \n                                                                      \n\n```\n\n**RAG Benefits:**\n- **Historical Context**: AI responses informed by past verification decisions\n- **Pattern Recognition**: Automatic retrieval of relevant fraud patterns\n- **Reduced Hallucination**: Grounded responses based on actual data\n- **Institutional Knowledge**: Captures and leverages organizational expertise\n\n### Vector Embeddings & ChromaDB\n\nChromaDB provides persistent vector storage for semantic search:\n\n```\n\n                      CHROMADB VECTOR STORE                          \n\n                                                                      \n  Collection: verifai_documents                                       \n  Embedding Model: text-embedding-3-small (1536 dimensions)          \n  Persist Directory: ./chroma_db                                      \n                                                                      \n   \n                    DOCUMENT TYPES                                  \n   \n                                                                    \n    Verifications (type: \"verification\")                           \n     Document type, customer name                               \n     Risk score, risk level, status                             \n     OCR extracted fields with confidence                       \n     Risk insights and validation results                       \n     Submission timestamp                                        \n                                                                    \n    Fraud Patterns (type: \"fraud_pattern\")                         \n     Pattern name and description                               \n     Detection technique                                         \n     Confidence score                                            \n                                                                    \n   \n                                                                      \n   \n                    SEARCH CAPABILITIES                            \n   \n     Semantic similarity search with cosine distance              \n     Metadata filtering by document type                          \n     Configurable result count (k parameter)                      \n     Similarity score ranking (0-1 scale)                         \n   \n                                                                      \n\n```\n\n---\n\n## Technical Stack\n\n### Frontend\n```\nReact 18          - Modern UI with hooks and functional components\nTypeScript        - Type-safe development\nVite              - Fast build tool and dev server\nTailwind CSS      - Utility-first styling\nShadcn/UI         - Pre-built accessible components\nWouter            - Lightweight routing\nTanStack Query    - Server state management\nRecharts          - Data visualization\nLucide React      - Icon library\n```\n\n### Backend\n```\nNode.js/Express   - API gateway and static file server\nPython Flask      - Core business logic and AI services\nPostgreSQL        - Persistent data storage (Neon-backed)\nMulter            - File upload handling\npsycopg2          - PostgreSQL driver for Python\n```\n\n### AI & ML Stack\n```\nOpenAI GPT-4o           - Document analysis, chat, reasoning\nOpenAI Vision API       - OCR and image analysis\nOpenAI Embeddings       - text-embedding-3-small for vectors\nLangChain               - AI application framework\nLangGraph               - Multi-step workflow orchestration\nChromaDB                - Vector database for embeddings\ntiktoken                - Token counting for context management\n```\n\n### Python Dependencies\n```python\nlangchain               - Core LangChain framework\nlangchain-openai        - OpenAI integrations\nlangchain-community     - Community integrations\nlanggraph               - State machine workflows\nchromadb                - Vector store\nopenai                  - OpenAI Python SDK\ntiktoken                - Tokenization\npsycopg2-binary         - PostgreSQL driver\nflask                   - Web framework\nflask-cors              - CORS handling\npython-dotenv           - Environment variables\n```\n\n---\n\n## Architecture\n\n```\n\n                           CLIENT BROWSER                             \n                         (React SPA @ :5000)                          \n\n                                    \n                                    \n\n                        EXPRESS SERVER (:5000)                        \n       \n     Vite Dev       Session          API Proxy to Flask       \n     Server         Auth           (Multer File Handling)     \n       \n\n                                    \n                                    \n\n                       FLASK API SERVER (:5001)                       \n        \n    Verification      OpenAI            Risk Engine           \n     Service         Integration      (Scoring/Detection)      \n        \n        \n    RAG Service     LangGraph          Batch Processing       \n    (LangChain)      Workflow             Service             \n        \n                                     \n      Chat           Audit                                       \n     Service         Logging                                     \n                                     \n\n                                              \n                                              \n  \n      POSTGRESQL DATABASE                   CHROMADB                 \n             (Vector Store)              \n   verifications     chat           \n    messages        verifai_documents         \n           - Verification vectors    \n    audit_logs           - Fraud pattern vectors   \n    settings         \n       \n    batch_jobs                \n                \n\n```\n\n### Data Flow\n\n1. **Document Upload**  Express receives file  Proxies to Flask\n2. **OCR Processing**  Flask sends image to OpenAI Vision API  Extracts fields\n3. **Risk Assessment**  Risk engine calculates score  Generates insights\n4. **Vector Embedding**  Document embedded  Stored in ChromaDB\n5. **Workflow Analysis**  LangGraph runs verification pipeline\n6. **Database Storage**  Verification saved to PostgreSQL\n7. **AI Chat**  RAG retrieves context  LangChain generates response\n\n---\n\n## Menu Flow\n\n```\n\n                          TOP NAVIGATION BAR                          \n\n                                                                      \n  [VerifAI Logo]                                                      \n                                                                      \n  Navigation Links:                                                   \n   Dashboard (/dashboard)         - Main overview page             \n   Audit Trail (/audit)           - Activity logs                  \n   Integrations (/integrations)   - External connections           \n   Patterns (/patterns)           - Fraud detection library        \n   Settings (/settings)           - Configuration                  \n                                                                      \n  Actions:                                                            \n   [Upload Document] Button       - Opens upload page              \n   [User Menu]                    - Profile and logout             \n                                                                      \n\n```\n\n### Page Routes\n\n| Route | Page | Description |\n|-------|------|-------------|\n| `/` | Login | Authentication page |\n| `/dashboard` | Dashboard | Main overview with KPIs and RAG status |\n| `/upload` | Upload | Document upload interface |\n| `/verification/:id` | Verification Detail | Review with AI assistant |\n| `/integrations` | Integrations | External data source connections |\n| `/patterns` | Patterns | Fraud detection techniques |\n| `/settings` | Settings | System configuration |\n| `/audit` | Audit Trail | Activity log viewer |\n\n---\n\n## User Flow\n\n```\n\n    LOGIN    \n  (analyst)  \n\n       \n       \n\n                            DASHBOARD                                 \n         \n     Total           Auto          Pending       High Risk  \n  Verifications    Approval        Review         Flags     \n       12            Rate             4             2       \n                     50%                                    \n         \n                                                                      \n  [Verification Volume Chart]        [Recent Verifications List]     \n                                                                      \n     \n    RAG System Status: Active                                       \n    Knowledge Base: 156 documents | ChromaDB: Connected             \n     \n\n       \n       \n                             \n                             \n        \n   UPLOAD                       VERIFICATION DETAIL                \n  DOCUMENT              \n                                Document Preview                 \n [Drag/Drop]               (Image with OCR Highlights)           \n  [Browse]              \n           \n                            Tabs: OCR Data | Validation | Risk    \n                                 \n                            Name: John Smith          98%         \n                            DOB: 1985-03-15           96%         \n                            Doc #: ABC123456          99%         \n                         \n                         \n                           [APPROVE]  [REJECT]  [Ask AI]          \n                         \n                         \n              RAG-Enhanced GenAI Assistant         \n                           \"What are the risk factors?\"            \n                           AI: \"Based on similar past cases...\"    \n                                [Similar: 3 docs | Patterns: 2]    \n                          \n                       \n                              \n                              \n                       \n                          AUDIT     \n                          TRAIL     \n                         (Logged)   \n                       \n```\n\n### User Journey Steps\n\n1. **Login**: Analyst enters credentials (analyst/analyst)\n2. **Dashboard Review**: View KPIs, RAG status, recent verifications\n3. **Upload Document**: Drag-and-drop or browse to upload ID document\n4. **AI Processing**: \n   - OCR extraction with OpenAI Vision\n   - Risk score calculation\n   - Vector embedding creation\n   - LangGraph workflow execution\n5. **Review Verification**: Examine OCR data, risk insights, similar documents\n6. **Consult AI**: RAG-enhanced chat with historical context\n7. **Decision**: Approve or reject with full audit logging\n8. **Knowledge Base Update**: Decision embedded for future reference\n\n---\n\n## Technical Details\n\n### Database Schema\n\n```javascript\n// verifications table\n{\n  id: \"uuid\",\n  document_type: \"passport | drivers_license | national_id\",\n  document_url: \"base64 encoded image\",\n  status: \"pending | approved | rejected | in_review\",\n  risk_score: 0-100,\n  risk_level: \"low | medium | high\",\n  customer_name: \"string\",\n  submitted_at: \"timestamp\",\n  reviewed_at: \"timestamp\",\n  ocr_fields: \"jsonb[]\",\n  risk_insights: \"jsonb[]\",\n  validation_results: \"jsonb[]\"\n}\n\n// chat_messages table\n{\n  id: \"uuid\",\n  verification_id: \"uuid (FK)\",\n  role: \"user | assistant\",\n  content: \"string\",\n  timestamp: \"timestamp\"\n}\n\n// audit_logs table\n{\n  id: \"uuid\",\n  action: \"string\",\n  entity_type: \"string\",\n  entity_id: \"string\",\n  user_id: \"string\",\n  user_name: \"string\",\n  details: \"jsonb\",\n  ip_address: \"string\",\n  timestamp: \"timestamp\"\n}\n\n// batch_jobs table\n{\n  id: \"uuid\",\n  name: \"string\",\n  status: \"pending | processing | completed | failed\",\n  total_documents: \"integer\",\n  processed_documents: \"integer\",\n  successful_documents: \"integer\",\n  failed_documents: \"integer\",\n  verification_ids: \"jsonb[]\",\n  created_at: \"timestamp\",\n  started_at: \"timestamp\",\n  completed_at: \"timestamp\"\n}\n```\n\n### Risk Scoring Algorithm\n\n```javascript\nfunction calculateRiskScore(ocrResult, documentType) {\n  let baseScore = 20;\n  \n  // Document quality assessment\n  if (qualityScore < 50) baseScore += 30;\n  else if (qualityScore < 70) baseScore += 15;\n  \n  // Issue detection from OCR\n  baseScore += issueCount * 8;\n  \n  // Readability check\n  if (!isReadable) baseScore += 25;\n  \n  // OCR confidence average\n  if (avgConfidence < 70) baseScore += 20;\n  else if (avgConfidence < 85) baseScore += 10;\n  \n  // LangGraph fraud pattern matches\n  baseScore += fraudPatternMatches * 10;\n  \n  // Similar high-risk documents\n  baseScore += highRiskSimilarDocs * 5;\n  \n  return Math.min(Math.max(baseScore, 5), 95);\n}\n\n// Risk Level Classification\n// Low:    0-29   Auto-approve candidate\n// Medium: 30-69  Manual review required\n// High:   70+    High fraud risk\n```\n\n### RAG Implementation\n\n```python\n# RAG-enhanced chat with document context retrieval\ndef rag_enhanced_chat(verification, user_message, chat_history):\n    # 1. Retrieve similar documents from ChromaDB\n    similar_docs = find_similar_verifications(verification, k=2)\n    matching_patterns = find_matching_fraud_patterns(verification, k=2)\n    \n    # 2. Build augmented context\n    context = f\"\"\"\n    Current Document: {verification['documentType']}\n    Risk Score: {verification['riskScore']}/100\n    \n    Similar Past Verifications:\n    {format_similar_docs(similar_docs)}\n    \n    Matching Fraud Patterns:\n    {format_patterns(matching_patterns)}\n    \"\"\"\n    \n    # 3. Generate response with LangChain\n    messages = [SystemMessage(content=context)]\n    messages.extend(format_chat_history(chat_history))\n    messages.append(HumanMessage(content=user_message))\n    \n    response = llm.invoke(messages)\n    return response.content\n```\n\n### LangGraph Workflow\n\n```python\n# Create verification workflow\nworkflow = StateGraph(VerificationState)\n\n# Add nodes\nworkflow.add_node(\"ocr_analysis\", ocr_analysis_node)\nworkflow.add_node(\"fraud_detection\", fraud_detection_node)\nworkflow.add_node(\"similar_docs\", similar_docs_node)\nworkflow.add_node(\"compliance_check\", compliance_check_node)\nworkflow.add_node(\"recommendation\", recommendation_node)\n\n# Define edges (linear flow)\nworkflow.set_entry_point(\"ocr_analysis\")\nworkflow.add_edge(\"ocr_analysis\", \"fraud_detection\")\nworkflow.add_edge(\"fraud_detection\", \"similar_docs\")\nworkflow.add_edge(\"similar_docs\", \"compliance_check\")\nworkflow.add_edge(\"compliance_check\", \"recommendation\")\nworkflow.add_edge(\"recommendation\", END)\n\n# Compile and execute\napp = workflow.compile()\nresult = app.invoke(initial_state)\n```\n\n---\n\n## API Reference\n\n### Verification Endpoints\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n| GET | `/api/verifications` | List all verifications |\n| POST | `/api/verifications` | Upload new document |\n| GET | `/api/verifications/:id` | Get verification details |\n| PATCH | `/api/verifications/:id` | Update status |\n| GET | `/api/verifications/:id/chat` | Get chat history |\n| POST | `/api/verifications/:id/chat` | Send chat message (RAG-enhanced) |\n\n### RAG & AI Endpoints\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n| GET | `/api/rag/status` | Get RAG system status and knowledge base stats |\n| POST | `/api/rag/search` | Semantic search across document knowledge base |\n| GET | `/api/rag/similar/:id` | Find similar verifications for a document |\n| POST | `/api/rag/analyze/:id` | Run complete RAG analysis with LangGraph workflow |\n| POST | `/api/rag/workflow/:id` | Execute LangGraph verification workflow |\n| POST | `/api/rag/embed` | Manually trigger embedding for all documents |\n\n### Batch Processing\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n| GET | `/api/batch-jobs` | List all batch jobs |\n| POST | `/api/batch-jobs` | Create batch job |\n| GET | `/api/batch-jobs/:id` | Get job details |\n| GET | `/api/batch-jobs/:id/verifications` | Get job verifications |\n| GET | `/api/batch-jobs/stats` | Get batch statistics |\n\n### Other Endpoints\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n| GET | `/api/dashboard` | Dashboard statistics |\n| GET | `/api/integrations` | List integrations |\n| GET | `/api/patterns` | List fraud patterns |\n| GET/PUT | `/api/settings` | Get/update settings |\n| GET | `/api/audit-logs` | List audit logs |\n| GET | `/api/audit-logs/export` | Export as CSV |\n\n---\n\n## Getting Started\n\n### Prerequisites\n- Node.js 18+\n- Python 3.10+\n- PostgreSQL database\n- OpenAI API key\n\n### Environment Variables\n```env\nDATABASE_URL=postgresql://...\nOPENAI_API_KEY=sk-...\nSESSION_SECRET=your-session-secret\n```\n\n### Installation\n```bash\n# Install Node dependencies\nnpm install\n\n# Install Python dependencies\npip install flask flask-cors openai psycopg2-binary python-dotenv \\\n    langchain langchain-openai langchain-community langgraph chromadb tiktoken\n\n# Start the application\nnpm run dev\n```\n\n### Login Credentials\n- **Username**: analyst\n- **Password**: analyst\n\n---\n\n## License\nMIT License - See LICENSE file for details.\n","path":null,"size_bytes":43465,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null}},"version":2}